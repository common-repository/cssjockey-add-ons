!function(){var e=function(t,i){var r=this;e.count=(e.count||0)+1,this.count=e.count,this.isOpened=!1,this.input=n(t),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-expanded","false"),this.input.setAttribute("aria-owns","awesomplete_list_"+this.count),this.input.setAttribute("role","combobox"),this.options=i=i||{},function(e,t,i){for(var n in t){var r=t[n],o=e.input.getAttribute("data-"+n.toLowerCase());"number"==typeof r?e[n]=parseInt(o):!1===r?e[n]=null!==o:r instanceof Function?e[n]=null:e[n]=o,e[n]||0===e[n]||(e[n]=n in i?i[n]:r)}}(this,{minChars:2,maxItems:10,autoFirst:!1,data:e.DATA,filter:e.FILTER_CONTAINS,sort:!1!==i.sort&&e.SORT_BYLENGTH,container:e.CONTAINER,item:e.ITEM,replace:e.REPLACE,tabSelect:!1},i),this.index=-1,this.container=this.container(t),this.ul=n.create("ul",{hidden:"hidden",role:"listbox",id:"awesomplete_list_"+this.count,inside:this.container}),this.status=n.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-atomic":!0,inside:this.container,textContent:0!=this.minChars?"Type "+this.minChars+" or more characters for results.":"Begin typing for results."}),this._events={input:{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown:function(e){var t=e.keyCode;r.opened&&(13===t&&r.selected?(e.preventDefault(),r.select(void 0,void 0,e)):9===t&&r.selected&&r.tabSelect?r.select(void 0,void 0,e):27===t?r.close({reason:"esc"}):38!==t&&40!==t||(e.preventDefault(),r[38===t?"previous":"next"]()))}},form:{submit:this.close.bind(this,{reason:"submit"})},ul:{mousedown:function(e){e.preventDefault()},click:function(e){var t=e.target;if(t!==this){for(;t&&!/li/i.test(t.nodeName);)t=t.parentNode;t&&0===e.button&&(e.preventDefault(),r.select(t,e.target,e))}}}},n.bind(this.input,this._events.input),n.bind(this.input.form,this._events.form),n.bind(this.ul,this._events.ul),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||i.list||[],e.all.push(this)};function t(e){var t=Array.isArray(e)?{label:e[0],value:e[1]}:"object"==typeof e&&"label"in e&&"value"in e?e:{label:e,value:e};this.label=t.label||t.value,this.value=t.value}e.prototype={set list(e){if(Array.isArray(e))this._list=e;else if("string"==typeof e&&e.indexOf(",")>-1)this._list=e.split(/\s*,\s*/);else if((e=n(e))&&e.children){var t=[];i.apply(e.children).forEach(function(e){if(!e.disabled){var i=e.textContent.trim(),n=e.value||i,r=e.label||i;""!==n&&t.push({label:r,value:n})}}),this._list=t}document.activeElement===this.input&&this.evaluate()},get selected(){return this.index>-1},get opened(){return this.isOpened},close:function(e){this.opened&&(this.input.setAttribute("aria-expanded","false"),this.ul.setAttribute("hidden",""),this.isOpened=!1,this.index=-1,this.status.setAttribute("hidden",""),n.fire(this.input,"awesomplete-close",e||{}))},open:function(){this.input.setAttribute("aria-expanded","true"),this.ul.removeAttribute("hidden"),this.isOpened=!0,this.status.removeAttribute("hidden"),this.autoFirst&&-1===this.index&&this.goto(0),n.fire(this.input,"awesomplete-open")},destroy:function(){if(n.unbind(this.input,this._events.input),n.unbind(this.input.form,this._events.form),!this.options.container){var t=this.container.parentNode;t.insertBefore(this.input,this.container),t.removeChild(this.container)}this.input.removeAttribute("autocomplete"),this.input.removeAttribute("aria-autocomplete");var i=e.all.indexOf(this);-1!==i&&e.all.splice(i,1)},next:function(){var e=this.ul.children.length;this.goto(this.index<e-1?this.index+1:e?0:-1)},previous:function(){var e=this.ul.children.length,t=this.index-1;this.goto(this.selected&&-1!==t?t:e-1)},goto:function(e){var t=this.ul.children;this.selected&&t[this.index].setAttribute("aria-selected","false"),this.index=e,e>-1&&t.length>0&&(t[e].setAttribute("aria-selected","true"),this.status.textContent=t[e].textContent+", list item "+(e+1)+" of "+t.length,this.input.setAttribute("aria-activedescendant",this.ul.id+"_item_"+this.index),this.ul.scrollTop=t[e].offsetTop-this.ul.clientHeight+t[e].clientHeight,n.fire(this.input,"awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(e,t,i){if(e?this.index=n.siblingIndex(e):e=this.ul.children[this.index],e){var r=this.suggestions[this.index];n.fire(this.input,"awesomplete-select",{text:r,origin:t||e,originalEvent:i})&&(this.replace(r),this.close({reason:"select"}),n.fire(this.input,"awesomplete-selectcomplete",{text:r,originalEvent:i}))}},evaluate:function(){var e=this,i=this.input.value;i.length>=this.minChars&&this._list&&this._list.length>0?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.map(function(n){return new t(e.data(n,i))}).filter(function(t){return e.filter(t,i)}),!1!==this.sort&&(this.suggestions=this.suggestions.sort(this.sort)),this.suggestions=this.suggestions.slice(0,this.maxItems),this.suggestions.forEach(function(t,n){e.ul.appendChild(e.item(t,i,n))}),0===this.ul.children.length?(this.status.textContent="No results found",this.close({reason:"nomatches"})):(this.open(),this.status.textContent=this.ul.children.length+" results found")):(this.close({reason:"nomatches"}),this.status.textContent="No results found")}},e.all=[],e.FILTER_CONTAINS=function(e,t){return RegExp(n.regExpEscape(t.trim()),"i").test(e)},e.FILTER_STARTSWITH=function(e,t){return RegExp("^"+n.regExpEscape(t.trim()),"i").test(e)},e.SORT_BYLENGTH=function(e,t){return e.length!==t.length?e.length-t.length:e<t?-1:1},e.CONTAINER=function(e){return n.create("div",{className:"awesomplete",around:e})},e.ITEM=function(e,t,i){var r=""===t.trim()?e:e.replace(RegExp(n.regExpEscape(t.trim()),"gi"),"<mark>$&</mark>");return n.create("li",{innerHTML:r,role:"option","aria-selected":"false",id:"awesomplete_list_"+this.count+"_item_"+i})},e.REPLACE=function(e){this.input.value=e.value},e.DATA=function(e){return e},Object.defineProperty(t.prototype=Object.create(String.prototype),"length",{get:function(){return this.label.length}}),t.prototype.toString=t.prototype.valueOf=function(){return""+this.label};var i=Array.prototype.slice;function n(e,t){return"string"==typeof e?(t||document).querySelector(e):e||null}function r(e,t){return i.call((t||document).querySelectorAll(e))}function o(){r("input.awesomplete").forEach(function(t){new e(t)})}n.create=function(e,t){var i=document.createElement(e);for(var r in t){var o=t[r];if("inside"===r)n(o).appendChild(i);else if("around"===r){var s=n(o);s.parentNode.insertBefore(i,s),i.appendChild(s),null!=s.getAttribute("autofocus")&&s.focus()}else r in i?i[r]=o:i.setAttribute(r,o)}return i},n.bind=function(e,t){if(e)for(var i in t){var n=t[i];i.split(/\s+/).forEach(function(t){e.addEventListener(t,n)})}},n.unbind=function(e,t){if(e)for(var i in t){var n=t[i];i.split(/\s+/).forEach(function(t){e.removeEventListener(t,n)})}},n.fire=function(e,t,i){var n=document.createEvent("HTMLEvents");for(var r in n.initEvent(t,!0,!0),i)n[r]=i[r];return e.dispatchEvent(n)},n.regExpEscape=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},n.siblingIndex=function(e){for(var t=0;e=e.previousElementSibling;t++);return t},"undefined"!=typeof self&&(self.Awesomplete=e),"undefined"!=typeof Document&&("loading"!==document.readyState?o():document.addEventListener("DOMContentLoaded",o)),e.$=n,e.$$=r,"object"==typeof module&&module.exports&&(module.exports=e)}(),function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define([],e);(this||window).CodeMirror=e()}}(function(){"use strict";var e=navigator.userAgent,t=navigator.platform,i=/gecko\/\d/i.test(e),n=/MSIE \d/.test(e),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=n||r,s=o&&(n?document.documentMode||6:r[1]),a=/WebKit\//.test(e),l=a&&/Qt\/\d+\.\d+/.test(e),c=/Chrome\//.test(e),u=/Opera\//.test(e),d=/Apple Computer/.test(navigator.vendor),p=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),h=/PhantomJS/.test(e),f=/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),m=f||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),g=f||/Mac/.test(t),v=/\bCrOS\b/.test(e),y=/win/i.test(t),b=u&&e.match(/Version\/(\d*\.\d*)/);b&&(b=Number(b[1])),b&&b>=15&&(u=!1,a=!0);var w=g&&(l||u&&(null==b||b<12.11)),x=i||o&&s>=9,k=!1,C=!1;function _(e,t){if(!(this instanceof _))return new _(e,t);this.options=t=t?xo(t):{},xo(Qi,t,!1),P(t);var i=t.value;"string"==typeof i&&(i=new gr(i,t.mode,null,t.lineSeparator)),this.doc=i;var n=new _.inputStyles[t.inputStyle](this),r=this.display=new S(e,i,n);r.wrapper.CodeMirror=this,I(this),$(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),t.autofocus&&!m&&r.input.focus(),W(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new co,keySeq:null,specialChars:null};var l=this;for(var c in o&&s<11&&setTimeout(function(){l.display.input.reset(!0)},20),function(e){var t=e.display;Kr(t.scroller,"mousedown",Yt(e,ci)),Kr(t.scroller,"dblclick",o&&s<11?Yt(e,function(t){if(!eo(e,t)){var i=li(e,t);if(i&&!di(e,t)&&!ai(e.display,t)){Wr(t);var n=e.findWordAt(i);Re(e.doc,n.anchor,n.head)}}}):function(t){eo(e,t)||Wr(t)});x||Kr(t.scroller,"contextmenu",function(t){Di(e,t)});var i,n={end:0};function r(){t.activeTouch&&(i=setTimeout(function(){t.activeTouch=null},1e3),(n=t.activeTouch).end=+new Date)}function a(e,t){if(null==t.left)return!0;var i=t.left-e.left,n=t.top-e.top;return i*i+n*n>400}Kr(t.scroller,"touchstart",function(r){if(!eo(e,r)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(r)){clearTimeout(i);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-n.end<=300?n:null},1==r.touches.length&&(t.activeTouch.left=r.touches[0].pageX,t.activeTouch.top=r.touches[0].pageY)}}),Kr(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),Kr(t.scroller,"touchend",function(i){var n=t.activeTouch;if(n&&!ai(t,i)&&null!=n.left&&!n.moved&&new Date-n.start<300){var o,s=e.coordsChar(t.activeTouch,"page");o=!n.prev||a(n,n.prev)?new Ae(s,s):!n.prev.prev||a(n,n.prev.prev)?e.findWordAt(s):new Ae(he(s.line,0),Ee(e.doc,he(s.line+1,0))),e.setSelection(o.anchor,o.head),e.focus(),Wr(i)}r()}),Kr(t.scroller,"touchcancel",r),Kr(t.scroller,"scroll",function(){t.scroller.clientHeight&&(mi(e,t.scroller.scrollTop),gi(e,t.scroller.scrollLeft,!0),Xr(e,"scroll",e))}),Kr(t.scroller,"mousewheel",function(t){wi(e,t)}),Kr(t.scroller,"DOMMouseScroll",function(t){wi(e,t)}),Kr(t.wrapper,"scroll",function(){t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(t){eo(e,t)||Br(t)},over:function(t){eo(e,t)||(!function(e,t){var i=li(e,t);if(!i)return;var n=document.createDocumentFragment();it(e,i,n),e.display.dragCursor||(e.display.dragCursor=$o("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv));Io(e.display.dragCursor,n)}(e,t),Br(t))},start:function(t){!function(e,t){if(o&&(!e.state.draggingText||+new Date-pi<100))return void Br(t);if(eo(e,t)||ai(e.display,t))return;if(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!d){var i=$o("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",u&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),u&&i.parentNode.removeChild(i)}}(e,t)},drop:Yt(e,hi),leave:function(t){eo(e,t)||fi(e)}};var l=t.input.getField();Kr(l,"keyup",function(t){Ti.call(e,t)}),Kr(l,"keydown",Yt(e,Mi)),Kr(l,"keypress",Yt(e,Oi)),Kr(l,"focus",function(t){Li(e,t)}),Kr(l,"blur",function(t){$i(e,t)})}(this),function(){if(Wo)return;Kr(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Ho(si)},100))}),Kr(window,"blur",function(){Ho($i)}),Wo=!0;var e}(),jt(this),this.curOp.forceUpdate=!0,wr(this,i),t.autofocus&&!m||l.hasFocus()?setTimeout(ko(Li,this),20):$i(this),Ji)Ji.hasOwnProperty(c)&&Ji[c](this,t[c],tn);V(this),t.finishInit&&t.finishInit(this);for(var p=0;p<sn.length;++p)sn[p](this);Bt(this),a&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(r.lineDiv).textRendering&&(r.lineDiv.style.textRendering="auto")}function S(e,t,n){var r=this;this.input=n,r.scrollbarFiller=$o("div",null,"CodeMirror-scrollbar-filler"),r.scrollbarFiller.setAttribute("cm-not-content","true"),r.gutterFiller=$o("div",null,"CodeMirror-gutter-filler"),r.gutterFiller.setAttribute("cm-not-content","true"),r.lineDiv=$o("div",null,"CodeMirror-code"),r.selectionDiv=$o("div",null,null,"position: relative; z-index: 1"),r.cursorDiv=$o("div",null,"CodeMirror-cursors"),r.measure=$o("div",null,"CodeMirror-measure"),r.lineMeasure=$o("div",null,"CodeMirror-measure"),r.lineSpace=$o("div",[r.measure,r.lineMeasure,r.selectionDiv,r.cursorDiv,r.lineDiv],null,"position: relative; outline: none"),r.mover=$o("div",[$o("div",[r.lineSpace],"CodeMirror-lines")],null,"position: relative"),r.sizer=$o("div",[r.mover],"CodeMirror-sizer"),r.sizerWidth=null,r.heightForcer=$o("div",null,null,"position: absolute; height: "+ro+"px; width: 1px;"),r.gutters=$o("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=$o("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=$o("div",[r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),o&&s<8&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),a||i&&m||(r.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(r.wrapper):e(r.wrapper)),r.viewFrom=r.viewTo=t.first,r.reportedViewFrom=r.reportedViewTo=t.first,r.view=[],r.renderedView=null,r.externalMeasured=null,r.viewOffset=0,r.lastWrapHeight=r.lastWrapWidth=0,r.updateLineNumbers=null,r.nativeBarWidth=r.barHeight=r.barWidth=0,r.scrollbarsClipped=!1,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.alignWidgets=!1,r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r.shift=!1,r.selForContextMenu=null,r.activeTouch=null,n.init(r)}function M(e){e.doc.mode=_.getMode(e.options,e.doc.modeOption),T(e)}function T(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,ot(e,100),e.state.modeGen++,e.curOp&&ei(e)}function O(e){var t=Pt(e.display),i=e.options.lineWrapping,n=i&&Math.max(5,e.display.scroller.clientWidth/Et(e.display)-3);return function(r){if(jn(e.doc,r))return 0;var o=0;if(r.widgets)for(var s=0;s<r.widgets.length;s++)r.widgets[s].height&&(o+=r.widgets[s].height);return i?o+(Math.ceil(r.text.length/n)||1)*t:o+t}}function L(e){var t=e.doc,i=O(e);t.iter(function(e){var t=i(e);t!=e.height&&_r(e,t)})}function $(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),St(e)}function D(e){I(e),ei(e),setTimeout(function(){q(e)},20)}function I(e){var t=e.display.gutters,i=e.options.gutters;Do(t);for(var n=0;n<i.length;++n){var r=i[n],o=t.appendChild($o("div",null,"CodeMirror-gutter "+r));"CodeMirror-linenumbers"==r&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none",A(e)}function A(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function z(e){if(0==e.height)return 0;for(var t,i=e.text.length,n=e;t=Pn(n);){n=(r=t.find(0,!0)).from.line,i+=r.from.ch-r.to.ch}for(n=e;t=En(n);){var r=t.find(0,!0);i-=n.text.length-r.from.ch,i+=(n=r.to.line).text.length-r.to.ch}return i}function N(e){var t=e.display,i=e.doc;t.maxLine=xr(i,i.first),t.maxLineLength=z(t.maxLine),t.maxLineChanged=!0,i.iter(function(e){var i=z(e);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=e)})}function P(e){var t=vo(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function E(e){var t=e.display,i=t.gutters.offsetWidth,n=Math.round(e.doc.height+ct(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:n,scrollHeight:n+dt(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}function F(e,t,i){this.cm=i;var n=this.vert=$o("div",[$o("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=$o("div",[$o("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(n),e(r),Kr(n,"scroll",function(){n.clientHeight&&t(n.scrollTop,"vertical")}),Kr(r,"scroll",function(){r.clientWidth&&t(r.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,o&&s<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function H(){}function W(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&Po(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new _.scrollbarModel[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),Kr(t,"mousedown",function(){e.state.focused&&setTimeout(function(){e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,i){"horizontal"==i?gi(e,t):mi(e,t)},e),e.display.scrollbars.addClass&&Eo(e.display.wrapper,e.display.scrollbars.addClass)}function R(e,t){t||(t=E(e));var i=e.display.barWidth,n=e.display.barHeight;j(e,t);for(var r=0;r<4&&i!=e.display.barWidth||n!=e.display.barHeight;r++)i!=e.display.barWidth&&e.options.lineWrapping&&J(e),j(e,E(e)),i=e.display.barWidth,n=e.display.barHeight}function j(e,t){var i=e.display,n=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=n.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=n.bottom)+"px",i.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=n.bottom+"px",i.scrollbarFiller.style.width=n.right+"px"):i.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=n.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}function B(e,t,i){var n=i&&null!=i.top?Math.max(0,i.top):e.scroller.scrollTop;n=Math.floor(n-lt(e));var r=i&&null!=i.bottom?i.bottom:n+e.wrapper.clientHeight,o=Mr(t,n),s=Mr(t,r);if(i&&i.ensure){var a=i.ensure.from.line,l=i.ensure.to.line;a<o?(o=a,s=Mr(t,Tr(xr(t,a))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=s&&(o=Mr(t,Tr(xr(t,l))-e.wrapper.clientHeight),s=l)}return{from:o,to:Math.max(s,o+1)}}function q(e){var t=e.display,i=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=U(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,o=n+"px",s=0;s<i.length;s++)if(!i[s].hidden){e.options.fixedGutter&&(i[s].gutter&&(i[s].gutter.style.left=o),i[s].gutterBackground&&(i[s].gutterBackground.style.left=o));var a=i[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=n+r+"px")}}function V(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=K(e.options,t.first+t.size-1),n=e.display;if(i.length!=n.lineNumChars){var r=n.measure.appendChild($o("div",[$o("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,s=r.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-s)+1,n.lineNumWidth=n.lineNumInnerWidth+s,n.lineNumChars=n.lineNumInnerWidth?i.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",A(e),!0}return!1}function K(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function U(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function G(e,t,i){var n=e.display;this.viewport=t,this.visible=B(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=pt(e),this.force=i,this.dims=te(e),this.events=[]}function Y(e,t){var i=e.display,n=e.doc;if(t.editorIsHidden)return ii(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==oi(e))return!1;V(e)&&(ii(e),t.dims=te(e));var r=n.first+n.size,o=Math.max(t.visible.from-e.options.viewportMargin,n.first),s=Math.min(r,t.visible.to+e.options.viewportMargin);i.viewFrom<o&&o-i.viewFrom<20&&(o=Math.max(n.first,i.viewFrom)),i.viewTo>s&&i.viewTo-s<20&&(s=Math.min(r,i.viewTo)),C&&(o=Wn(e.doc,o),s=Rn(e.doc,s));var l=o!=i.viewFrom||s!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;!function(e,t,i){var n=e.display;0==n.view.length||t>=n.viewTo||i<=n.viewFrom?(n.view=Jt(e,t,i),n.viewFrom=t):(n.viewFrom>t?n.view=Jt(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(ni(e,t))),n.viewFrom=t,n.viewTo<i?n.view=n.view.concat(Jt(e,n.viewTo,i)):n.viewTo>i&&(n.view=n.view.slice(0,ni(e,i))));n.viewTo=i}(e,o,s),i.viewOffset=Tr(xr(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var c=oi(e);if(!l&&0==c&&!t.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var u=zo();return c>4&&(i.lineDiv.style.display="none"),function(e,t,i){var n=e.display,r=e.options.lineNumbers,o=n.lineDiv,s=o.firstChild;function l(t){var i=t.nextSibling;return a&&g&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),i}for(var c=n.view,u=n.viewFrom,d=0;d<c.length;d++){var p=c[d];if(p.hidden);else if(p.node&&p.node.parentNode==o){for(;s!=p.node;)s=l(s);var h=r&&null!=t&&t<=u&&p.lineNumber;p.changes&&(vo(p.changes,"gutter")>-1&&(h=!1),ie(e,p,u,i)),h&&(Do(p.lineNumber),p.lineNumber.appendChild(document.createTextNode(K(e.options,u)))),s=p.node.nextSibling}else{var f=ce(e,p,u,i);o.insertBefore(f,s)}u+=p.size}for(;s;)s=l(s)}(e,i.updateLineNumbers,t.dims),c>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,u&&zo()!=u&&u.offsetHeight&&u.focus(),Do(i.cursorDiv),Do(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,l&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,ot(e,400)),i.updateLineNumbers=null,!0}function X(e,t){for(var i=t.viewport,n=!0;(n&&e.options.lineWrapping&&t.oldDisplayWidth!=pt(e)||(i&&null!=i.top&&(i={top:Math.min(e.doc.height+ct(e.display)-ht(e),i.top)}),t.visible=B(e.display,e.doc,i),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&Y(e,t);n=!1){J(e);var r=E(e);et(e),R(e,r),Q(e,r)}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Z(e,t){var i=new G(e,t);if(Y(e,i)){J(e),X(e,i);var n=E(e);et(e),R(e,n),Q(e,n),i.finish()}}function Q(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+dt(e)+"px"}function J(e){for(var t=e.display,i=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var r,a=t.view[n];if(!a.hidden){if(o&&s<8){var l=a.node.offsetTop+a.node.offsetHeight;r=l-i,i=l}else{var c=a.node.getBoundingClientRect();r=c.bottom-c.top}var u=a.line.height-r;if(r<2&&(r=Pt(t)),(u>.001||u<-.001)&&(_r(a.line,r),ee(a.line),a.rest))for(var d=0;d<a.rest.length;d++)ee(a.rest[d])}}}function ee(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.parentNode.offsetHeight}function te(e){for(var t=e.display,i={},n={},r=t.gutters.clientLeft,o=t.gutters.firstChild,s=0;o;o=o.nextSibling,++s)i[e.options.gutters[s]]=o.offsetLeft+o.clientLeft+r,n[e.options.gutters[s]]=o.clientWidth;return{fixedPos:U(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function ie(e,t,i,n){for(var r=0;r<t.changes.length;r++){var o=t.changes[r];"text"==o?oe(e,t):"gutter"==o?ae(e,t,i,n):"class"==o?se(t):"widget"==o&&le(e,t,n)}t.changes=null}function ne(e){return e.node==e.text&&(e.node=$o("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),o&&s<8&&(e.node.style.zIndex=2)),e.node}function re(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):sr(e,t)}function oe(e,t){var i=t.text.className,n=re(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,se(t)):i&&(t.text.className=i)}function se(e){!function(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var i=ne(e);e.background=i.insertBefore($o("div",null,t),i.firstChild)}}(e),e.line.wrapClass?ne(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function ae(e,t,i,n){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var r=ne(t);t.gutterBackground=$o("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),r.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){r=ne(t);var s=t.gutter=$o("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(e.display.input.setUneditable(s),r.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=s.appendChild($o("div",K(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var a=0;a<e.options.gutters.length;++a){var l=e.options.gutters[a],c=o.hasOwnProperty(l)&&o[l];c&&s.appendChild($o("div",[c],"CodeMirror-gutter-elt","left: "+n.gutterLeft[l]+"px; width: "+n.gutterWidth[l]+"px"))}}}function le(e,t,i){t.alignable&&(t.alignable=null);for(var n=t.node.firstChild;n;n=r){var r=n.nextSibling;"CodeMirror-linewidget"==n.className&&t.node.removeChild(n)}ue(e,t,i)}function ce(e,t,i,n){var r=re(e,t);return t.text=t.node=r.pre,r.bgClass&&(t.bgClass=r.bgClass),r.textClass&&(t.textClass=r.textClass),se(t),ae(e,t,i,n),ue(e,t,n),t.node}function ue(e,t,i){if(de(e,t.line,t,i,!0),t.rest)for(var n=0;n<t.rest.length;n++)de(e,t.rest[n],t,i,!1)}function de(e,t,i,n,r){if(t.widgets)for(var o=ne(i),s=0,a=t.widgets;s<a.length;++s){var l=a[s],c=$o("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),pe(l,c,i,n),e.display.input.setUneditable(c),r&&l.above?o.insertBefore(c,i.gutter||i.text):o.appendChild(c),Qr(l,"redraw")}}function pe(e,t,i,n){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var r=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(r-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=r+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}F.prototype=xo({update:function(e){var t=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=t?n+"px":"0";var r=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+r)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=i?n+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(i?n:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+o+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==n&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:i?n:0,bottom:t?n:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){var e=g&&!p?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new co,this.disableVert=new co},enableZeroWidthBar:function(e,t){e.style.pointerEvents="auto",t.set(1e3,function i(){var n=e.getBoundingClientRect();document.elementFromPoint(n.left+1,n.bottom-1)!=e?e.style.pointerEvents="none":t.set(1e3,i)})},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},F.prototype),H.prototype=xo({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},H.prototype),_.scrollbarModel={native:F,null:H},G.prototype.signal=function(e,t){io(e,t)&&this.events.push(arguments)},G.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Xr.apply(null,this.events[e])};var he=_.Pos=function(e,t){if(!(this instanceof he))return new he(e,t);this.line=e,this.ch=t},fe=_.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};function me(e){return he(e.line,e.ch)}function ge(e,t){return fe(e,t)<0?t:e}function ve(e,t){return fe(e,t)<0?e:t}function ye(e){e.state.focused||(e.display.input.focus(),Li(e))}var be=null;function we(e,t,i,n,r){var o=e.doc;e.display.shift=!1,n||(n=o.sel);var s=e.state.pasteIncoming||"paste"==r,a=o.splitLines(t),l=null;if(s&&n.ranges.length>1)if(be&&be.text.join("\n")==t){if(n.ranges.length%be.text.length==0){l=[];for(var c=0;c<be.text.length;c++)l.push(o.splitLines(be.text[c]))}}else a.length==n.ranges.length&&(l=yo(a,function(e){return[e]}));for(c=n.ranges.length-1;c>=0;c--){var u=n.ranges[c],d=u.from(),p=u.to();u.empty()&&(i&&i>0?d=he(d.line,d.ch-i):e.state.overwrite&&!s?p=he(p.line,Math.min(xr(o,p.line).text.length,p.ch+mo(a).length)):be&&be.lineWise&&be.text.join("\n")==t&&(d=p=he(d.line,0)));var h=e.curOp.updateInput,f={from:d,to:p,text:l?l[c%l.length]:a,origin:r||(s?"paste":e.state.cutIncoming?"cut":"+input")};Ei(e.doc,f),Qr(e,"inputRead",e,f)}t&&!s&&ke(e,t),Vi(e),e.curOp.updateInput=h,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function xe(e,t){var i=e.clipboardData&&e.clipboardData.getData("Text");if(i)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Gt(t,function(){we(t,i,0,null,"paste")}),!0}function ke(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var i=e.doc.sel,n=i.ranges.length-1;n>=0;n--){var r=i.ranges[n];if(!(r.head.ch>100||n&&i.ranges[n-1].head.line==r.head.line)){var o=e.getModeAt(r.head),s=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(t.indexOf(o.electricChars.charAt(a))>-1){s=Ui(e,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(xr(e.doc,r.head.line).text.slice(0,r.head.ch))&&(s=Ui(e,r.head.line,"smart"));s&&Qr(e,"electricInput",e,r.head.line)}}}function Ce(e){for(var t=[],i=[],n=0;n<e.doc.sel.ranges.length;n++){var r=e.doc.sel.ranges[n].head.line,o={anchor:he(r,0),head:he(r+1,0)};i.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:i}}function _e(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function Se(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new co,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function Me(){var e=$o("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=$o("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return a?e.style.width="1000px":e.setAttribute("wrap","off"),f&&(e.style.border="1px solid black"),_e(e),t}function Te(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new co,this.gracePeriod=!1}function Oe(e,t){var i=gt(e,t.line);if(!i||i.hidden)return null;var n=xr(e.doc,t.line),r=ft(i,n,t.line),o=Or(n),s="left";o&&(s=ss(o,t.ch)%2?"right":"left");var a=xt(r.map,t.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function Le(e,t){return t&&(e.bad=!0),e}function $e(e,t,i){var n;if(t==e.display.lineDiv){if(!(n=e.display.lineDiv.childNodes[i]))return Le(e.clipPos(he(e.display.viewTo-1)),!0);t=null,i=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var r=0;r<e.display.view.length;r++){var o=e.display.view[r];if(o.node==n)return De(o,t,i)}}function De(e,t,i){var n=e.text.firstChild,r=!1;if(!t||!Ao(n,t))return Le(he(Sr(e.line),0),!0);if(t==n&&(r=!0,t=n.childNodes[i],i=0,!t)){var o=e.rest?mo(e.rest):e.line;return Le(he(Sr(o),o.text.length),r)}var s=3==t.nodeType?t:null,a=t;for(s||1!=t.childNodes.length||3!=t.firstChild.nodeType||(s=t.firstChild,i&&(i=s.nodeValue.length));a.parentNode!=n;)a=a.parentNode;var l=e.measure,c=l.maps;function u(t,i,n){for(var r=-1;r<(c?c.length:0);r++)for(var o=r<0?l.map:c[r],s=0;s<o.length;s+=3){var a=o[s+2];if(a==t||a==i){var u=Sr(r<0?e.line:e.rest[r]),d=o[s]+n;return(n<0||a!=t)&&(d=o[s+(n?1:0)]),he(u,d)}}}var d=u(s,a,i);if(d)return Le(d,r);for(var p=a.nextSibling,h=s?s.nodeValue.length-i:0;p;p=p.nextSibling){if(d=u(p,p.firstChild,0))return Le(he(d.line,d.ch-h),r);h+=p.textContent.length}var f=a.previousSibling;for(h=i;f;f=f.previousSibling){if(d=u(f,f.firstChild,-1))return Le(he(d.line,d.ch+h),r);h+=f.textContent.length}}function Ie(e,t){this.ranges=e,this.primIndex=t}function Ae(e,t){this.anchor=e,this.head=t}function ze(e,t){var i=e[t];e.sort(function(e,t){return fe(e.from(),t.from())}),t=vo(e,i);for(var n=1;n<e.length;n++){var r=e[n],o=e[n-1];if(fe(o.to(),r.from())>=0){var s=ve(o.from(),r.from()),a=ge(o.to(),r.to()),l=o.empty()?r.from()==r.head:o.from()==o.head;n<=t&&--t,e.splice(--n,2,new Ae(l?a:s,l?s:a))}}return new Ie(e,t)}function Ne(e,t){return new Ie([new Ae(e,t||e)],0)}function Pe(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Ee(e,t){if(t.line<e.first)return he(e.first,0);var i=e.first+e.size-1;return t.line>i?he(i,xr(e,i).text.length):function(e,t){var i=e.ch;return null==i||i>t?he(e.line,t):i<0?he(e.line,0):e}(t,xr(e,t.line).text.length)}function Fe(e,t){return t>=e.first&&t<e.first+e.size}function He(e,t){for(var i=[],n=0;n<t.length;n++)i[n]=Ee(e,t[n]);return i}function We(e,t,i,n){if(e.cm&&e.cm.display.shift||e.extend){var r=t.anchor;if(n){var o=fe(i,r)<0;o!=fe(n,r)<0?(r=i,i=n):o!=fe(i,n)<0&&(i=n)}return new Ae(r,i)}return new Ae(n||i,i)}function Re(e,t,i,n){Ke(e,new Ie([We(e,e.sel.primary(),t,i)],0),n)}function je(e,t,i){for(var n=[],r=0;r<e.sel.ranges.length;r++)n[r]=We(e,e.sel.ranges[r],t[r],null);Ke(e,ze(n,e.sel.primIndex),i)}function Be(e,t,i,n){var r=e.sel.ranges.slice(0);r[t]=i,Ke(e,ze(r,e.sel.primIndex),n)}function qe(e,t,i,n){Ke(e,Ne(t,i),n)}function Ve(e,t,i){var n=e.history.done,r=mo(n);r&&r.ranges?(n[n.length-1]=t,Ue(e,t,i)):Ke(e,t,i)}function Ke(e,t,i){Ue(e,t,i),function(e,t,i,n){var r=e.history,o=n&&n.origin;i==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||function(e,t,i,n){var r=t.charAt(0);return"*"==r||"+"==r&&i.ranges.length==n.ranges.length&&i.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,mo(r.done),t))?r.done[r.done.length-1]=t:Ar(t,r.done);r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=i,n&&!1!==n.clearRedo&&Dr(r.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)}function Ue(e,t,i){(io(e,"beforeSelectionChange")||e.cm&&io(e.cm,"beforeSelectionChange"))&&(t=function(e,t,i){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var i=0;i<t.length;i++)this.ranges[i]=new Ae(Ee(e,t[i].anchor),Ee(e,t[i].head))},origin:i&&i.origin};return Xr(e,"beforeSelectionChange",e,n),e.cm&&Xr(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?ze(n.ranges,n.ranges.length-1):t}(e,t,i));var n=i&&i.bias||(fe(t.primary().head,e.sel.primary().head)<0?-1:1);Ge(e,Xe(e,t,n,!0)),i&&!1===i.scroll||!e.cm||Vi(e.cm)}function Ge(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,to(e.cm)),Qr(e,"cursorActivity",e))}function Ye(e){Ge(e,Xe(e,e.sel,null,!1))}function Xe(e,t,i,n){for(var r,o=0;o<t.ranges.length;o++){var s=t.ranges[o],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=Qe(e,s.anchor,a&&a.anchor,i,n),c=Qe(e,s.head,a&&a.head,i,n);(r||l!=s.anchor||c!=s.head)&&(r||(r=t.ranges.slice(0,o)),r[o]=new Ae(l,c))}return r?ze(r,t.primIndex):t}function Ze(e,t,i,n,r){var o=xr(e,t.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var a=o.markedSpans[s],l=a.marker;if((null==a.from||(l.inclusiveLeft?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(l.inclusiveRight?a.to>=t.ch:a.to>t.ch))){if(r&&(Xr(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(!l.atomic)continue;if(i){var c,u=l.find(n<0?1:-1);if((n<0?l.inclusiveRight:l.inclusiveLeft)&&(u=Je(e,u,-n,u&&u.line==t.line?o:null)),u&&u.line==t.line&&(c=fe(u,i))&&(n<0?c<0:c>0))return Ze(e,u,t,n,r)}var d=l.find(n<0?-1:1);return(n<0?l.inclusiveLeft:l.inclusiveRight)&&(d=Je(e,d,n,d.line==t.line?o:null)),d?Ze(e,d,t,n,r):null}}return t}function Qe(e,t,i,n,r){var o=n||1,s=Ze(e,t,i,o,r)||!r&&Ze(e,t,i,o,!0)||Ze(e,t,i,-o,r)||!r&&Ze(e,t,i,-o,!0);return s||(e.cantEdit=!0,he(e.first,0))}function Je(e,t,i,n){return i<0&&0==t.ch?t.line>e.first?Ee(e,he(t.line-1)):null:i>0&&t.ch==(n||xr(e,t.line)).text.length?t.line<e.first+e.size-1?he(t.line+1,0):null:new he(t.line,t.ch+i)}function et(e){e.display.input.showSelection(e.display.input.prepareSelection())}function tt(e,t){for(var i=e.doc,n={},r=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),s=0;s<i.sel.ranges.length;s++)if(!1!==t||s!=i.sel.primIndex){var a=i.sel.ranges[s];if(!(a.from().line>=e.display.viewTo||a.to().line<e.display.viewFrom)){var l=a.empty();(l||e.options.showCursorWhenSelecting)&&it(e,a.head,r),l||nt(e,a,o)}}return n}function it(e,t,i){var n=Dt(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),r=i.appendChild($o("div"," ","CodeMirror-cursor"));if(r.style.left=n.left+"px",r.style.top=n.top+"px",r.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",n.other){var o=i.appendChild($o("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=n.other.left+"px",o.style.top=n.other.top+"px",o.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function nt(e,t,i){var n=e.display,r=e.doc,o=document.createDocumentFragment(),s=ut(e.display),a=s.left,l=Math.max(n.sizerWidth,pt(e)-n.sizer.offsetLeft)-s.right;function c(e,t,i,n){t<0&&(t=0),t=Math.round(t),n=Math.round(n),o.appendChild($o("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==i?l-e:i)+"px; height: "+(n-t)+"px"))}function u(t,i,n){var o,s,u=xr(r,t),d=u.text.length;function p(i,n){return $t(e,he(t,i),"div",u,n)}return function(e,t,i,n){if(!e)return n(t,i,"ltr");for(var r=!1,o=0;o<e.length;++o){var s=e[o];(s.from<i&&s.to>t||t==i&&s.to==t)&&(n(Math.max(s.from,t),Math.min(s.to,i),1==s.level?"rtl":"ltr"),r=!0)}r||n(t,i,"ltr")}(Or(u),i||0,null==n?d:n,function(e,t,r){var u,h,f,m=p(e,"left");if(e==t)u=m,h=f=m.left;else{if(u=p(t-1,"right"),"rtl"==r){var g=m;m=u,u=g}h=m.left,f=u.right}null==i&&0==e&&(h=a),u.top-m.top>3&&(c(h,m.top,null,m.bottom),h=a,m.bottom<u.top&&c(h,m.bottom,null,u.top)),null==n&&t==d&&(f=l),(!o||m.top<o.top||m.top==o.top&&m.left<o.left)&&(o=m),(!s||u.bottom>s.bottom||u.bottom==s.bottom&&u.right>s.right)&&(s=u),h<a+1&&(h=a),c(h,u.top,f-h,u.bottom)}),{start:o,end:s}}var d=t.from(),p=t.to();if(d.line==p.line)u(d.line,d.ch,p.ch);else{var h=xr(r,d.line),f=xr(r,p.line),m=Hn(h)==Hn(f),g=u(d.line,d.ch,m?h.text.length+1:null).end,v=u(p.line,m?0:null,p.ch).start;m&&(g.top<v.top-2?(c(g.right,g.top,null,g.bottom),c(a,v.top,v.left,v.bottom)):c(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&c(a,g.bottom,null,v.top)}i.appendChild(o)}function rt(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function ot(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,ko(st,e))}function st(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var i=+new Date+e.options.workTime,n=ln(t.mode,at(e,t.frontier)),r=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(t.frontier>=e.display.viewFrom){var s=o.styles,a=o.text.length>e.options.maxHighlightLength,l=er(e,o,a?ln(t.mode,n):n,!0);o.styles=l.styles;var c=o.styleClasses,u=l.classes;u?o.styleClasses=u:c&&(o.styleClasses=null);for(var d=!s||s.length!=o.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),p=0;!d&&p<s.length;++p)d=s[p]!=o.styles[p];d&&r.push(t.frontier),o.stateAfter=a?n:ln(t.mode,n)}else o.text.length<=e.options.maxHighlightLength&&ir(e,o.text,n),o.stateAfter=t.frontier%5==0?ln(t.mode,n):null;if(++t.frontier,+new Date>i)return ot(e,e.options.workDelay),!0}),r.length&&Gt(e,function(){for(var t=0;t<r.length;t++)ti(e,r[t],"text")})}}function at(e,t,i){var n=e.doc,r=e.display;if(!n.mode.startState)return!0;var o=function(e,t,i){for(var n,r,o=e.doc,s=i?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>s;--a){if(a<=o.first)return o.first;var l=xr(o,a-1);if(l.stateAfter&&(!i||a<=o.frontier))return a;var c=uo(l.text,null,e.options.tabSize);(null==r||n>c)&&(r=a-1,n=c)}return r}(e,t,i),s=o>n.first&&xr(n,o-1).stateAfter;return s=s?ln(n.mode,s):cn(n.mode),n.iter(o,t,function(i){ir(e,i.text,s);var a=o==t-1||o%5==0||o>=r.viewFrom&&o<r.viewTo;i.stateAfter=a?ln(n.mode,s):null,++o}),i&&(n.frontier=o),s}function lt(e){return e.lineSpace.offsetTop}function ct(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function ut(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=Io(e.measure,$o("pre","x")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n),n}function dt(e){return ro-e.display.nativeBarWidth}function pt(e){return e.display.scroller.clientWidth-dt(e)-e.display.barWidth}function ht(e){return e.display.scroller.clientHeight-dt(e)-e.display.barHeight}function ft(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(n=0;n<e.rest.length;n++)if(Sr(e.rest[n])>i)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}function mt(e,t,i,n){return yt(e,vt(e,t),i,n)}function gt(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[ni(e,t)];var i=e.display.externalMeasured;return i&&t>=i.lineN&&t<i.lineN+i.size?i:void 0}function vt(e,t){var i=Sr(t),n=gt(e,i);n&&!n.text?n=null:n&&n.changes&&(ie(e,n,i,te(e)),e.curOp.forceUpdate=!0),n||(n=function(e,t){var i=Sr(t=Hn(t)),n=e.display.externalMeasured=new Qt(e.doc,t,i);n.lineN=i;var r=n.built=sr(e,n);return n.text=r.pre,Io(e.display.lineMeasure,r.pre),n}(e,t));var r=ft(n,t,i);return{line:t,view:n,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function yt(e,t,i,n,r){t.before&&(i=-1);var a,l=i+(n||"");return t.cache.hasOwnProperty(l)?a=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(!function(e,t,i){var n=e.options.lineWrapping,r=n&&pt(e);if(!t.measure.heights||n&&t.measure.width!=r){var o=t.measure.heights=[];if(n){t.measure.width=r;for(var s=t.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],c=s[a+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-i.top)}}o.push(i.bottom-i.top)}}(e,t.view,t.rect),t.hasHeights=!0),(a=function(e,t,i,n){var r,a=xt(t.map,i,n),l=a.node,c=a.start,u=a.end,d=a.collapse;if(3==l.nodeType){for(var p=0;p<4;p++){for(;c&&Lo(t.line.text.charAt(a.coverStart+c));)--c;for(;a.coverStart+u<a.coverEnd&&Lo(t.line.text.charAt(a.coverStart+u));)++u;if((r=o&&s<9&&0==c&&u==a.coverEnd-a.coverStart?l.parentNode.getBoundingClientRect():kt(To(l,c,u).getClientRects(),n)).left||r.right||0==c)break;u=c,c-=1,d="right"}o&&s<11&&(r=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Xo)return Xo;var t=Io(e,$o("span","x")),i=t.getBoundingClientRect(),n=To(t,0,1).getBoundingClientRect();return Xo=Math.abs(i.left-n.left)>1}(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*n,bottom:t.bottom*n}}(e.display.measure,r))}else{var h;c>0&&(d=n="right"),r=e.options.lineWrapping&&(h=l.getClientRects()).length>1?h["right"==n?h.length-1:0]:l.getBoundingClientRect()}if(o&&s<9&&!c&&(!r||!r.left&&!r.right)){var f=l.parentNode.getClientRects()[0];r=f?{left:f.left,right:f.left+Et(e.display),top:f.top,bottom:f.bottom}:wt}for(var m=r.top-t.rect.top,g=r.bottom-t.rect.top,v=(m+g)/2,y=t.view.measure.heights,p=0;p<y.length-1&&!(v<y[p]);p++);var b=p?y[p-1]:0,w=y[p],x={left:("right"==d?r.right:r.left)-t.rect.left,right:("left"==d?r.left:r.right)-t.rect.left,top:b,bottom:w};r.left||r.right||(x.bogus=!0);e.options.singleCursorHeightPerLine||(x.rtop=m,x.rbottom=g);return x}(e,t,i,n)).bogus||(t.cache[l]=a)),{left:a.left,right:a.right,top:r?a.rtop:a.top,bottom:r?a.rbottom:a.bottom}}Se.prototype=xo({init:function(e){var t=this,i=this.cm,n=this.wrapper=Me(),r=this.textarea=n.firstChild;function a(e){if(!eo(i,e)){if(i.somethingSelected())be={lineWise:!1,text:i.getSelections()},t.inaccurateSelection&&(t.prevInput="",t.inaccurateSelection=!1,r.value=be.text.join("\n"),go(r));else{if(!i.options.lineWiseCopyCut)return;var n=Ce(i);be={lineWise:!0,text:n.text},"cut"==e.type?i.setSelections(n.ranges,null,so):(t.prevInput="",r.value=n.text.join("\n"),go(r))}"cut"==e.type&&(i.state.cutIncoming=!0)}}e.wrapper.insertBefore(n,e.wrapper.firstChild),f&&(r.style.width="0px"),Kr(r,"input",function(){o&&s>=9&&t.hasSelection&&(t.hasSelection=null),t.poll()}),Kr(r,"paste",function(e){eo(i,e)||xe(e,i)||(i.state.pasteIncoming=!0,t.fastPoll())}),Kr(r,"cut",a),Kr(r,"copy",a),Kr(e.scroller,"paste",function(n){ai(e,n)||eo(i,n)||(i.state.pasteIncoming=!0,t.focus())}),Kr(e.lineSpace,"selectstart",function(t){ai(e,t)||Wr(t)}),Kr(r,"compositionstart",function(){var e=i.getCursor("from");t.composing&&t.composing.range.clear(),t.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}}),Kr(r,"compositionend",function(){t.composing&&(t.poll(),t.composing.range.clear(),t.composing=null)})},prepareSelection:function(){var e=this.cm,t=e.display,i=e.doc,n=tt(e);if(e.options.moveInputWithCursor){var r=Dt(e,i.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+s.top-o.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+s.left-o.left))}return n},showSelection:function(e){var t=this.cm.display;Io(t.cursorDiv,e.cursors),Io(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){if(!this.contextMenuPending){var t,i,n=this.cm,r=n.doc;if(n.somethingSelected()){this.prevInput="";var a=r.sel.primary(),l=(t=Yo&&(a.to().line-a.from().line>100||(i=n.getSelection()).length>1e3))?"-":i||n.getSelection();this.textarea.value=l,n.state.focused&&go(this.textarea),o&&s>=9&&(this.hasSelection=l)}else e||(this.prevInput=this.textarea.value="",o&&s>=9&&(this.hasSelection=null));this.inaccurateSelection=t}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!m||zo()!=this.textarea))try{this.textarea.focus()}catch(e){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},fastPoll:function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function i(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,i))})},poll:function(){var e=this.cm,t=this.textarea,i=this.prevInput;if(this.contextMenuPending||!e.state.focused||Go(t)&&!i&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var n=t.value;if(n==i&&!e.somethingSelected())return!1;if(o&&s>=9&&this.hasSelection===n||g&&/[\uf700-\uf7ff]/.test(n))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var r=n.charCodeAt(0);if(8203!=r||i||(i="​"),8666==r)return this.reset(),this.cm.execCommand("undo")}for(var a=0,l=Math.min(i.length,n.length);a<l&&i.charCodeAt(a)==n.charCodeAt(a);)++a;var c=this;return Gt(e,function(){we(e,n.slice(a),i.length-a,null,c.composing?"*compose":null),n.length>1e3||n.indexOf("\n")>-1?t.value=c.prevInput="":c.prevInput=n,c.composing&&(c.composing.range.clear(),c.composing.range=e.markText(c.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){o&&s>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){var t=this,i=t.cm,n=i.display,r=t.textarea,l=li(i,e),c=n.scroller.scrollTop;if(l&&!u){i.options.resetSelectionOnContextMenu&&-1==i.doc.sel.contains(l)&&Yt(i,Ke)(i.doc,Ne(l),so);var d=r.style.cssText,p=t.wrapper.style.cssText;t.wrapper.style.cssText="position: absolute";var h=t.wrapper.getBoundingClientRect();if(r.style.cssText="position: absolute; width: 30px; height: 30px; top: "+(e.clientY-h.top-5)+"px; left: "+(e.clientX-h.left-5)+"px; z-index: 1000; background: "+(o?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",a)var f=window.scrollY;if(n.input.focus(),a&&window.scrollTo(null,f),n.input.reset(),i.somethingSelected()||(r.value=t.prevInput=" "),t.contextMenuPending=!0,n.selForContextMenu=i.doc.sel,clearTimeout(n.detectingSelectAll),o&&s>=9&&g(),x){Br(e);var m=function(){Yr(window,"mouseup",m),setTimeout(v,20)};Kr(window,"mouseup",m)}else setTimeout(v,50)}function g(){if(null!=r.selectionStart){var e=i.somethingSelected(),o="​"+(e?r.value:"");r.value="⇚",r.value=o,t.prevInput=e?"":"​",r.selectionStart=1,r.selectionEnd=o.length,n.selForContextMenu=i.doc.sel}}function v(){if(t.contextMenuPending=!1,t.wrapper.style.cssText=p,r.style.cssText=d,o&&s<9&&n.scrollbars.setScrollTop(n.scroller.scrollTop=c),null!=r.selectionStart){(!o||o&&s<9)&&g();var e=0,a=function(){n.selForContextMenu==i.doc.sel&&0==r.selectionStart&&r.selectionEnd>0&&"​"==t.prevInput?Yt(i,un.selectAll)(i):e++<10?n.detectingSelectAll=setTimeout(a,500):n.input.reset()};n.detectingSelectAll=setTimeout(a,200)}}},readOnlyChanged:function(e){e||this.reset()},setUneditable:bo,needsContentAttribute:!1},Se.prototype),Te.prototype=xo({init:function(e){var t=this,i=t.cm,n=t.div=e.lineDiv;function r(e){if(!eo(i,e)){if(i.somethingSelected())be={lineWise:!1,text:i.getSelections()},"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var r=Ce(i);be={lineWise:!0,text:r.text},"cut"==e.type&&i.operation(function(){i.setSelections(r.ranges,0,so),i.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var o=be.text.join("\n");if(e.clipboardData.setData("Text",o),e.clipboardData.getData("Text")==o)return void e.preventDefault()}var s=Me(),a=s.firstChild;i.display.lineSpace.insertBefore(s,i.display.lineSpace.firstChild),a.value=be.text.join("\n");var l=document.activeElement;go(a),setTimeout(function(){i.display.lineSpace.removeChild(s),l.focus(),l==n&&t.showPrimarySelection()},50)}}_e(n,i.options.spellcheck),Kr(n,"paste",function(e){eo(i,e)||xe(e,i)||s<=11&&setTimeout(Yt(i,function(){t.pollContent()||ei(i)}),20)}),Kr(n,"compositionstart",function(e){var n=e.data;if(t.composing={sel:i.doc.sel,data:n,startData:n},n){var r=i.doc.sel.primary(),o=i.getLine(r.head.line).indexOf(n,Math.max(0,r.head.ch-n.length));o>-1&&o<=r.head.ch&&(t.composing.sel=Ne(he(r.head.line,o),he(r.head.line,o+n.length)))}}),Kr(n,"compositionupdate",function(e){t.composing.data=e.data}),Kr(n,"compositionend",function(e){var i=t.composing;i&&(e.data==i.startData||/\u200b/.test(e.data)||(i.data=e.data),setTimeout(function(){i.handled||t.applyComposition(i),t.composing==i&&(t.composing=null)},50))}),Kr(n,"touchstart",function(){t.forceCompositionEnd()}),Kr(n,"input",function(){t.composing||!i.isReadOnly()&&t.pollContent()||Gt(t.cm,function(){ei(i)})}),Kr(n,"copy",r),Kr(n,"cut",r)},prepareSelection:function(){var e=tt(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),n=$e(this.cm,e.anchorNode,e.anchorOffset),r=$e(this.cm,e.focusNode,e.focusOffset);if(!n||n.bad||!r||r.bad||0!=fe(ve(n,r),t.from())||0!=fe(ge(n,r),t.to())){var o=Oe(this.cm,t.from()),s=Oe(this.cm,t.to());if(o||s){var a=this.cm.display.view,l=e.rangeCount&&e.getRangeAt(0);if(o){if(!s){var c=a[a.length-1].measure,u=c.maps?c.maps[c.maps.length-1]:c.map;s={node:u[u.length-1],offset:u[u.length-2]-u[u.length-3]}}}else o={node:a[0].measure.map[2],offset:0};try{var d=To(o.node,o.offset,s.offset,s.node)}catch(e){}d&&(!i&&this.cm.state.focused?(e.collapse(o.node,o.offset),d.collapsed||e.addRange(d)):(e.removeAllRanges(),e.addRange(d)),l&&null==e.anchorNode?e.addRange(l):i&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){e.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(e){Io(this.cm.display.cursorDiv,e.cursors),Io(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Ao(this.div,t)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){var e=this;this.selectionInEditor()?this.pollSelection():Gt(this.cm,function(){e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))})},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var i=$e(t,e.anchorNode,e.anchorOffset),n=$e(t,e.focusNode,e.focusOffset);i&&n&&Gt(t,function(){Ke(t.doc,Ne(i,n),so),(i.bad||n.bad)&&(t.curOp.selectionChanged=!0)})}},pollContent:function(){var e,t=this.cm,i=t.display,n=t.doc.sel.primary(),r=n.from(),o=n.to();if(r.line<i.viewFrom||o.line>i.viewTo-1)return!1;if(r.line==i.viewFrom||0==(e=ni(t,r.line)))var s=Sr(i.view[0].line),a=i.view[0].node;else s=Sr(i.view[e].line),a=i.view[e-1].node.nextSibling;var l=ni(t,o.line);if(l==i.view.length-1)var c=i.viewTo-1,u=i.lineDiv.lastChild;else c=Sr(i.view[l+1].line)-1,u=i.view[l+1].node.previousSibling;for(var d=t.doc.splitLines(function(e,t,i,n,r){var o="",s=!1,a=e.doc.lineSeparator();function l(t){if(1==t.nodeType){var i=t.getAttribute("cm-text");if(null!=i)return""==i&&(i=t.textContent.replace(/\u200b/g,"")),void(o+=i);var c,u=t.getAttribute("cm-marker");if(u){var d=e.findMarks(he(n,0),he(r+1,0),(f=+u,function(e){return e.id==f}));return void(d.length&&(c=d[0].find())&&(o+=kr(e.doc,c.from,c.to).join(a)))}if("false"==t.getAttribute("contenteditable"))return;for(var p=0;p<t.childNodes.length;p++)l(t.childNodes[p]);/^(pre|div|p)$/i.test(t.nodeName)&&(s=!0)}else if(3==t.nodeType){var h=t.nodeValue;if(!h)return;s&&(o+=a,s=!1),o+=h}var f}for(;l(t),t!=i;)t=t.nextSibling;return o}(t,a,u,s,c)),p=kr(t.doc,he(s,0),he(c,xr(t.doc,c).text.length));d.length>1&&p.length>1;)if(mo(d)==mo(p))d.pop(),p.pop(),c--;else{if(d[0]!=p[0])break;d.shift(),p.shift(),s++}for(var h=0,f=0,m=d[0],g=p[0],v=Math.min(m.length,g.length);h<v&&m.charCodeAt(h)==g.charCodeAt(h);)++h;for(var y=mo(d),b=mo(p),w=Math.min(y.length-(1==d.length?h:0),b.length-(1==p.length?h:0));f<w&&y.charCodeAt(y.length-f-1)==b.charCodeAt(b.length-f-1);)++f;d[d.length-1]=y.slice(0,y.length-f),d[0]=d[0].slice(h);var x=he(s,h),k=he(c,p.length?mo(p).length-f:0);return d.length>1||d[0]||fe(x,k)?(ji(t.doc,d,x,k,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){this.cm.isReadOnly()?Yt(this.cm,ei)(this.cm):e.data&&e.data!=e.startData&&Yt(this.cm,we)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.contentEditable="false"},onKeyPress:function(e){e.preventDefault(),this.cm.isReadOnly()||Yt(this.cm,we)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},readOnlyChanged:function(e){this.div.contentEditable=String("nocursor"!=e)},onContextMenu:bo,resetPosition:bo,needsContentAttribute:!0},Te.prototype),_.inputStyles={textarea:Se,contenteditable:Te},Ie.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],n=e.ranges[t];if(0!=fe(i.anchor,n.anchor)||0!=fe(i.head,n.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Ae(me(this.ranges[t].anchor),me(this.ranges[t].head));return new Ie(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var n=this.ranges[i];if(fe(t,n.from())>=0&&fe(e,n.to())<=0)return i}return-1}},Ae.prototype={from:function(){return ve(this.anchor,this.head)},to:function(){return ge(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var bt,wt={left:0,right:0,top:0,bottom:0};function xt(e,t,i){for(var n,r,o,s,a=0;a<e.length;a+=3){var l=e[a],c=e[a+1];if(t<l?(r=0,o=1,s="left"):t<c?o=(r=t-l)+1:(a==e.length-3||t==c&&e[a+3]>t)&&(r=(o=c-l)-1,t>=c&&(s="right")),null!=r){if(n=e[a+2],l==c&&i==(n.insertLeft?"left":"right")&&(s=i),"left"==i&&0==r)for(;a&&e[a-2]==e[a-3]&&e[a-1].insertLeft;)n=e[2+(a-=3)],s="left";if("right"==i&&r==c-l)for(;a<e.length-3&&e[a+3]==e[a+4]&&!e[a+5].insertLeft;)n=e[(a+=3)+2],s="right";break}}return{node:n,start:r,end:o,collapse:s,coverStart:l,coverEnd:c}}function kt(e,t){var i=wt;if("left"==t)for(var n=0;n<e.length&&(i=e[n]).left==i.right;n++);else for(n=e.length-1;n>=0&&(i=e[n]).left==i.right;n--);return i}function Ct(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function _t(e){e.display.externalMeasure=null,Do(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Ct(e.display.view[t])}function St(e){_t(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Mt(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Tt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ot(e,t,i,n){if(t.widgets)for(var r=0;r<t.widgets.length;++r)if(t.widgets[r].above){var o=Kn(t.widgets[r]);i.top+=o,i.bottom+=o}if("line"==n)return i;n||(n="local");var s=Tr(t);if("local"==n?s+=lt(e.display):s-=e.display.viewOffset,"page"==n||"window"==n){var a=e.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==n?0:Tt());var l=a.left+("window"==n?0:Mt());i.left+=l,i.right+=l}return i.top+=s,i.bottom+=s,i}function Lt(e,t,i){if("div"==i)return t;var n=t.left,r=t.top;if("page"==i)n-=Mt(),r-=Tt();else if("local"==i||!i){var o=e.display.sizer.getBoundingClientRect();n+=o.left,r+=o.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:n-s.left,top:r-s.top}}function $t(e,t,i,n,r){return n||(n=xr(e.doc,t.line)),Ot(e,n,mt(e,n,t.ch,r),i)}function Dt(e,t,i,n,r,o){function s(t,s){var a=yt(e,r,t,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,Ot(e,n,a,i)}function a(e,t){var i=l[t],n=i.level%2;return e==Jo(i)&&t&&i.level<l[t-1].level?(e=es(i=l[--t])-(i.level%2?0:1),n=!0):e==es(i)&&t<l.length-1&&i.level<l[t+1].level&&(e=Jo(i=l[++t])-i.level%2,n=!1),n&&e==i.to&&e>i.from?s(e-1):s(e,n)}n=n||xr(e.doc,t.line),r||(r=vt(e,n));var l=Or(n),c=t.ch;if(!l)return s(c);var u=a(c,ss(l,c));return null!=Zo&&(u.other=a(c,Zo)),u}function It(e,t){var i=0;t=Ee(e.doc,t);e.options.lineWrapping||(i=Et(e.display)*t.ch);var n=xr(e.doc,t.line),r=Tr(n)+lt(e.display);return{left:i,right:i,top:r,bottom:r+n.height}}function At(e,t,i,n){var r=he(e,t);return r.xRel=n,i&&(r.outside=!0),r}function zt(e,t,i){var n=e.doc;if((i+=e.display.viewOffset)<0)return At(n.first,0,!0,-1);var r=Mr(n,i),o=n.first+n.size-1;if(r>o)return At(n.first+n.size-1,xr(n,o).text.length,!0,1);t<0&&(t=0);for(var s=xr(n,r);;){var a=Nt(e,s,r,t,i),l=En(s),c=l&&l.find(0,!0);if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;r=Sr(s=c.to.line)}}function Nt(e,t,i,n,r){var o=r-Tr(t),s=!1,a=2*e.display.wrapper.clientWidth,l=vt(e,t);function c(n){var r=Dt(e,he(i,n),"line",t,l);return s=!0,o>r.bottom?r.left-a:o<r.top?r.left+a:(s=!1,r.left)}var u=Or(t),d=t.text.length,p=ts(t),h=is(t),f=c(p),m=s,g=c(h),v=s;if(n>g)return At(i,h,v,1);for(;;){if(u?h==p||h==ls(t,p,1):h-p<=1){var y=n<f||n-f<=g-n?p:h,b=y==p?m:v,w=n-(y==p?f:g);if(v&&!u&&!/\s/.test(t.text.charAt(y))&&w>0&&y<t.text.length&&l.view.measure.heights.length>1){var x=yt(e,l,y,"right");o<=x.bottom&&o>=x.top&&Math.abs(n-x.right)<w&&(b=!1,y++,w=n-x.right)}for(;Lo(t.text.charAt(y));)++y;return At(i,y,b,w<-1?-1:w>1?1:0)}var k=Math.ceil(d/2),C=p+k;if(u){C=p;for(var _=0;_<k;++_)C=ls(t,C,1)}var S=c(C);S>n?(h=C,g=S,(v=s)&&(g+=1e3),d=k):(p=C,f=S,m=s,d-=k)}}function Pt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==bt){bt=$o("pre");for(var t=0;t<49;++t)bt.appendChild(document.createTextNode("x")),bt.appendChild($o("br"));bt.appendChild(document.createTextNode("x"))}Io(e.measure,bt);var i=bt.offsetHeight/50;return i>3&&(e.cachedTextHeight=i),Do(e.measure),i||1}function Et(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=$o("span","xxxxxxxxxx"),i=$o("pre",[t]);Io(e.measure,i);var n=t.getBoundingClientRect(),r=(n.right-n.left)/10;return r>2&&(e.cachedCharWidth=r),r||10}var Ft,Ht,Wt=null,Rt=0;function jt(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Rt},Wt?Wt.ops.push(e.curOp):e.curOp.ownsGroup=Wt={ops:[e.curOp],delayedCallbacks:[]}}function Bt(e){var t=e.curOp.ownsGroup;if(t)try{!function(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i].call(null);for(var n=0;n<e.ops.length;n++){var r=e.ops[n];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(i<t.length)}(t)}finally{Wt=null;for(var i=0;i<t.ops.length;i++)t.ops[i].cm.curOp=null;!function(e){for(var t=e.ops,i=0;i<t.length;i++)qt(t[i]);for(var i=0;i<t.length;i++)n=t[i],n.updatedDisplay=n.mustUpdate&&Y(n.cm,n.update);var n;for(var i=0;i<t.length;i++)Vt(t[i]);for(var i=0;i<t.length;i++)Kt(t[i]);for(var i=0;i<t.length;i++)Ut(t[i])}(t)}}function qt(e){var t=e.cm,i=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=dt(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=dt(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&N(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new G(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Vt(e){var t=e.cm,i=t.display;e.updatedDisplay&&J(t),e.barMeasure=E(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=mt(t,i.maxLine,i.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+e.adjustWidthTo+dt(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo-pt(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=i.input.prepareSelection(e.focus))}function Kt(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&gi(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var i=e.focus&&e.focus==zo()&&(!document.hasFocus||document.hasFocus());e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,i),(e.updatedDisplay||e.startHeight!=t.doc.height)&&R(t,e.barMeasure),e.updatedDisplay&&Q(t,e.barMeasure),e.selectionChanged&&rt(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),i&&ye(e.cm)}function Ut(e){var t=e.cm,i=t.display,n=t.doc;if(e.updatedDisplay&&X(t,e.update),null==i.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(i.wheelStartX=i.wheelStartY=null),null==e.scrollTop||i.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(n.scrollTop=Math.max(0,Math.min(i.scroller.scrollHeight-i.scroller.clientHeight,e.scrollTop)),i.scrollbars.setScrollTop(n.scrollTop),i.scroller.scrollTop=n.scrollTop),null==e.scrollLeft||i.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(n.scrollLeft=Math.max(0,Math.min(i.scroller.scrollWidth-i.scroller.clientWidth,e.scrollLeft)),i.scrollbars.setScrollLeft(n.scrollLeft),i.scroller.scrollLeft=n.scrollLeft,q(t)),e.scrollToPos){var r=function(e,t,i,n){null==n&&(n=0);for(var r=0;r<5;r++){var o=!1,s=Dt(e,t),a=i&&i!=t?Dt(e,i):s,l=Bi(e,Math.min(s.left,a.left),Math.min(s.top,a.top)-n,Math.max(s.left,a.left),Math.max(s.bottom,a.bottom)+n),c=e.doc.scrollTop,u=e.doc.scrollLeft;if(null!=l.scrollTop&&(mi(e,l.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(o=!0)),null!=l.scrollLeft&&(gi(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-u)>1&&(o=!0)),!o)break}return s}(t,Ee(n,e.scrollToPos.from),Ee(n,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&function(e,t){if(eo(e,"scrollCursorIntoView"))return;var i=e.display,n=i.sizer.getBoundingClientRect(),r=null;t.top+n.top<0?r=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1);if(null!=r&&!h){var o=$o("div","​",null,"position: absolute; top: "+(t.top-i.viewOffset-lt(e.display))+"px; height: "+(t.bottom-t.top+dt(e)+i.barHeight)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(r),e.display.lineSpace.removeChild(o)}}(t,r)}var o=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(o)for(var a=0;a<o.length;++a)o[a].lines.length||Xr(o[a],"hide");if(s)for(a=0;a<s.length;++a)s[a].lines.length&&Xr(s[a],"unhide");i.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Xr(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Gt(e,t){if(e.curOp)return t();jt(e);try{return t()}finally{Bt(e)}}function Yt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);jt(e);try{return t.apply(e,arguments)}finally{Bt(e)}}}function Xt(e){return function(){if(this.curOp)return e.apply(this,arguments);jt(this);try{return e.apply(this,arguments)}finally{Bt(this)}}}function Zt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);jt(t);try{return e.apply(this,arguments)}finally{Bt(t)}}}function Qt(e,t,i){this.line=t,this.rest=function(e){var t,i;for(;t=En(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}(t),this.size=this.rest?Sr(mo(this.rest))-i+1:1,this.node=this.text=null,this.hidden=jn(e,t)}function Jt(e,t,i){for(var n,r=[],o=t;o<i;o=n){var s=new Qt(e.doc,xr(e.doc,o),o);n=o+s.size,r.push(s)}return r}function ei(e,t,i,n){null==t&&(t=e.doc.first),null==i&&(i=e.doc.first+e.doc.size),n||(n=0);var r=e.display;if(n&&i<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=r.viewTo)C&&Wn(e.doc,t)<r.viewTo&&ii(e);else if(i<=r.viewFrom)C&&Rn(e.doc,i+n)>r.viewFrom?ii(e):(r.viewFrom+=n,r.viewTo+=n);else if(t<=r.viewFrom&&i>=r.viewTo)ii(e);else if(t<=r.viewFrom){(o=ri(e,i,i+n,1))?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=n):ii(e)}else if(i>=r.viewTo){var o;(o=ri(e,t,t,-1))?(r.view=r.view.slice(0,o.index),r.viewTo=o.lineN):ii(e)}else{var s=ri(e,t,t,-1),a=ri(e,i,i+n,1);s&&a?(r.view=r.view.slice(0,s.index).concat(Jt(e,s.lineN,a.lineN)).concat(r.view.slice(a.index)),r.viewTo+=n):ii(e)}var l=r.externalMeasured;l&&(i<l.lineN?l.lineN+=n:t<l.lineN+l.size&&(r.externalMeasured=null))}function ti(e,t,i){e.curOp.viewChanged=!0;var n=e.display,r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var o=n.view[ni(e,t)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==vo(s,i)&&s.push(i)}}}function ii(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function ni(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var i=e.display.view,n=0;n<i.length;n++)if((t-=i[n].size)<0)return n}function ri(e,t,i,n){var r,o=ni(e,t),s=e.display.view;if(!C||i==e.doc.first+e.doc.size)return{index:o,lineN:i};for(var a=0,l=e.display.viewFrom;a<o;a++)l+=s[a].size;if(l!=t){if(n>0){if(o==s.length-1)return null;r=l+s[o].size-t,o++}else r=l-t;t+=r,i+=r}for(;Wn(e.doc,i)!=i;){if(o==(n<0?0:s.length-1))return null;i+=n*s[o-(n<0?1:0)].size,o+=n}return{index:o,lineN:i}}function oi(e){for(var t=e.display.view,i=0,n=0;n<t.length;n++){var r=t[n];r.hidden||r.node&&!r.changes||++i}return i}function si(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function ai(e,t){for(var i=qr(t);i!=e.wrapper;i=i.parentNode)if(!i||1==i.nodeType&&"true"==i.getAttribute("cm-ignore-events")||i.parentNode==e.sizer&&i!=e.mover)return!0}function li(e,t,i,n){var r=e.display;if(!i&&"true"==qr(t).getAttribute("cm-not-content"))return null;var o,s,a=r.lineSpace.getBoundingClientRect();try{o=t.clientX-a.left,s=t.clientY-a.top}catch(t){return null}var l,c=zt(e,o,s);if(n&&1==c.xRel&&(l=xr(e.doc,c.line).text).length==c.ch){var u=uo(l,l.length,e.options.tabSize)-l.length;c=he(c.line,Math.max(0,Math.round((o-ut(e.display).left)/Et(e.display))-u))}return c}function ci(e){var t=this,i=t.display;if(!(eo(t,e)||i.activeTouch&&i.input.supportsTouch()))if(i.shift=e.shiftKey,ai(i,e))a||(i.scroller.draggable=!1,setTimeout(function(){i.scroller.draggable=!0},100));else if(!di(t,e)){var n=li(t,e);switch(window.focus(),Vr(e)){case 1:t.state.selectingText?t.state.selectingText(e):n?function(e,t,i){o?setTimeout(ko(ye,e),0):e.curOp.focus=zo();var n,r=+new Date;Ht&&Ht.time>r-400&&0==fe(Ht.pos,i)?n="triple":Ft&&Ft.time>r-400&&0==fe(Ft.pos,i)?(n="double",Ht={time:r,pos:i}):(n="single",Ft={time:r,pos:i});var l,c=e.doc.sel,u=g?t.metaKey:t.ctrlKey;e.options.dragDrop&&Bo&&!e.isReadOnly()&&"single"==n&&(l=c.contains(i))>-1&&(fe((l=c.ranges[l]).from(),i)<0||i.xRel>0)&&(fe(l.to(),i)>0||i.xRel<0)?function(e,t,i,n){var r=e.display,l=+new Date,c=Yt(e,function(u){a&&(r.scroller.draggable=!1),e.state.draggingText=!1,Yr(document,"mouseup",c),Yr(r.scroller,"drop",c),Math.abs(t.clientX-u.clientX)+Math.abs(t.clientY-u.clientY)<10&&(Wr(u),!n&&+new Date-200<l&&Re(e.doc,i),a||o&&9==s?setTimeout(function(){document.body.focus(),r.input.focus()},20):r.input.focus())});a&&(r.scroller.draggable=!0);e.state.draggingText=c,c.copy=g?t.altKey:t.ctrlKey,r.scroller.dragDrop&&r.scroller.dragDrop();Kr(document,"mouseup",c),Kr(r.scroller,"drop",c)}(e,t,i,u):function(e,t,i,n,r){var o=e.display,s=e.doc;Wr(t);var a,l,c=s.sel,u=c.ranges;r&&!t.shiftKey?(l=s.sel.contains(i),a=l>-1?u[l]:new Ae(i,i)):(a=s.sel.primary(),l=s.sel.primIndex);if(v?t.shiftKey&&t.metaKey:t.altKey)n="rect",r||(a=new Ae(i,i)),i=li(e,t,!0,!0),l=-1;else if("double"==n){var d=e.findWordAt(i);a=e.display.shift||s.extend?We(s,a,d.anchor,d.head):d}else if("triple"==n){var p=new Ae(he(i.line,0),Ee(s,he(i.line+1,0)));a=e.display.shift||s.extend?We(s,a,p.anchor,p.head):p}else a=We(s,a,i);r?-1==l?(l=u.length,Ke(s,ze(u.concat([a]),l),{scroll:!1,origin:"*mouse"})):u.length>1&&u[l].empty()&&"single"==n&&!t.shiftKey?(Ke(s,ze(u.slice(0,l).concat(u.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),c=s.sel):Be(s,l,a,ao):(l=0,Ke(s,new Ie([a],0),ao),c=s.sel);var h=i;var f=o.wrapper.getBoundingClientRect(),m=0;function g(t){var r=++m,u=li(e,t,!0,"rect"==n);if(u)if(0!=fe(u,h)){e.curOp.focus=zo(),function(t){if(0==fe(h,t))return;if(h=t,"rect"==n){for(var r=[],o=e.options.tabSize,u=uo(xr(s,i.line).text,i.ch,o),d=uo(xr(s,t.line).text,t.ch,o),p=Math.min(u,d),f=Math.max(u,d),m=Math.min(i.line,t.line),g=Math.min(e.lastLine(),Math.max(i.line,t.line));m<=g;m++){var v=xr(s,m).text,y=po(v,p,o);p==f?r.push(new Ae(he(m,y),he(m,y))):v.length>y&&r.push(new Ae(he(m,y),he(m,po(v,f,o))))}r.length||r.push(new Ae(i,i)),Ke(s,ze(c.ranges.slice(0,l).concat(r),l),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b=a,w=b.anchor,x=t;if("single"!=n){if("double"==n)var k=e.findWordAt(t);else var k=new Ae(he(t.line,0),Ee(s,he(t.line+1,0)));fe(k.anchor,w)>0?(x=k.head,w=ve(b.from(),k.anchor)):(x=k.anchor,w=ge(b.to(),k.head))}var r=c.ranges.slice(0);r[l]=new Ae(Ee(s,w),x),Ke(s,ze(r,l),ao)}}(u);var d=B(o,s);(u.line>=d.to||u.line<d.from)&&setTimeout(Yt(e,function(){m==r&&g(t)}),150)}else{var p=t.clientY<f.top?-20:t.clientY>f.bottom?20:0;p&&setTimeout(Yt(e,function(){m==r&&(o.scroller.scrollTop+=p,g(t))}),50)}}function y(t){e.state.selectingText=!1,m=1/0,Wr(t),o.input.focus(),Yr(document,"mousemove",b),Yr(document,"mouseup",w),s.history.lastSelOrigin=null}var b=Yt(e,function(e){Vr(e)?g(e):y(e)}),w=Yt(e,y);e.state.selectingText=w,Kr(document,"mousemove",b),Kr(document,"mouseup",w)}(e,t,i,n,u)}(t,e,n):qr(e)==i.scroller&&Wr(e);break;case 2:a&&(t.state.lastMiddleDown=+new Date),n&&Re(t.doc,n),setTimeout(function(){i.input.focus()},20),Wr(e);break;case 3:x?Di(t,e):function(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,$i(e))},100)}(t)}}}function ui(e,t,i,n){try{var r=t.clientX,o=t.clientY}catch(t){return!1}if(r>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&Wr(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(o>a.bottom||!io(e,i))return jr(t);o-=a.top-s.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var c=s.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=r){var u=Mr(e.doc,o),d=e.options.gutters[l];return Xr(e,i,e,u,d,t),jr(t)}}}function di(e,t){return ui(e,t,"gutterClick",!0)}var pi=0;function hi(e){var t=this;if(fi(t),!eo(t,e)&&!ai(t.display,e)){Wr(e),o&&(pi=+new Date);var i=li(t,e,!0),n=e.dataTransfer.files;if(i&&!t.isReadOnly())if(n&&n.length&&window.FileReader&&window.File)for(var r=n.length,s=Array(r),a=0,l=function(e,n){if(!t.options.allowDropFileTypes||-1!=vo(t.options.allowDropFileTypes,e.type)){var o=new FileReader;o.onload=Yt(t,function(){var e=o.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),s[n]=e,++a==r){var l={from:i=Ee(t.doc,i),to:i,text:t.doc.splitLines(s.join(t.doc.lineSeparator())),origin:"paste"};Ei(t.doc,l),Ve(t.doc,Ne(i,Ii(l)))}}),o.readAsText(e)}},c=0;c<r;++c)l(n[c],c);else{if(t.state.draggingText&&t.doc.sel.contains(i)>-1)return t.state.draggingText(e),void setTimeout(function(){t.display.input.focus()},20);try{if(s=e.dataTransfer.getData("Text")){if(t.state.draggingText&&!t.state.draggingText.copy)var u=t.listSelections();if(Ue(t.doc,Ne(i,i)),u)for(c=0;c<u.length;++c)ji(t.doc,"",u[c].anchor,u[c].head,"drag");t.replaceSelection(s,"around","paste"),t.display.input.focus()}}catch(e){}}}}function fi(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function mi(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,i||Z(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),i&&Z(e),ot(e,100))}function gi(e,t,i){(i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,q(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}var vi=0,yi=null;o?yi=-.53:i?yi=15:c?yi=-.7:d&&(yi=-1/3);var bi=function(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==i&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:null==i&&(i=e.wheelDelta),{x:t,y:i}};function wi(e,t){var n=bi(t),r=n.x,o=n.y,s=e.display,l=s.scroller,c=l.scrollWidth>l.clientWidth,d=l.scrollHeight>l.clientHeight;if(r&&c||o&&d){if(o&&g&&a)e:for(var p=t.target,h=s.view;p!=l;p=p.parentNode)for(var f=0;f<h.length;f++)if(h[f].node==p){e.display.currentWheelTarget=p;break e}if(r&&!i&&!u&&null!=yi)return o&&d&&mi(e,Math.max(0,Math.min(l.scrollTop+o*yi,l.scrollHeight-l.clientHeight))),gi(e,Math.max(0,Math.min(l.scrollLeft+r*yi,l.scrollWidth-l.clientWidth))),(!o||o&&d)&&Wr(t),void(s.wheelStartX=null);if(o&&null!=yi){var m=o*yi,v=e.doc.scrollTop,y=v+s.wrapper.clientHeight;m<0?v=Math.max(0,v+m-50):y=Math.min(e.doc.height,y+m+50),Z(e,{top:v,bottom:y})}vi<20&&(null==s.wheelStartX?(s.wheelStartX=l.scrollLeft,s.wheelStartY=l.scrollTop,s.wheelDX=r,s.wheelDY=o,setTimeout(function(){if(null!=s.wheelStartX){var e=l.scrollLeft-s.wheelStartX,t=l.scrollTop-s.wheelStartY,i=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,i&&(yi=(yi*vi+i)/(vi+1),++vi)}},200)):(s.wheelDX+=r,s.wheelDY+=o))}}function xi(e,t,i){if("string"==typeof t&&!(t=un[t]))return!1;e.display.input.ensurePolled();var n=e.display.shift,r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),r=t(e)!=oo}finally{e.display.shift=n,e.state.suppressEdits=!1}return r}_.wheelEventPixels=function(e){var t=bi(e);return t.x*=yi,t.y*=yi,t};var ki=new co;function Ci(e,t,i,n){var r=e.state.keySeq;if(r){if(fn(t))return"handled";ki.set(50,function(){e.state.keySeq==r&&(e.state.keySeq=null,e.display.input.reset())}),t=r+" "+t}var o=function(e,t,i){for(var n=0;n<e.state.keyMaps.length;n++){var r=hn(t,e.state.keyMaps[n],i,e);if(r)return r}return e.options.extraKeys&&hn(t,e.options.extraKeys,i,e)||hn(t,e.options.keyMap,i,e)}(e,t,n);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&Qr(e,"keyHandled",e,t,i),"handled"!=o&&"multi"!=o||(Wr(i),rt(e)),r&&!o&&/\'$/.test(t)?(Wr(i),!0):!!o}function _i(e,t){var i=mn(t,!0);return!!i&&(t.shiftKey&&!e.state.keySeq?Ci(e,"Shift-"+i,t,function(t){return xi(e,t,!0)})||Ci(e,i,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return xi(e,t)}):Ci(e,i,t,function(t){return xi(e,t)}))}var Si=null;function Mi(e){var t=this;if(t.curOp.focus=zo(),!eo(t,e)){o&&s<11&&27==e.keyCode&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=16==i||e.shiftKey;var n=_i(t,e);u&&(Si=n?i:null,!n&&88==i&&!Yo&&(g?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=i||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function i(e){18!=e.keyCode&&e.altKey||(Po(t,"CodeMirror-crosshair"),Yr(document,"keyup",i),Yr(document,"mouseover",i))}Eo(t,"CodeMirror-crosshair"),Kr(document,"keyup",i),Kr(document,"mouseover",i)}(t)}}function Ti(e){16==e.keyCode&&(this.doc.sel.shift=!1),eo(this,e)}function Oi(e){var t=this;if(!(ai(t.display,e)||eo(t,e)||e.ctrlKey&&!e.altKey||g&&e.metaKey)){var i=e.keyCode,n=e.charCode;if(u&&i==Si)return Si=null,void Wr(e);if(!u||e.which&&!(e.which<10)||!_i(t,e))(function(e,t,i){return Ci(e,"'"+i+"'",t,function(t){return xi(e,t,!0)})})(t,e,String.fromCharCode(null==n?i:n))||t.display.input.onKeyPress(e)}}function Li(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Xr(e,"focus",e,t),e.state.focused=!0,Eo(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),a&&setTimeout(function(){e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),rt(e))}function $i(e,t){e.state.delayingBlurEvent||(e.state.focused&&(Xr(e,"blur",e,t),e.state.focused=!1,Po(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Di(e,t){ai(e.display,t)||function(e,t){return!!io(e,"gutterContextMenu")&&ui(e,t,"gutterContextMenu",!1)}(e,t)||eo(e,t,"contextmenu")||e.display.input.onContextMenu(t)}var Ii=_.changeEnd=function(e){return e.text?he(e.from.line+e.text.length-1,mo(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};function Ai(e,t){if(fe(e,t.from)<0)return e;if(fe(e,t.to)<=0)return Ii(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=Ii(t).ch-t.to.ch),he(i,n)}function zi(e,t){for(var i=[],n=0;n<e.sel.ranges.length;n++){var r=e.sel.ranges[n];i.push(new Ae(Ai(r.anchor,t),Ai(r.head,t)))}return ze(i,e.sel.primIndex)}function Ni(e,t,i){return e.line==t.line?he(i.line,e.ch-t.ch+i.ch):he(i.line+(e.line-t.line),e.ch)}function Pi(e,t,i){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return i&&(n.update=function(t,i,n,r){t&&(this.from=Ee(e,t)),i&&(this.to=Ee(e,i)),n&&(this.text=n),void 0!==r&&(this.origin=r)}),Xr(e,"beforeChange",e,n),e.cm&&Xr(e.cm,"beforeChange",e.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function Ei(e,t,i){if(e.cm){if(!e.cm.curOp)return Yt(e.cm,Ei)(e,t,i);if(e.cm.state.suppressEdits)return}if(!(io(e,"beforeChange")||e.cm&&io(e.cm,"beforeChange"))||(t=Pi(e,t,!0))){var n=k&&!i&&function(e,t,i){var n=null;if(e.iter(t.line,i.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var i=e.markedSpans[t].marker;!i.readOnly||n&&-1!=vo(n,i)||(n||(n=[])).push(i)}}),!n)return null;for(var r=[{from:t,to:i}],o=0;o<n.length;++o)for(var s=n[o],a=s.find(0),l=0;l<r.length;++l){var c=r[l];if(!(fe(c.to,a.from)<0||fe(c.from,a.to)>0)){var u=[l,1],d=fe(c.from,a.from),p=fe(c.to,a.to);(d<0||!s.inclusiveLeft&&!d)&&u.push({from:c.from,to:a.from}),(p>0||!s.inclusiveRight&&!p)&&u.push({from:a.to,to:c.to}),r.splice.apply(r,u),l+=u.length-1}}return r}(e,t.from,t.to);if(n)for(var r=n.length-1;r>=0;--r)Fi(e,{from:n[r].from,to:n[r].to,text:r?[""]:t.text});else Fi(e,t)}}function Fi(e,t){if(1!=t.text.length||""!=t.text[0]||0!=fe(t.from,t.to)){var i=zi(e,t);Ir(e,t,i,e.cm?e.cm.curOp.id:NaN),Ri(e,t,i,Tn(e,t));var n=[];br(e,function(e,i){i||-1!=vo(n,e.history)||(Hr(e.history,t),n.push(e.history)),Ri(e,t,null,Tn(e,t))})}}function Hi(e,t,i){if(!e.cm||!e.cm.state.suppressEdits||i){for(var n,r=e.history,o=e.sel,s="undo"==t?r.done:r.undone,a="undo"==t?r.undone:r.done,l=0;l<s.length&&(n=s[l],i?!n.ranges||n.equals(e.sel):n.ranges);l++);if(l!=s.length){for(r.lastOrigin=r.lastSelOrigin=null;(n=s.pop()).ranges;){if(Ar(n,a),i&&!n.equals(e.sel))return void Ke(e,n,{clearRedo:!1});o=n}var c=[];Ar(o,a),a.push({changes:c,generation:r.generation}),r.generation=n.generation||++r.maxGeneration;var u=io(e,"beforeChange")||e.cm&&io(e.cm,"beforeChange");for(l=n.changes.length-1;l>=0;--l){var d=n.changes[l];if(d.origin=t,u&&!Pi(e,d,!1))return void(s.length=0);c.push($r(e,d));var p=l?zi(e,d):mo(s);Ri(e,d,p,Ln(e,d)),!l&&e.cm&&e.cm.scrollIntoView({from:d.from,to:Ii(d)});var h=[];br(e,function(e,t){t||-1!=vo(h,e.history)||(Hr(e.history,d),h.push(e.history)),Ri(e,d,null,Ln(e,d))})}}}}function Wi(e,t){if(0!=t&&(e.first+=t,e.sel=new Ie(yo(e.sel.ranges,function(e){return new Ae(he(e.anchor.line+t,e.anchor.ch),he(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){ei(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,n=i.viewFrom;n<i.viewTo;n++)ti(e.cm,n,"gutter")}}function Ri(e,t,i,n){if(e.cm&&!e.cm.curOp)return Yt(e.cm,Ri)(e,t,i,n);if(t.to.line<e.first)Wi(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);Wi(e,r),t={from:he(e.first,0),to:he(t.to.line+r,t.to.ch),text:[mo(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:he(o,xr(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=kr(e,t.from,t.to),i||(i=zi(e,t)),e.cm?function(e,t,i){var n=e.doc,r=e.display,o=t.from,s=t.to,a=!1,l=o.line;e.options.lineWrapping||(l=Sr(Hn(xr(n,o.line))),n.iter(l,s.line+1,function(e){if(e==r.maxLine)return a=!0,!0}));n.sel.contains(t.from,t.to)>-1&&to(e);pr(n,t,i,O(e)),e.options.lineWrapping||(n.iter(l,o.line+t.text.length,function(e){var t=z(e);t>r.maxLineLength&&(r.maxLine=e,r.maxLineLength=t,r.maxLineChanged=!0,a=!1)}),a&&(e.curOp.updateMaxLine=!0));n.frontier=Math.min(n.frontier,o.line),ot(e,400);var c=t.text.length-(s.line-o.line)-1;t.full?ei(e):o.line!=s.line||1!=t.text.length||dr(e.doc,t)?ei(e,o.line,s.line+1,c):ti(e,o.line,"text");var u=io(e,"changes"),d=io(e,"change");if(d||u){var p={from:o,to:s,text:t.text,removed:t.removed,origin:t.origin};d&&Qr(e,"change",e,p),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}(e.cm,t,n):pr(e,t,n),Ue(e,i,so)}}function ji(e,t,i,n,r){if(n||(n=i),fe(n,i)<0){var o=n;n=i,i=o}"string"==typeof t&&(t=e.splitLines(t)),Ei(e,{from:i,to:n,text:t,origin:r})}function Bi(e,t,i,n,r){var o=e.display,s=Pt(e.display);i<0&&(i=0);var a=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,l=ht(e),c={};r-i>l&&(r=i+l);var u=e.doc.height+ct(o),d=i<s,p=r>u-s;if(i<a)c.scrollTop=d?0:i;else if(r>a+l){var h=Math.min(i,(p?u:r)-l);h!=a&&(c.scrollTop=h)}var f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,m=pt(e)-(e.options.fixedGutter?o.gutters.offsetWidth:0),g=n-t>m;return g&&(n=t+m),t<10?c.scrollLeft=0:t<f?c.scrollLeft=Math.max(0,t-(g?0:10)):n>m+f-3&&(c.scrollLeft=n+(g?0:10)-m),c}function qi(e,t,i){null==t&&null==i||Ki(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=i&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+i)}function Vi(e){Ki(e);var t=e.getCursor(),i=t,n=t;e.options.lineWrapping||(i=t.ch?he(t.line,t.ch-1):t,n=he(t.line,t.ch+1)),e.curOp.scrollToPos={from:i,to:n,margin:e.options.cursorScrollMargin,isCursor:!0}}function Ki(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var i=It(e,t.from),n=It(e,t.to),r=Bi(e,Math.min(i.left,n.left),Math.min(i.top,n.top)-t.margin,Math.max(i.right,n.right),Math.max(i.bottom,n.bottom)+t.margin);e.scrollTo(r.scrollLeft,r.scrollTop)}}function Ui(e,t,i,n){var r,o=e.doc;null==i&&(i="add"),"smart"==i&&(o.mode.indent?r=at(e,t):i="prev");var s=e.options.tabSize,a=xr(o,t),l=uo(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var c,u=a.text.match(/^\s*/)[0];if(n||/\S/.test(a.text)){if("smart"==i&&((c=o.mode.indent(r,a.text.slice(u.length),a.text))==oo||c>150)){if(!n)return;i="prev"}}else c=0,i="not";"prev"==i?c=t>o.first?uo(xr(o,t-1).text,null,s):0:"add"==i?c=l+e.options.indentUnit:"subtract"==i?c=l-e.options.indentUnit:"number"==typeof i&&(c=l+i),c=Math.max(0,c);var d="",p=0;if(e.options.indentWithTabs)for(var h=Math.floor(c/s);h;--h)p+=s,d+="\t";if(p<c&&(d+=fo(c-p)),d!=u)return ji(o,d,he(t,0),he(t,u.length),"+input"),a.stateAfter=null,!0;for(h=0;h<o.sel.ranges.length;h++){var f=o.sel.ranges[h];if(f.head.line==t&&f.head.ch<u.length){Be(o,h,new Ae(p=he(t,u.length),p));break}}}function Gi(e,t,i,n){var r=t,o=t;return"number"==typeof t?o=xr(e,Pe(e,t)):r=Sr(t),null==r?null:(n(o,r)&&e.cm&&ti(e.cm,r,i),o)}function Yi(e,t){for(var i=e.doc.sel.ranges,n=[],r=0;r<i.length;r++){for(var o=t(i[r]);n.length&&fe(o.from,mo(n).to)<=0;){var s=n.pop();if(fe(s.from,o.from)<0){o.from=s.from;break}}n.push(o)}Gt(e,function(){for(var t=n.length-1;t>=0;t--)ji(e.doc,"",n[t].from,n[t].to,"+delete");Vi(e)})}function Xi(e,t,i,n,r){var o=t.line,s=t.ch,a=i,l=xr(e,o);function c(t){var n,a=(r?ls:cs)(l,s,i,!0);if(null==a){if(t||(n=o+i)<e.first||n>=e.first+e.size||(o=n,!(l=xr(e,n))))return!1;s=r?(i<0?is:ts)(l):i<0?l.text.length:0}else s=a;return!0}if("char"==n)c();else if("column"==n)c(!0);else if("word"==n||"group"==n)for(var u=null,d="group"==n,p=e.cm&&e.cm.getHelper(t,"wordChars"),h=!0;!(i<0)||c(!h);h=!1){var f=l.text.charAt(s)||"\n",m=So(f,p)?"w":d&&"\n"==f?"n":!d||/\s/.test(f)?null:"p";if(!d||h||m||(m="s"),u&&u!=m){i<0&&(i=1,c());break}if(m&&(u=m),i>0&&!c(!h))break}var g=Qe(e,he(o,s),t,a,!0);return fe(t,g)||(g.hitSide=!0),g}function Zi(e,t,i,n){var r,o=e.doc,s=t.left;if("page"==n){var a=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),l=Math.max(a-.5*Pt(e.display),3);r=(i>0?t.bottom:t.top)+i*l}else"line"==n&&(r=i>0?t.bottom+3:t.top-3);for(;;){var c=zt(e,s,r);if(!c.outside)break;if(i<0?r<=0:r>=o.height){c.hitSide=!0;break}r+=5*i}return c}_.prototype={constructor:_,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var i=this.options,n=i[e];i[e]==t&&"mode"!=e||(i[e]=t,Ji.hasOwnProperty(e)&&Yt(this,Ji[e])(this,t,n))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](gn(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,i=0;i<t.length;++i)if(t[i]==e||t[i].name==e)return t.splice(i,1),!0},addOverlay:Xt(function(e,t){var i=e.token?e:_.getMode(this.options,e);if(i.startState)throw new Error("Overlays may not be stateful.");!function(e,t,i){var n=0,r=i(t);for(;n<e.length&&i(e[n])<=r;)n++;e.splice(n,0,t)}(this.state.overlays,{mode:i,modeSpec:e,opaque:t&&t.opaque,priority:t&&t.priority||0},function(e){return e.priority}),this.state.modeGen++,ei(this)}),removeOverlay:Xt(function(e){for(var t=this.state.overlays,i=0;i<t.length;++i){var n=t[i].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(i,1),this.state.modeGen++,void ei(this)}}),indentLine:Xt(function(e,t,i){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Fe(this.doc,e)&&Ui(this,e,t,i)}),indentSelection:Xt(function(e){for(var t=this.doc.sel.ranges,i=-1,n=0;n<t.length;n++){var r=t[n];if(r.empty())r.head.line>i&&(Ui(this,r.head.line,e,!0),i=r.head.line,n==this.doc.sel.primIndex&&Vi(this));else{var o=r.from(),s=r.to(),a=Math.max(i,o.line);i=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var l=a;l<i;++l)Ui(this,l,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[n].from().ch>0&&Be(this.doc,n,new Ae(o,c[n].to()),so)}}}),getTokenAt:function(e,t){return Qn(this,e,t)},getLineTokens:function(e,t){return Qn(this,he(e),t,!0)},getTokenTypeAt:function(e){e=Ee(this.doc,e);var t,i=tr(this,xr(this.doc,e.line)),n=0,r=(i.length-1)/2,o=e.ch;if(0==o)t=i[2];else for(;;){var s=n+r>>1;if((s?i[2*s-1]:0)>=o)r=s;else{if(!(i[2*s+1]<o)){t=i[2*s+2];break}n=s+1}}var a=t?t.indexOf("cm-overlay "):-1;return a<0?t:0==a?null:t.slice(0,a-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?_.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!an.hasOwnProperty(t))return i;var n=an[t],r=this.getModeAt(e);if("string"==typeof r[t])n[r[t]]&&i.push(n[r[t]]);else if(r[t])for(var o=0;o<r[t].length;o++){var s=n[r[t][o]];s&&i.push(s)}else r.helperType&&n[r.helperType]?i.push(n[r.helperType]):n[r.name]&&i.push(n[r.name]);for(o=0;o<n._global.length;o++){var a=n._global[o];a.pred(r,this)&&-1==vo(i,a.val)&&i.push(a.val)}return i},getStateAfter:function(e,t){var i=this.doc;return at(this,(e=Pe(i,null==e?i.first+i.size-1:e))+1,t)},cursorCoords:function(e,t){var i=this.doc.sel.primary();return Dt(this,null==e?i.head:"object"==typeof e?Ee(this.doc,e):e?i.from():i.to(),t||"page")},charCoords:function(e,t){return $t(this,Ee(this.doc,e),t||"page")},coordsChar:function(e,t){return zt(this,(e=Lt(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Lt(this,{top:e,left:0},t||"page").top,Mr(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var i,n=!1;if("number"==typeof e){var r=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>r&&(e=r,n=!0),i=xr(this.doc,e)}else i=e;return Ot(this,i,{top:0,left:0},t||"page").top+(n?this.doc.height-Tr(i):0)},defaultTextHeight:function(){return Pt(this.display)},defaultCharWidth:function(){return Et(this.display)},setGutterMarker:Xt(function(e,t,i){return Gi(this.doc,e,"gutter",function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=i,!i&&Mo(n)&&(e.gutterMarkers=null),!0})}),clearGutter:Xt(function(e){var t=this,i=t.doc,n=i.first;i.iter(function(i){i.gutterMarkers&&i.gutterMarkers[e]&&(i.gutterMarkers[e]=null,ti(t,n,"gutter"),Mo(i.gutterMarkers)&&(i.gutterMarkers=null)),++n})}),lineInfo:function(e){if("number"==typeof e){if(!Fe(this.doc,e))return null;var t=e;if(!(e=xr(this.doc,e)))return null}else{if(null==(t=Sr(e)))return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,i,n,r){var o,s,a,l,c,u,d=this.display,p=(e=Dt(this,Ee(this.doc,e))).bottom,h=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),d.sizer.appendChild(t),"over"==n)p=e.top;else if("above"==n||"near"==n){var f=Math.max(d.wrapper.clientHeight,this.doc.height),m=Math.max(d.sizer.clientWidth,d.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>f)&&e.top>t.offsetHeight?p=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=f&&(p=e.bottom),h+t.offsetWidth>m&&(h=m-t.offsetWidth)}t.style.top=p+"px",t.style.left=t.style.right="","right"==r?(h=d.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?h=0:"middle"==r&&(h=(d.sizer.clientWidth-t.offsetWidth)/2),t.style.left=h+"px"),i&&(o=this,s=h,a=p,l=h+t.offsetWidth,c=p+t.offsetHeight,null!=(u=Bi(o,s,a,l,c)).scrollTop&&mi(o,u.scrollTop),null!=u.scrollLeft&&gi(o,u.scrollLeft))},triggerOnKeyDown:Xt(Mi),triggerOnKeyPress:Xt(Oi),triggerOnKeyUp:Ti,execCommand:function(e){if(un.hasOwnProperty(e))return un[e].call(null,this)},triggerElectric:Xt(function(e){ke(this,e)}),findPosH:function(e,t,i,n){var r=1;t<0&&(r=-1,t=-t);for(var o=0,s=Ee(this.doc,e);o<t&&!(s=Xi(this.doc,s,r,i,n)).hitSide;++o);return s},moveH:Xt(function(e,t){var i=this;i.extendSelectionsBy(function(n){return i.display.shift||i.doc.extend||n.empty()?Xi(i.doc,n.head,e,t,i.options.rtlMoveVisually):e<0?n.from():n.to()},lo)}),deleteH:Xt(function(e,t){var i=this.doc.sel,n=this.doc;i.somethingSelected()?n.replaceSelection("",null,"+delete"):Yi(this,function(i){var r=Xi(n,i.head,e,t,!1);return e<0?{from:r,to:i.head}:{from:i.head,to:r}})}),findPosV:function(e,t,i,n){var r=1,o=n;t<0&&(r=-1,t=-t);for(var s=0,a=Ee(this.doc,e);s<t;++s){var l=Dt(this,a,"div");if(null==o?o=l.left:l.left=o,(a=Zi(this,l,r,i)).hitSide)break}return a},moveV:Xt(function(e,t){var i=this,n=this.doc,r=[],o=!i.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(s){if(o)return e<0?s.from():s.to();var a=Dt(i,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),r.push(a.left);var l=Zi(i,a,e,t);return"page"==t&&s==n.sel.primary()&&qi(i,null,$t(i,l,"div").top-a.top),l},lo),r.length)for(var s=0;s<n.sel.ranges.length;s++)n.sel.ranges[s].goalColumn=r[s]}),findWordAt:function(e){var t=xr(this.doc,e.line).text,i=e.ch,n=e.ch;if(t){var r=this.getHelper(e,"wordChars");(e.xRel<0||n==t.length)&&i?--i:++n;for(var o=t.charAt(i),s=So(o,r)?function(e){return So(e,r)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!So(e)};i>0&&s(t.charAt(i-1));)--i;for(;n<t.length&&s(t.charAt(n));)++n}return new Ae(he(e.line,i),he(e.line,n))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Eo(this.display.cursorDiv,"CodeMirror-overwrite"):Po(this.display.cursorDiv,"CodeMirror-overwrite"),Xr(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==zo()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Xt(function(e,t){null==e&&null==t||Ki(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-dt(this)-this.display.barHeight,width:e.scrollWidth-dt(this)-this.display.barWidth,clientHeight:ht(this),clientWidth:pt(this)}},scrollIntoView:Xt(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:he(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)Ki(this),this.curOp.scrollToPos=e;else{var i=Bi(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(i.scrollLeft,i.scrollTop)}}),setSize:Xt(function(e,t){var i=this;function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}null!=e&&(i.display.wrapper.style.width=n(e)),null!=t&&(i.display.wrapper.style.height=n(t)),i.options.lineWrapping&&_t(this);var r=i.display.viewFrom;i.doc.iter(r,i.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){ti(i,r,"widget");break}++r}),i.curOp.forceUpdate=!0,Xr(i,"refresh",this)}),operation:function(e){return Gt(this,e)},refresh:Xt(function(){var e=this.display.cachedTextHeight;ei(this),this.curOp.forceUpdate=!0,St(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),A(this),(null==e||Math.abs(e-Pt(this.display))>.5)&&L(this),Xr(this,"refresh",this)}),swapDoc:Xt(function(e){var t=this.doc;return t.cm=null,wr(this,e),St(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,Qr(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},no(_);var Qi=_.defaults={},Ji=_.optionHandlers={};function en(e,t,i,n){_.defaults[e]=t,i&&(Ji[e]=n?function(e,t,n){n!=tn&&i(e,t,n)}:i)}var tn=_.Init={toString:function(){return"CodeMirror.Init"}};en("value","",function(e,t){e.setValue(t)},!0),en("mode",null,function(e,t){e.doc.modeOption=t,M(e)},!0),en("indentUnit",2,M,!0),en("indentWithTabs",!1),en("smartIndent",!0),en("tabSize",4,function(e){T(e),St(e),ei(e)},!0),en("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var i=[],n=e.doc.first;e.doc.iter(function(e){for(var r=0;;){var o=e.text.indexOf(t,r);if(-1==o)break;r=o+t.length,i.push(he(n,o))}n++});for(var r=i.length-1;r>=0;r--)ji(e.doc,t,i[r],he(i[r].line,i[r].ch+t.length))}}),en("specialChars",/[\u0000-\u001f\u007f\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,i){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),i!=_.Init&&e.refresh()}),en("specialCharPlaceholder",function(e){var t=$o("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t},function(e){e.refresh()},!0),en("electricChars",!0),en("inputStyle",m?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),en("spellcheck",!1,function(e,t){e.getInputField().spellcheck=t},!0),en("rtlMoveVisually",!y),en("wholeLineUpdateBefore",!0),en("theme","default",function(e){$(e),D(e)},!0),en("keyMap","default",function(e,t,i){var n=gn(t),r=i!=_.Init&&gn(i);r&&r.detach&&r.detach(e,n),n.attach&&n.attach(e,r||null)}),en("extraKeys",null),en("lineWrapping",!1,function(e){e.options.lineWrapping?(Eo(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Po(e.display.wrapper,"CodeMirror-wrap"),N(e)),L(e),ei(e),St(e),setTimeout(function(){R(e)},100)},!0),en("gutters",[],function(e){P(e.options),D(e)},!0),en("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?U(e.display)+"px":"0",e.refresh()},!0),en("coverGutterNextToScrollbar",!1,function(e){R(e)},!0),en("scrollbarStyle","native",function(e){W(e),R(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),en("lineNumbers",!1,function(e){P(e.options),D(e)},!0),en("firstLineNumber",1,D,!0),en("lineNumberFormatter",function(e){return e},D,!0),en("showCursorWhenSelecting",!1,et,!0),en("resetSelectionOnContextMenu",!0),en("lineWiseCopyCut",!0),en("readOnly",!1,function(e,t){"nocursor"==t?($i(e),e.display.input.blur(),e.display.disabled=!0):e.display.disabled=!1,e.display.input.readOnlyChanged(t)}),en("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),en("dragDrop",!0,function(e,t,i){if(!t!=!(i&&i!=_.Init)){var n=e.display.dragFunctions,r=t?Kr:Yr;r(e.display.scroller,"dragstart",n.start),r(e.display.scroller,"dragenter",n.enter),r(e.display.scroller,"dragover",n.over),r(e.display.scroller,"dragleave",n.leave),r(e.display.scroller,"drop",n.drop)}}),en("allowDropFileTypes",null),en("cursorBlinkRate",530),en("cursorScrollMargin",0),en("cursorHeight",1,et,!0),en("singleCursorHeightPerLine",!0,et,!0),en("workTime",100),en("workDelay",100),en("flattenSpans",!0,T,!0),en("addModeClass",!1,T,!0),en("pollInterval",100),en("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),en("historyEventDelay",1250),en("viewportMargin",10,function(e){e.refresh()},!0),en("maxHighlightLength",1e4,T,!0),en("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),en("tabindex",null,function(e,t){e.display.input.getField().tabIndex=t||""}),en("autofocus",null);var nn=_.modes={},rn=_.mimeModes={};_.defineMode=function(e,t){_.defaults.mode||"null"==e||(_.defaults.mode=e),arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),nn[e]=t},_.defineMIME=function(e,t){rn[e]=t},_.resolveMode=function(e){if("string"==typeof e&&rn.hasOwnProperty(e))e=rn[e];else if(e&&"string"==typeof e.name&&rn.hasOwnProperty(e.name)){var t=rn[e.name];"string"==typeof t&&(t={name:t}),(e=wo(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return _.resolveMode("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return _.resolveMode("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}},_.getMode=function(e,t){t=_.resolveMode(t);var i=nn[t.name];if(!i)return _.getMode(e,"text/plain");var n=i(e,t);if(on.hasOwnProperty(t.name)){var r=on[t.name];for(var o in r)r.hasOwnProperty(o)&&(n.hasOwnProperty(o)&&(n["_"+o]=n[o]),n[o]=r[o])}if(n.name=t.name,t.helperType&&(n.helperType=t.helperType),t.modeProps)for(var o in t.modeProps)n[o]=t.modeProps[o];return n},_.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),_.defineMIME("text/plain","null");var on=_.modeExtensions={};_.extendMode=function(e,t){xo(t,on.hasOwnProperty(e)?on[e]:on[e]={})},_.defineExtension=function(e,t){_.prototype[e]=t},_.defineDocExtension=function(e,t){gr.prototype[e]=t},_.defineOption=en;var sn=[];_.defineInitHook=function(e){sn.push(e)};var an=_.helpers={};_.registerHelper=function(e,t,i){an.hasOwnProperty(e)||(an[e]=_[e]={_global:[]}),an[e][t]=i},_.registerGlobalHelper=function(e,t,i,n){_.registerHelper(e,t,n),an[e]._global.push({pred:i,val:n})};var ln=_.copyState=function(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var i={};for(var n in t){var r=t[n];r instanceof Array&&(r=r.concat([])),i[n]=r}return i},cn=_.startState=function(e,t,i){return!e.startState||e.startState(t,i)};_.innerMode=function(e,t){for(;e.innerMode;){var i=e.innerMode(t);if(!i||i.mode==e)break;t=i.state,e=i.mode}return i||{mode:e,state:t}};var un=_.commands={selectAll:function(e){e.setSelection(he(e.firstLine(),0),he(e.lastLine()),so)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),so)},killLine:function(e){Yi(e,function(t){if(t.empty()){var i=xr(e.doc,t.head.line).text.length;return t.head.ch==i&&t.head.line<e.lastLine()?{from:t.head,to:he(t.head.line+1,0)}:{from:t.head,to:he(t.head.line,i)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){Yi(e,function(t){return{from:he(t.from().line,0),to:Ee(e.doc,he(t.to().line+1,0))}})},delLineLeft:function(e){Yi(e,function(e){return{from:he(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){Yi(e,function(t){var i=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:i},"div"),to:t.from()}})},delWrappedLineRight:function(e){Yi(e,function(t){var i=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:n}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(he(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(he(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return ns(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return rs(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return function(e,t){var i,n=xr(e.doc,t);for(;i=En(n);)n=i.find(1,!0).line,t=null;var r=Or(n),o=r?r[0].level%2?ts(n):is(n):n.text.length;return he(null==t?Sr(n):t,o)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},lo)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")},lo)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:i},"div");return n.ch<e.getLine(n.line).search(/\S/)?rs(e,t.head):n},lo)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),n=e.options.tabSize,r=0;r<i.length;r++){var o=i[r].from(),s=uo(e.getLine(o.line),o.ch,n);t.push(fo(n-s%n))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){Gt(e,function(){for(var t=e.listSelections(),i=[],n=0;n<t.length;n++){var r=t[n].head,o=xr(e.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new he(r.line,r.ch-1)),r.ch>0)r=new he(r.line,r.ch+1),e.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),he(r.line,r.ch-2),r,"+transpose");else if(r.line>e.doc.first){var s=xr(e.doc,r.line-1).text;s&&e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),he(r.line-1,s.length-1),he(r.line,1),"+transpose")}i.push(new Ae(r,r))}e.setSelections(i)})},newlineAndIndent:function(e){Gt(e,function(){for(var t=e.listSelections().length,i=0;i<t;i++){var n=e.listSelections()[i];e.replaceRange(e.doc.lineSeparator(),n.anchor,n.head,"+input"),e.indentLine(n.from().line+1,null,!0)}Vi(e)})},openLine:function(e){e.replaceSelection("\n","start")},toggleOverwrite:function(e){e.toggleOverwrite()}},dn=_.keyMap={};function pn(e){for(var t,i,n,r,o=e.split(/-(?!$)/),s=(e=o[o.length-1],0);s<o.length-1;s++){var a=o[s];if(/^(cmd|meta|m)$/i.test(a))r=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else{if(!/^s(hift)$/i.test(a))throw new Error("Unrecognized modifier name: "+a);n=!0}}return t&&(e="Alt-"+e),i&&(e="Ctrl-"+e),r&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}dn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},dn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},dn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},dn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},dn.default=g?dn.macDefault:dn.pcDefault,_.normalizeKeyMap=function(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if("..."==n){delete e[i];continue}for(var r=yo(i.split(" "),pn),o=0;o<r.length;o++){var s,a;o==r.length-1?(a=r.join(" "),s=n):(a=r.slice(0,o+1).join(" "),s="...");var l=t[a];if(l){if(l!=s)throw new Error("Inconsistent bindings for "+a)}else t[a]=s}delete e[i]}for(var c in t)e[c]=t[c];return e};var hn=_.lookupKey=function(e,t,i,n){var r=(t=gn(t)).call?t.call(e,n):t[e];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&i(r))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return hn(e,t.fallthrough,i,n);for(var o=0;o<t.fallthrough.length;o++){var s=hn(e,t.fallthrough[o],i,n);if(s)return s}}},fn=_.isModifierKey=function(e){var t="string"==typeof e?e:Qo[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},mn=_.keyName=function(e,t){if(u&&34==e.keyCode&&e.char)return!1;var i=Qo[e.keyCode],n=i;return null!=n&&!e.altGraphKey&&(e.altKey&&"Alt"!=i&&(n="Alt-"+n),(w?e.metaKey:e.ctrlKey)&&"Ctrl"!=i&&(n="Ctrl-"+n),(w?e.ctrlKey:e.metaKey)&&"Cmd"!=i&&(n="Cmd-"+n),!t&&e.shiftKey&&"Shift"!=i&&(n="Shift-"+n),n)};function gn(e){return"string"==typeof e?dn[e]:e}_.fromTextArea=function(e,t){if((t=t?xo(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var i=zo();t.autofocus=i==e||null!=e.getAttribute("autofocus")&&i==document.body}function n(){e.value=a.getValue()}if(e.form&&(Kr(e.form,"submit",n),!t.leaveSubmitMethodAlone)){var r=e.form,o=r.submit;try{var s=r.submit=function(){n(),r.submit=o,r.submit(),r.submit=s}}catch(e){}}t.finishInit=function(t){t.save=n,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,n(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(Yr(e.form,"submit",n),"function"==typeof e.form.submit&&(e.form.submit=o))}},e.style.display="none";var a=_(function(t){e.parentNode.insertBefore(t,e.nextSibling)},t);return a};var vn=_.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};vn.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var i=t==e;else i=t&&(e.test?e.test(t):e(t));if(i)return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=uo(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?uo(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return uo(this.string,null,this.tabSize)-(this.lineStart?uo(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,i){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}var r=function(e){return i?e.toLowerCase():e};if(r(this.string.substr(this.pos,e.length))==r(e))return!1!==t&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var yn=0,bn=_.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++yn};no(bn),bn.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&jt(e),io(this,"clear")){var i=this.find();i&&Qr(this,"clear",i.from,i.to)}for(var n=null,r=null,o=0;o<this.lines.length;++o){var s=this.lines[o],a=Sn(s.markedSpans,this);e&&!this.collapsed?ti(e,Sr(s),"text"):e&&(null!=a.to&&(r=Sr(s)),null!=a.from&&(n=Sr(s))),s.markedSpans=Mn(s.markedSpans,a),null==a.from&&this.collapsed&&!jn(this.doc,s)&&e&&_r(s,Pt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(o=0;o<this.lines.length;++o){var l=Hn(this.lines[o]),c=z(l);c>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&ei(e,n,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Ye(e.doc)),e&&Qr(e,"markerCleared",e,this),t&&Bt(e),this.parent&&this.parent.clear()}},bn.prototype.find=function(e,t){var i,n;null==e&&"bookmark"==this.type&&(e=1);for(var r=0;r<this.lines.length;++r){var o=this.lines[r],s=Sn(o.markedSpans,this);if(null!=s.from&&(i=he(t?o:Sr(o),s.from),-1==e))return i;if(null!=s.to&&(n=he(t?o:Sr(o),s.to),1==e))return n}return i&&{from:i,to:n}},bn.prototype.changed=function(){var e=this.find(-1,!0),t=this,i=this.doc.cm;e&&i&&Gt(i,function(){var n=e.line,r=Sr(e.line),o=gt(i,r);if(o&&(Ct(o),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!jn(t.doc,n)&&null!=t.height){var s=t.height;t.height=null;var a=Kn(t)-s;a&&_r(n,n.height+a)}})},bn.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=vo(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},bn.prototype.detachLine=function(e){if(this.lines.splice(vo(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};yn=0;function wn(e,t,i,n,r){if(n&&n.shared)return function(e,t,i,n,r){(n=xo(n)).shared=!1;var o=[wn(e,t,i,n,r)],s=o[0],a=n.widgetNode;return br(e,function(e){a&&(n.widgetNode=a.cloneNode(!0)),o.push(wn(e,Ee(e,t),Ee(e,i),n,r));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;s=mo(o)}),new xn(o,s)}(e,t,i,n,r);if(e.cm&&!e.cm.curOp)return Yt(e.cm,wn)(e,t,i,n,r);var o=new bn(e,r),s=fe(t,i);if(n&&xo(n,o,!1),s>0||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=$o("span",[o.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Fn(e,t.line,t,i,o)||t.line!=i.line&&Fn(e,i.line,t,i,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");C=!0}o.addToHistory&&Ir(e,{from:t,to:i,origin:"markText"},e.sel,NaN);var a,l=t.line,c=e.cm;if(e.iter(l,i.line+1,function(e){c&&o.collapsed&&!c.options.lineWrapping&&Hn(e)==c.display.maxLine&&(a=!0),o.collapsed&&l!=t.line&&_r(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new _n(o,l==t.line?t.ch:null,l==i.line?i.ch:null)),++l}),o.collapsed&&e.iter(t.line,i.line+1,function(t){jn(e,t)&&_r(t,0)}),o.clearOnEnter&&Kr(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(k=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++yn,o.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),o.collapsed)ei(c,t.line,i.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var u=t.line;u<=i.line;u++)ti(c,u,"text");o.atomic&&Ye(c.doc),Qr(c,"markerAdded",c,o)}return o}var xn=_.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};function kn(e){return e.findMarks(he(e.first,0),e.clipPos(he(e.lastLine())),function(e){return e.parent})}function Cn(e){for(var t=0;t<e.length;t++){var i=e[t],n=[i.primary.doc];br(i.primary.doc,function(e){n.push(e)});for(var r=0;r<i.markers.length;r++){var o=i.markers[r];-1==vo(n,o.doc)&&(o.parent=null,i.markers.splice(r--,1))}}}function _n(e,t,i){this.marker=e,this.from=t,this.to=i}function Sn(e,t){if(e)for(var i=0;i<e.length;++i){var n=e[i];if(n.marker==t)return n}}function Mn(e,t){for(var i,n=0;n<e.length;++n)e[n]!=t&&(i||(i=[])).push(e[n]);return i}function Tn(e,t){if(t.full)return null;var i=Fe(e,t.from.line)&&xr(e,t.from.line).markedSpans,n=Fe(e,t.to.line)&&xr(e,t.to.line).markedSpans;if(!i&&!n)return null;var r=t.from.ch,o=t.to.ch,s=0==fe(t.from,t.to),a=function(e,t,i){if(e)for(var n,r=0;r<e.length;++r){var o=e[r],s=o.marker;if(null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==s.type&&(!i||!o.marker.insertLeft)){var a=null==o.to||(s.inclusiveRight?o.to>=t:o.to>t);(n||(n=[])).push(new _n(s,o.from,a?null:o.to))}}return n}(i,r,s),l=function(e,t,i){if(e)for(var n,r=0;r<e.length;++r){var o=e[r],s=o.marker;if(null==o.to||(s.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==s.type&&(!i||o.marker.insertLeft)){var a=null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t);(n||(n=[])).push(new _n(s,a?null:o.from-t,null==o.to?null:o.to-t))}}return n}(n,o,s),c=1==t.text.length,u=mo(t.text).length+(c?r:0);if(a)for(var d=0;d<a.length;++d){if(null==(p=a[d]).to)(h=Sn(l,p.marker))?c&&(p.to=null==h.to?null:h.to+u):p.to=r}if(l)for(d=0;d<l.length;++d){var p,h;if(null!=(p=l[d]).to&&(p.to+=u),null==p.from)(h=Sn(a,p.marker))||(p.from=u,c&&(a||(a=[])).push(p));else p.from+=u,c&&(a||(a=[])).push(p)}a&&(a=On(a)),l&&l!=a&&(l=On(l));var f=[a];if(!c){var m,g=t.text.length-2;if(g>0&&a)for(d=0;d<a.length;++d)null==a[d].to&&(m||(m=[])).push(new _n(a[d].marker,null,null));for(d=0;d<g;++d)f.push(m);f.push(l)}return f}function On(e){for(var t=0;t<e.length;++t){var i=e[t];null!=i.from&&i.from==i.to&&!1!==i.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Ln(e,t){var i=function(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var n=0,r=[];n<t.text.length;++n)r.push(Nr(i[n]));return r}(e,t),n=Tn(e,t);if(!i)return n;if(!n)return i;for(var r=0;r<i.length;++r){var o=i[r],s=n[r];if(o&&s)e:for(var a=0;a<s.length;++a){for(var l=s[a],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else s&&(i[r]=s)}return i}function $n(e){var t=e.markedSpans;if(t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function Dn(e,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function In(e){return e.inclusiveLeft?-1:0}function An(e){return e.inclusiveRight?1:0}function zn(e,t){var i=e.lines.length-t.lines.length;if(0!=i)return i;var n=e.find(),r=t.find(),o=fe(n.from,r.from)||In(e)-In(t);if(o)return-o;var s=fe(n.to,r.to)||An(e)-An(t);return s||t.id-e.id}function Nn(e,t){var i,n=C&&e.markedSpans;if(n)for(var r,o=0;o<n.length;++o)(r=n[o]).marker.collapsed&&null==(t?r.from:r.to)&&(!i||zn(i,r.marker)<0)&&(i=r.marker);return i}function Pn(e){return Nn(e,!0)}function En(e){return Nn(e,!1)}function Fn(e,t,i,n,r){var o=xr(e,t),s=C&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var c=l.marker.find(0),u=fe(c.from,i)||In(l.marker)-In(r),d=fe(c.to,n)||An(l.marker)-An(r);if(!(u>=0&&d<=0||u<=0&&d>=0)&&(u<=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?fe(c.to,i)>=0:fe(c.to,i)>0)||u>=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?fe(c.from,n)<=0:fe(c.from,n)<0)))return!0}}}function Hn(e){for(var t;t=Pn(e);)e=t.find(-1,!0).line;return e}function Wn(e,t){var i=xr(e,t),n=Hn(i);return i==n?t:Sr(n)}function Rn(e,t){if(t>e.lastLine())return t;var i,n=xr(e,t);if(!jn(e,n))return t;for(;i=En(n);)n=i.find(1,!0).line;return Sr(n)+1}function jn(e,t){var i=C&&t.markedSpans;if(i)for(var n,r=0;r<i.length;++r)if((n=i[r]).marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&Bn(e,t,n))return!0}}function Bn(e,t,i){if(null==i.to){var n=i.marker.find(1,!0);return Bn(e,n.line,Sn(n.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var r,o=0;o<t.markedSpans.length;++o)if((r=t.markedSpans[o]).marker.collapsed&&!r.marker.widgetNode&&r.from==i.to&&(null==r.to||r.to!=i.from)&&(r.marker.inclusiveLeft||i.marker.inclusiveRight)&&Bn(e,t,r))return!0}no(xn),xn.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Qr(this,"clear")}},xn.prototype.find=function(e,t){return this.primary.find(e,t)};var qn=_.LineWidget=function(e,t,i){if(i)for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n]);this.doc=e,this.node=t};function Vn(e,t,i){Tr(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&qi(e,null,i)}function Kn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Ao(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),Io(t.display.measure,$o("div",[e.node],null,i))}return e.height=e.node.parentNode.offsetHeight}no(qn),qn.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,n=Sr(i);if(null!=n&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(i.widgets=null);var o=Kn(this);_r(i,Math.max(0,i.height-o)),e&&Gt(e,function(){Vn(e,i,-o),ti(e,n,"widget")})}},qn.prototype.changed=function(){var e=this.height,t=this.doc.cm,i=this.line;this.height=null;var n=Kn(this)-e;n&&(_r(i,i.height+n),t&&Gt(t,function(){t.curOp.forceUpdate=!0,Vn(t,i,n)}))};var Un=_.Line=function(e,t,i){this.text=e,Dn(this,t),this.height=i?i(this):1};function Gn(e){e.parent=null,$n(e)}function Yn(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var n=i[1]?"bgClass":"textClass";null==t[n]?t[n]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+i[2])}return e}function Xn(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var i=_.innerMode(e,t);return i.mode.blankLine?i.mode.blankLine(i.state):void 0}}function Zn(e,t,i,n){for(var r=0;r<10;r++){n&&(n[0]=_.innerMode(e,i).mode);var o=e.token(t,i);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}function Qn(e,t,i,n){function r(e){return{start:d.start,end:d.pos,string:d.current(),type:o||null,state:e?ln(s.mode,u):u}}var o,s=e.doc,a=s.mode;t=Ee(s,t);var l,c=xr(s,t.line),u=at(e,t.line,i),d=new vn(c.text,e.options.tabSize);for(n&&(l=[]);(n||d.pos<t.ch)&&!d.eol();)d.start=d.pos,o=Zn(a,d,u),n&&l.push(r(!0));return n?l:r()}function Jn(e,t,i,n,r,o,s){var a=i.flattenSpans;null==a&&(a=e.options.flattenSpans);var l,c=0,u=null,d=new vn(t,e.options.tabSize),p=e.options.addModeClass&&[null];for(""==t&&Yn(Xn(i,n),o);!d.eol();){if(d.pos>e.options.maxHighlightLength?(a=!1,s&&ir(e,t,n,d.pos),d.pos=t.length,l=null):l=Yn(Zn(i,d,n,p),o),p){var h=p[0].name;h&&(l="m-"+(l?h+" "+l:h))}if(!a||u!=l){for(;c<d.start;)r(c=Math.min(d.start,c+5e3),u);u=l}d.start=d.pos}for(;c<d.pos;){var f=Math.min(d.pos,c+5e3);r(f,u),c=f}}function er(e,t,i,n){var r=[e.state.modeGen],o={};Jn(e,t.text,e.doc.mode,i,function(e,t){r.push(e,t)},o,n);for(var s=0;s<e.state.overlays.length;++s){var a=e.state.overlays[s],l=1,c=0;Jn(e,t.text,a.mode,!0,function(e,t){for(var i=l;c<e;){var n=r[l];n>e&&r.splice(l,1,e,r[l+1],n),l+=2,c=Math.min(e,n)}if(t)if(a.opaque)r.splice(i,l-i,e,"cm-overlay "+t),l=i+2;else for(;i<l;i+=2){var o=r[i+1];r[i+1]=(o?o+" ":"")+"cm-overlay "+t}},o)}return{styles:r,classes:o.bgClass||o.textClass?o:null}}function tr(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=at(e,Sr(t)),r=er(e,t,t.text.length>e.options.maxHighlightLength?ln(e.doc.mode,n):n);t.stateAfter=n,t.styles=r.styles,r.classes?t.styleClasses=r.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.frontier&&e.doc.frontier++}return t.styles}function ir(e,t,i,n){var r=e.doc.mode,o=new vn(t,e.options.tabSize);for(o.start=o.pos=n||0,""==t&&Xn(r,i);!o.eol();)Zn(r,o,i),o.start=o.pos}no(Un),Un.prototype.lineNo=function(){return Sr(this)};var nr={},rr={};function or(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?rr:nr;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function sr(e,t){var i=$o("span",null,null,a?"padding-right: .1px":null),n={pre:$o("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:(o||a)&&e.getOption("lineWrapping")};t.measure={};for(var r=0;r<=(t.rest?t.rest.length:0);r++){var s,l=r?t.rest[r-1]:t.line;n.pos=0,n.addToken=ar,Vo(e.display.measure)&&(s=Or(l))&&(n.addToken=lr(n.addToken,s)),n.map=[],ur(l,n,tr(e,l,t!=e.display.externalMeasured&&Sr(l))),l.styleClasses&&(l.styleClasses.bgClass&&(n.bgClass=Fo(l.styleClasses.bgClass,n.bgClass||"")),l.styleClasses.textClass&&(n.textClass=Fo(l.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(qo(e.display.measure))),0==r?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(a){var c=n.content.lastChild;(/\bcm-tab\b/.test(c.className)||c.querySelector&&c.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")}return Xr(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=Fo(n.pre.className,n.textClass||"")),n}function ar(e,t,i,n,r,a,l){if(t){var c=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var i=t,n="",r=0;r<e.length;r++){var o=e.charAt(r);" "!=o||!i||r!=e.length-1&&32!=e.charCodeAt(r+1)||(o=" "),n+=o,i=" "==o}return n}(t,e.trailingSpace):t,u=e.cm.state.specialChars,d=!1;if(u.test(t)){y=document.createDocumentFragment();for(var p=0;;){u.lastIndex=p;var h=u.exec(t),f=h?h.index-p:t.length-p;if(f){var m=document.createTextNode(c.slice(p,p+f));o&&s<9?y.appendChild($o("span",[m])):y.appendChild(m),e.map.push(e.pos,e.pos+f,m),e.col+=f,e.pos+=f}if(!h)break;if(p+=f+1,"\t"==h[0]){var g=e.cm.options.tabSize,v=g-e.col%g;(m=y.appendChild($o("span",fo(v),"cm-tab"))).setAttribute("role","presentation"),m.setAttribute("cm-text","\t"),e.col+=v}else if("\r"==h[0]||"\n"==h[0]){(m=y.appendChild($o("span","\r"==h[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",h[0]),e.col+=1}else{(m=e.cm.options.specialCharPlaceholder(h[0])).setAttribute("cm-text",h[0]),o&&s<9?y.appendChild($o("span",[m])):y.appendChild(m),e.col+=1}e.map.push(e.pos,e.pos+1,m),e.pos++}}else{e.col+=t.length;var y=document.createTextNode(c);e.map.push(e.pos,e.pos+t.length,y),o&&s<9&&(d=!0),e.pos+=t.length}if(e.trailingSpace=32==c.charCodeAt(t.length-1),i||n||r||d||l){var b=i||"";n&&(b+=n),r&&(b+=r);var w=$o("span",[y],b,l);return a&&(w.title=a),e.content.appendChild(w)}e.content.appendChild(y)}}function lr(e,t){return function(i,n,r,o,s,a,l){r=r?r+" cm-force-border":"cm-force-border";for(var c=i.pos,u=c+n.length;;){for(var d=0;d<t.length;d++){var p=t[d];if(p.to>c&&p.from<=c)break}if(p.to>=u)return e(i,n,r,o,s,a,l);e(i,n.slice(0,p.to-c),r,o,null,a,l),o=null,n=n.slice(p.to-c),c=p.to}}}function cr(e,t,i,n){var r=!n&&i.widgetNode;r&&e.map.push(e.pos,e.pos+t,r),!n&&e.cm.display.input.needsContentAttribute&&(r||(r=e.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",i.id)),r&&(e.cm.display.input.setUneditable(r),e.content.appendChild(r)),e.pos+=t,e.trailingSpace=!1}function ur(e,t,i){var n=e.markedSpans,r=e.text,o=0;if(n)for(var s,a,l,c,u,d,p,h=r.length,f=0,m=(S=1,""),g=0;;){if(g==f){l=c=u=d=a="",p=null,g=1/0;for(var v,y=[],b=0;b<n.length;++b){var w=n[b],x=w.marker;"bookmark"==x.type&&w.from==f&&x.widgetNode?y.push(x):w.from<=f&&(null==w.to||w.to>f||x.collapsed&&w.to==f&&w.from==f)?(null!=w.to&&w.to!=f&&g>w.to&&(g=w.to,c=""),x.className&&(l+=" "+x.className),x.css&&(a=(a?a+";":"")+x.css),x.startStyle&&w.from==f&&(u+=" "+x.startStyle),x.endStyle&&w.to==g&&(v||(v=[])).push(x.endStyle,w.to),x.title&&!d&&(d=x.title),x.collapsed&&(!p||zn(p.marker,x)<0)&&(p=w)):w.from>f&&g>w.from&&(g=w.from)}if(v)for(b=0;b<v.length;b+=2)v[b+1]==g&&(c+=" "+v[b]);if(!p||p.from==f)for(b=0;b<y.length;++b)cr(t,0,y[b]);if(p&&(p.from||0)==f){if(cr(t,(null==p.to?h+1:p.to)-f,p.marker,null==p.from),null==p.to)return;p.to==f&&(p=!1)}}if(f>=h)break;for(var k=Math.min(h,g);;){if(m){var C=f+m.length;if(!p){var _=C>k?m.slice(0,k-f):m;t.addToken(t,_,s?s+l:l,u,f+_.length==g?c:"",d,a)}if(C>=k){m=m.slice(k-f),f=k;break}f=C,u=""}m=r.slice(o,o=i[S++]),s=or(i[S++],t.cm.options)}}else for(var S=1;S<i.length;S+=2)t.addToken(t,r.slice(o,o=i[S]),or(i[S+1],t.cm.options))}function dr(e,t){return 0==t.from.ch&&0==t.to.ch&&""==mo(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function pr(e,t,i,n){function r(e){return i?i[e]:null}function o(e,i,r){!function(e,t,i,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),$n(e),Dn(e,i);var r=n?n(e):1;r!=e.height&&_r(e,r)}(e,i,r,n),Qr(e,"change",e,t)}function s(e,t){for(var i=e,o=[];i<t;++i)o.push(new Un(c[i],r(i),n));return o}var a=t.from,l=t.to,c=t.text,u=xr(e,a.line),d=xr(e,l.line),p=mo(c),h=r(c.length-1),f=l.line-a.line;if(t.full)e.insert(0,s(0,c.length)),e.remove(c.length,e.size-c.length);else if(dr(e,t)){var m=s(0,c.length-1);o(d,d.text,h),f&&e.remove(a.line,f),m.length&&e.insert(a.line,m)}else if(u==d){if(1==c.length)o(u,u.text.slice(0,a.ch)+p+u.text.slice(l.ch),h);else(m=s(1,c.length-1)).push(new Un(p+u.text.slice(l.ch),h,n)),o(u,u.text.slice(0,a.ch)+c[0],r(0)),e.insert(a.line+1,m)}else if(1==c.length)o(u,u.text.slice(0,a.ch)+c[0]+d.text.slice(l.ch),r(0)),e.remove(a.line+1,f);else{o(u,u.text.slice(0,a.ch)+c[0],r(0)),o(d,p+d.text.slice(l.ch),h);m=s(1,c.length-1);f>1&&e.remove(a.line+1,f-1),e.insert(a.line+1,m)}Qr(e,"change",e,t)}function hr(e){this.lines=e,this.parent=null;for(var t=0,i=0;t<e.length;++t)e[t].parent=this,i+=e[t].height;this.height=i}function fr(e){this.children=e;for(var t=0,i=0,n=0;n<e.length;++n){var r=e[n];t+=r.chunkSize(),i+=r.height,r.parent=this}this.size=t,this.height=i,this.parent=null}hr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,n=e+t;i<n;++i){var r=this.lines[i];this.height-=r.height,Gn(r),Qr(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,i){for(var n=e+t;e<n;++e)if(i(this.lines[e]))return!0}},fr.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var n=this.children[i],r=n.chunkSize();if(e<r){var o=Math.min(t,r-e),s=n.height;if(n.removeInner(e,o),this.height-=s-n.height,r==o&&(this.children.splice(i--,1),n.parent=null),0==(t-=o))break;e=0}else e-=r}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof hr))){var a=[];this.collapse(a),this.children=[new hr(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var n=0;n<this.children.length;++n){var r=this.children[n],o=r.chunkSize();if(e<=o){if(r.insertInner(e,t,i),r.lines&&r.lines.length>50){for(var s=r.lines.length%25+25,a=s;a<r.lines.length;){var l=new hr(r.lines.slice(a,a+=25));r.height-=l.height,this.children.splice(++n,0,l),l.parent=this}r.lines=r.lines.slice(0,s),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new fr(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var i=vo(e.parent.children,e);e.parent.children.splice(i+1,0,t)}else{var n=new fr(e.children);n.parent=e,e.children=[n,t],e=n}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var n=0;n<this.children.length;++n){var r=this.children[n],o=r.chunkSize();if(e<o){var s=Math.min(t,o-e);if(r.iterN(e,s,i))return!0;if(0==(t-=s))break;e=0}else e-=o}}};var mr=0,gr=_.Doc=function(e,t,i,n){if(!(this instanceof gr))return new gr(e,t,i,n);null==i&&(i=0),fr.call(this,[new hr([new Un("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=i;var r=he(i,0);this.sel=Ne(r),this.history=new Lr(null),this.id=++mr,this.modeOption=t,this.lineSep=n,this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),pr(this,{from:r,to:r,text:e}),Ke(this,Ne(r),so)};gr.prototype=wo(fr.prototype,{constructor:gr,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,n=0;n<t.length;++n)i+=t[n].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Cr(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Zt(function(e){var t=he(this.first,0),i=this.first+this.size-1;Ei(this,{from:t,to:he(i,xr(this,i).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),Ke(this,Ne(t))}),replaceRange:function(e,t,i,n){ji(this,e,t=Ee(this,t),i=i?Ee(this,i):t,n)},getRange:function(e,t,i){var n=kr(this,Ee(this,e),Ee(this,t));return!1===i?n:n.join(i||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Fe(this,e))return xr(this,e)},getLineNumber:function(e){return Sr(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=xr(this,e)),Hn(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Ee(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Zt(function(e,t,i){qe(this,Ee(this,"number"==typeof e?he(e,t||0):e),null,i)}),setSelection:Zt(function(e,t,i){qe(this,Ee(this,e),Ee(this,t||e),i)}),extendSelection:Zt(function(e,t,i){Re(this,Ee(this,e),t&&Ee(this,t),i)}),extendSelections:Zt(function(e,t){je(this,He(this,e),t)}),extendSelectionsBy:Zt(function(e,t){je(this,He(this,yo(this.sel.ranges,e)),t)}),setSelections:Zt(function(e,t,i){if(e.length){for(var n=0,r=[];n<e.length;n++)r[n]=new Ae(Ee(this,e[n].anchor),Ee(this,e[n].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Ke(this,ze(r,t),i)}}),addSelection:Zt(function(e,t,i){var n=this.sel.ranges.slice(0);n.push(new Ae(Ee(this,e),Ee(this,t||e))),Ke(this,ze(n,n.length-1),i)}),getSelection:function(e){for(var t,i=this.sel.ranges,n=0;n<i.length;n++){var r=kr(this,i[n].from(),i[n].to());t=t?t.concat(r):r}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],i=this.sel.ranges,n=0;n<i.length;n++){var r=kr(this,i[n].from(),i[n].to());!1!==e&&(r=r.join(e||this.lineSeparator())),t[n]=r}return t},replaceSelection:function(e,t,i){for(var n=[],r=0;r<this.sel.ranges.length;r++)n[r]=e;this.replaceSelections(n,t,i||"+input")},replaceSelections:Zt(function(e,t,i){for(var n=[],r=this.sel,o=0;o<r.ranges.length;o++){var s=r.ranges[o];n[o]={from:s.from(),to:s.to(),text:this.splitLines(e[o]),origin:i}}var a=t&&"end"!=t&&function(e,t,i){for(var n=[],r=he(e.first,0),o=r,s=0;s<t.length;s++){var a=t[s],l=Ni(a.from,r,o),c=Ni(Ii(a),r,o);if(r=a.to,o=c,"around"==i){var u=e.sel.ranges[s],d=fe(u.head,u.anchor)<0;n[s]=new Ae(d?c:l,d?l:c)}else n[s]=new Ae(l,l)}return new Ie(n,e.sel.primIndex)}(this,n,t);for(o=n.length-1;o>=0;o--)Ei(this,n[o]);a?Ve(this,a):this.cm&&Vi(this.cm)}),undo:Zt(function(){Hi(this,"undo")}),redo:Zt(function(){Hi(this,"redo")}),undoSelection:Zt(function(){Hi(this,"undo",!0)}),redoSelection:Zt(function(){Hi(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(n=0;n<e.undone.length;n++)e.undone[n].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){this.history=new Lr(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Pr(this.history.done),undone:Pr(this.history.undone)}},setHistory:function(e){var t=this.history=new Lr(this.history.maxGeneration);t.done=Pr(e.done.slice(0),null,!0),t.undone=Pr(e.undone.slice(0),null,!0)},addLineClass:Zt(function(e,t,i){return Gi(this,e,"gutter"==t?"gutter":"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[n]){if(No(i).test(e[n]))return!1;e[n]+=" "+i}else e[n]=i;return!0})}),removeLineClass:Zt(function(e,t,i){return Gi(this,e,"gutter"==t?"gutter":"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",r=e[n];if(!r)return!1;if(null==i)e[n]=null;else{var o=r.match(No(i));if(!o)return!1;var s=o.index+o[0].length;e[n]=r.slice(0,o.index)+(o.index&&s!=r.length?" ":"")+r.slice(s)||null}return!0})}),addLineWidget:Zt(function(e,t,i){return function(e,t,i,n){var r=new qn(e,i,n),o=e.cm;return o&&r.noHScroll&&(o.display.alignWidgets=!0),Gi(e,t,"widget",function(t){var i=t.widgets||(t.widgets=[]);if(null==r.insertAt?i.push(r):i.splice(Math.min(i.length-1,Math.max(0,r.insertAt)),0,r),r.line=t,o&&!jn(e,t)){var n=Tr(t)<e.scrollTop;_r(t,t.height+Kn(r)),n&&qi(o,null,r.height),o.curOp.forceUpdate=!0}return!0}),r}(this,e,t,i)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return wn(this,Ee(this,e),Ee(this,t),i,i&&i.type||"range")},setBookmark:function(e,t){var i={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return wn(this,e=Ee(this,e),e,i,"bookmark")},findMarksAt:function(e){var t=[],i=xr(this,(e=Ee(this,e)).line).markedSpans;if(i)for(var n=0;n<i.length;++n){var r=i[n];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(e,t,i){e=Ee(this,e),t=Ee(this,t);var n=[],r=e.line;return this.iter(e.line,t.line+1,function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var l=s[a];null!=l.to&&r==e.line&&e.ch>=l.to||null==l.from&&r!=e.line||null!=l.from&&r==t.line&&l.from>=t.ch||i&&!i(l.marker)||n.push(l.marker.parent||l.marker)}++r}),n},getAllMarks:function(){var e=[];return this.iter(function(t){var i=t.markedSpans;if(i)for(var n=0;n<i.length;++n)null!=i[n].from&&e.push(i[n].marker)}),e},posFromIndex:function(e){var t,i=this.first,n=this.lineSeparator().length;return this.iter(function(r){var o=r.text.length+n;if(o>e)return t=e,!0;e-=o,++i}),Ee(this,he(i,t))},indexFromPos:function(e){var t=(e=Ee(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var i=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+i}),t},copy:function(e){var t=new gr(Cr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<i&&(i=e.to);var n=new gr(Cr(this,t,i),e.mode||this.modeOption,t,this.lineSep);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var i=0;i<t.length;i++){var n=t[i],r=n.find(),o=e.clipPos(r.from),s=e.clipPos(r.to);if(fe(o,s)){var a=wn(e,o,s,n.primary,n.primary.type);n.markers.push(a),a.parent=n}}}(n,kn(this)),n},unlinkDoc:function(e){if(e instanceof _&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Cn(kn(this));break}}if(e.history==this.history){var i=[e.id];br(e,function(e){i.push(e.id)},!0),e.history=new Lr(null),e.history.done=Pr(this.history.done,i),e.history.undone=Pr(this.history.undone,i)}},iterLinkedDocs:function(e){br(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Uo(e)},lineSeparator:function(){return this.lineSep||"\n"}}),gr.prototype.eachLine=gr.prototype.iter;var vr="iter insert remove copy getEditor constructor".split(" ");for(var yr in gr.prototype)gr.prototype.hasOwnProperty(yr)&&vo(vr,yr)<0&&(_.prototype[yr]=function(e){return function(){return e.apply(this.doc,arguments)}}(gr.prototype[yr]));function br(e,t,i){!function e(n,r,o){if(n.linked)for(var s=0;s<n.linked.length;++s){var a=n.linked[s];if(a.doc!=r){var l=o&&a.sharedHist;i&&!l||(t(a.doc,l),e(a.doc,n,l))}}}(e,null,!0)}function wr(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,L(e),M(e),e.options.lineWrapping||N(e),e.options.mode=t.modeOption,ei(e)}function xr(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var n=0;;++n){var r=i.children[n],o=r.chunkSize();if(t<o){i=r;break}t-=o}return i.lines[t]}function kr(e,t,i){var n=[],r=t.line;return e.iter(t.line,i.line+1,function(e){var o=e.text;r==i.line&&(o=o.slice(0,i.ch)),r==t.line&&(o=o.slice(t.ch)),n.push(o),++r}),n}function Cr(e,t,i){var n=[];return e.iter(t,i,function(e){n.push(e.text)}),n}function _r(e,t){var i=t-e.height;if(i)for(var n=e;n;n=n.parent)n.height+=i}function Sr(e){if(null==e.parent)return null;for(var t=e.parent,i=vo(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var r=0;n.children[r]!=t;++r)i+=n.children[r].chunkSize();return i+t.first}function Mr(e,t){var i=e.first;e:do{for(var n=0;n<e.children.length;++n){var r=e.children[n],o=r.height;if(t<o){e=r;continue e}t-=o,i+=r.chunkSize()}return i}while(!e.lines);for(n=0;n<e.lines.length;++n){var s=e.lines[n].height;if(t<s)break;t-=s}return i+n}function Tr(e){for(var t=0,i=(e=Hn(e)).parent,n=0;n<i.lines.length;++n){var r=i.lines[n];if(r==e)break;t+=r.height}for(var o=i.parent;o;o=(i=o).parent)for(n=0;n<o.children.length;++n){var s=o.children[n];if(s==i)break;t+=s.height}return t}function Or(e){var t=e.order;return null==t&&(t=e.order=us(e.text)),t}function Lr(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function $r(e,t){var i={from:me(t.from),to:Ii(t),text:kr(e,t.from,t.to)};return zr(e,i,t.from.line,t.to.line+1),br(e,function(e){zr(e,i,t.from.line,t.to.line+1)},!0),i}function Dr(e){for(;e.length;){if(!mo(e).ranges)break;e.pop()}}function Ir(e,t,i,n){var r=e.history;r.undone.length=0;var o,s=+new Date;if((r.lastOp==n||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&r.lastModTime>s-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=function(e,t){return t?(Dr(e.done),mo(e.done)):e.done.length&&!mo(e.done).ranges?mo(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),mo(e.done)):void 0}(r,r.lastOp==n))){var a=mo(o.changes);0==fe(t.from,t.to)&&0==fe(t.from,a.to)?a.to=Ii(t):o.changes.push($r(e,t))}else{var l=mo(r.done);for(l&&l.ranges||Ar(e.sel,r.done),o={changes:[$r(e,t)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(i),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=s,r.lastOp=r.lastSelOp=n,r.lastOrigin=r.lastSelOrigin=t.origin,a||Xr(e,"historyAdded")}function Ar(e,t){var i=mo(t);i&&i.ranges&&i.equals(e)||t.push(e)}function zr(e,t,i,n){var r=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,n),function(i){i.markedSpans&&((r||(r=t["spans_"+e.id]={}))[o]=i.markedSpans),++o})}function Nr(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function Pr(e,t,i){for(var n=0,r=[];n<e.length;++n){var o=e[n];if(o.ranges)r.push(i?Ie.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];r.push({changes:a});for(var l=0;l<s.length;++l){var c,u=s[l];if(a.push({from:u.from,to:u.to,text:u.text}),t)for(var d in u)(c=d.match(/^spans_(\d+)$/))&&vo(t,Number(c[1]))>-1&&(mo(a)[d]=u[d],delete u[d])}}}return r}function Er(e,t,i,n){i<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function Fr(e,t,i,n){for(var r=0;r<e.length;++r){var o=e[r],s=!0;if(o.ranges){o.copied||((o=e[r]=o.deepCopy()).copied=!0);for(var a=0;a<o.ranges.length;a++)Er(o.ranges[a].anchor,t,i,n),Er(o.ranges[a].head,t,i,n)}else{for(a=0;a<o.changes.length;++a){var l=o.changes[a];if(i<l.from.line)l.from=he(l.from.line+n,l.from.ch),l.to=he(l.to.line+n,l.to.ch);else if(t<=l.to.line){s=!1;break}}s||(e.splice(0,r+1),r=0)}}}function Hr(e,t){var i=t.from.line,n=t.to.line,r=t.text.length-(n-i)-1;Fr(e.done,i,n,r),Fr(e.undone,i,n,r)}no(gr);var Wr=_.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Rr=_.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0};function jr(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}var Br=_.e_stop=function(e){Wr(e),Rr(e)};function qr(e){return e.target||e.srcElement}function Vr(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),g&&e.ctrlKey&&1==t&&(t=3),t}var Kr=_.on=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var n=e._handlers||(e._handlers={});(n[t]||(n[t]=[])).push(i)}},Ur=[];function Gr(e,t,i){var n=e._handlers&&e._handlers[t];return i?n&&n.length>0?n.slice():Ur:n||Ur}var Yr=_.off=function(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else for(var n=Gr(e,t,!1),r=0;r<n.length;++r)if(n[r]==i){n.splice(r,1);break}},Xr=_.signal=function(e,t){var i=Gr(e,t,!0);if(i.length)for(var n=Array.prototype.slice.call(arguments,2),r=0;r<i.length;++r)i[r].apply(null,n)},Zr=null;function Qr(e,t){var i=Gr(e,t,!1);if(i.length){var n,r=Array.prototype.slice.call(arguments,2);Wt?n=Wt.delayedCallbacks:Zr?n=Zr:(n=Zr=[],setTimeout(Jr,0));for(var o=0;o<i.length;++o)n.push(s(i[o]))}function s(e){return function(){e.apply(null,r)}}}function Jr(){var e=Zr;Zr=null;for(var t=0;t<e.length;++t)e[t]()}function eo(e,t,i){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Xr(e,i||t.type,e,t),jr(t)||t.codemirrorIgnore}function to(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==vo(i,t[n])&&i.push(t[n])}function io(e,t){return Gr(e,t).length>0}function no(e){e.prototype.on=function(e,t){Kr(this,e,t)},e.prototype.off=function(e,t){Yr(this,e,t)}}var ro=30,oo=_.Pass={toString:function(){return"CodeMirror.Pass"}},so={scroll:!1},ao={origin:"*mouse"},lo={origin:"+move"};function co(){this.id=null}co.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var uo=_.countColumn=function(e,t,i,n,r){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=n||0,s=r||0;;){var a=e.indexOf("\t",o);if(a<0||a>=t)return s+(t-o);s+=a-o,s+=i-s%i,o=a+1}},po=_.findColumn=function(e,t,i){for(var n=0,r=0;;){var o=e.indexOf("\t",n);-1==o&&(o=e.length);var s=o-n;if(o==e.length||r+s>=t)return n+Math.min(s,t-r);if(r+=o-n,n=o+1,(r+=i-r%i)>=t)return n}},ho=[""];function fo(e){for(;ho.length<=e;)ho.push(mo(ho)+" ");return ho[e]}function mo(e){return e[e.length-1]}var go=function(e){e.select()};function vo(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}function yo(e,t){for(var i=[],n=0;n<e.length;n++)i[n]=t(e[n],n);return i}function bo(){}function wo(e,t){var i;return Object.create?i=Object.create(e):(bo.prototype=e,i=new bo),t&&xo(t,i),i}function xo(e,t,i){for(var n in t||(t={}),e)!e.hasOwnProperty(n)||!1===i&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function ko(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}f?go=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:o&&(go=function(e){try{e.select()}catch(e){}});var Co=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,_o=_.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Co.test(e))};function So(e,t){return t?!!(t.source.indexOf("\\w")>-1&&_o(e))||t.test(e):_o(e)}function Mo(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var To,Oo=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Lo(e){return e.charCodeAt(0)>=768&&Oo.test(e)}function $o(e,t,i,n){var r=document.createElement(e);if(i&&(r.className=i),n&&(r.style.cssText=n),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)r.appendChild(t[o]);return r}function Do(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function Io(e,t){return Do(e).appendChild(t)}To=document.createRange?function(e,t,i,n){var r=document.createRange();return r.setEnd(n||e,i),r.setStart(e,t),r}:function(e,t,i){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(e){return n}return n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",t),n};var Ao=_.contains=function(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)};function zo(){for(var e=document.activeElement;e&&e.root&&e.root.activeElement;)e=e.root.activeElement;return e}function No(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}o&&s<11&&(zo=function(){try{return document.activeElement}catch(e){return document.body}});var Po=_.rmClass=function(e,t){var i=e.className,n=No(t).exec(i);if(n){var r=i.slice(n.index+n[0].length);e.className=i.slice(0,n.index)+(r?n[1]+r:"")}},Eo=_.addClass=function(e,t){var i=e.className;No(t).test(i)||(e.className+=(i?" ":"")+t)};function Fo(e,t){for(var i=e.split(" "),n=0;n<i.length;n++)i[n]&&!No(i[n]).test(t)&&(t+=" "+i[n]);return t}function Ho(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),i=0;i<t.length;i++){var n=t[i].CodeMirror;n&&e(n)}}var Wo=!1;var Ro,jo,Bo=function(){if(o&&s<9)return!1;var e=$o("div");return"draggable"in e||"dragDrop"in e}();function qo(e){if(null==Ro){var t=$o("span","​");Io(e,$o("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Ro=t.offsetWidth<=1&&t.offsetHeight>2&&!(o&&s<8))}var i=Ro?$o("span","​"):$o("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}function Vo(e){if(null!=jo)return jo;var t=Io(e,document.createTextNode("AخA")),i=To(t,0,1).getBoundingClientRect(),n=To(t,1,2).getBoundingClientRect();return Do(e),!(!i||i.left==i.right)&&(jo=n.right-i.right<3)}var Ko,Uo=_.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,i=[],n=e.length;t<=n;){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var o=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),s=o.indexOf("\r");-1!=s?(i.push(o.slice(0,s)),t+=s+1):(i.push(o),t=r+1)}return i}:function(e){return e.split(/\r\n?|\n/)},Go=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Yo="oncopy"in(Ko=$o("div"))||(Ko.setAttribute("oncopy","return;"),"function"==typeof Ko.oncopy),Xo=null;var Zo,Qo=_.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};function Jo(e){return e.level%2?e.to:e.from}function es(e){return e.level%2?e.from:e.to}function ts(e){var t=Or(e);return t?Jo(t[0]):0}function is(e){var t=Or(e);return t?es(mo(t)):e.text.length}function ns(e,t){var i=xr(e.doc,t),n=Hn(i);n!=i&&(t=Sr(n));var r=Or(n),o=r?r[0].level%2?is(n):ts(n):0;return he(t,o)}function rs(e,t){var i=ns(e,t.line),n=xr(e.doc,i.line),r=Or(n);if(!r||0==r[0].level){var o=Math.max(0,n.text.search(/\S/)),s=t.line==i.line&&t.ch<=o&&t.ch;return he(i.line,s?0:o)}return i}function os(e,t,i){var n=e[0].level;return t==n||i!=n&&t<i}function ss(e,t){Zo=null;for(var i,n=0;n<e.length;++n){var r=e[n];if(r.from<t&&r.to>t)return n;if(r.from==t||r.to==t){if(null!=i)return os(e,r.level,e[i].level)?(r.from!=r.to&&(Zo=i),n):(r.from!=r.to&&(Zo=n),i);i=n}}return i}function as(e,t,i,n){if(!n)return t+i;do{t+=i}while(t>0&&Lo(e.text.charAt(t)));return t}function ls(e,t,i,n){var r=Or(e);if(!r)return cs(e,t,i,n);for(var o=ss(r,t),s=r[o],a=as(e,t,s.level%2?-i:i,n);;){if(a>s.from&&a<s.to)return a;if(a==s.from||a==s.to)return ss(r,a)==o?a:i>0==(s=r[o+=i]).level%2?s.to:s.from;if(!(s=r[o+=i]))return null;a=i>0==s.level%2?as(e,s.to,-1,n):as(e,s.from,1,n)}}function cs(e,t,i,n){var r=t+i;if(n)for(;r>0&&Lo(e.text.charAt(r));)r+=i;return r<0||r>e.text.length?null:r}!function(){for(var e=0;e<10;e++)Qo[e+48]=Qo[e+96]=String(e);for(e=65;e<=90;e++)Qo[e]=String.fromCharCode(e);for(e=1;e<=12;e++)Qo[e+111]=Qo[e+63235]="F"+e}();var us=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,r=/[LRr]/,o=/[Lb1n]/,s=/[1n]/;function a(e,t,i){this.level=e,this.from=t,this.to=i}return function(l){if(!i.test(l))return!1;for(var c,u=l.length,d=[],p=0;p<u;++p)d.push(y=(c=l.charCodeAt(p))<=247?e.charAt(c):1424<=c&&c<=1524?"R":1536<=c&&c<=1773?t.charAt(c-1536):1774<=c&&c<=2220?"r":8192<=c&&c<=8203?"w":8204==c?"b":"L");p=0;for(var h="L";p<u;++p){"m"==(y=d[p])?d[p]=h:h=y}p=0;for(var f="L";p<u;++p){"1"==(y=d[p])&&"r"==f?d[p]="n":r.test(y)&&(f=y,"r"==y&&(d[p]="R"))}for(p=1,h=d[0];p<u-1;++p){"+"==(y=d[p])&&"1"==h&&"1"==d[p+1]?d[p]="1":","!=y||h!=d[p+1]||"1"!=h&&"n"!=h||(d[p]=h),h=y}for(p=0;p<u;++p){if(","==(y=d[p]))d[p]="N";else if("%"==y){for(var m=p+1;m<u&&"%"==d[m];++m);for(var g=p&&"!"==d[p-1]||m<u&&"1"==d[m]?"1":"N",v=p;v<m;++v)d[v]=g;p=m-1}}for(p=0,f="L";p<u;++p){var y=d[p];"L"==f&&"1"==y?d[p]="L":r.test(y)&&(f=y)}for(p=0;p<u;++p)if(n.test(d[p])){for(m=p+1;m<u&&n.test(d[m]);++m);var b="L"==(p?d[p-1]:"L"),w="L"==(m<u?d[m]:"L");for(g=b||w?"L":"R",v=p;v<m;++v)d[v]=g;p=m-1}var x,k=[];for(p=0;p<u;)if(o.test(d[p])){var C=p;for(++p;p<u&&o.test(d[p]);++p);k.push(new a(0,C,p))}else{var _=p,S=k.length;for(++p;p<u&&"L"!=d[p];++p);for(v=_;v<p;)if(s.test(d[v])){_<v&&k.splice(S,0,new a(1,_,v));var M=v;for(++v;v<p&&s.test(d[v]);++v);k.splice(S,0,new a(2,M,v)),_=v}else++v;_<p&&k.splice(S,0,new a(1,_,p))}return 1==k[0].level&&(x=l.match(/^\s+/))&&(k[0].from=x[0].length,k.unshift(new a(0,0,x[0].length))),1==mo(k).level&&(x=l.match(/\s+$/))&&(mo(k).to-=x[0].length,k.push(new a(0,u-x[0].length,u))),2==k[0].level&&k.unshift(new a(1,k[0].to,k[0].to)),k[0].level!=mo(k).level&&k.push(new a(k[0].level,u,u)),k}}();return _.version="5.19.0",_}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t={},i=0;i<e.length;++i)t[e[i]]=!0;return t}e.defineMode("css",function(t,i){var n=i.inline;i.propertyKeywords||(i=e.resolveMode("text/css"));var r,o,s=t.indentUnit,a=i.tokenHooks,l=i.documentTypes||{},c=i.mediaTypes||{},u=i.mediaFeatures||{},d=i.mediaValueKeywords||{},p=i.propertyKeywords||{},h=i.nonStandardPropertyKeywords||{},f=i.fontProperties||{},m=i.counterDescriptors||{},g=i.colorKeywords||{},v=i.valueKeywords||{},y=i.allowNested,b=!0===i.supportsAtComponent;function w(e,t){return r=t,e}function x(e){return function(t,i){for(var n,r=!1;null!=(n=t.next());){if(n==e&&!r){")"==e&&t.backUp(1);break}r=!r&&"\\"==n}return(n==e||!r&&")"!=e)&&(i.tokenize=null),w("string","string")}}function k(e,t){return e.next(),e.match(/\s*[\"\')]/,!1)?t.tokenize=null:t.tokenize=x(")"),w(null,"(")}function C(e,t,i){this.type=e,this.indent=t,this.prev=i}function _(e,t,i,n){return e.context=new C(i,t.indentation()+(!1===n?0:s),e.context),i}function S(e){return e.context.prev&&(e.context=e.context.prev),e.context.type}function M(e,t,i){return L[i.context.type](e,t,i)}function T(e,t,i,n){for(var r=n||1;r>0;r--)i.context=i.context.prev;return M(e,t,i)}function O(e){var t=e.current().toLowerCase();o=v.hasOwnProperty(t)?"atom":g.hasOwnProperty(t)?"keyword":"variable"}var L={top:function(e,t,i){if("{"==e)return _(i,t,"block");if("}"==e&&i.context.prev)return S(i);if(b&&/@component/.test(e))return _(i,t,"atComponentBlock");if(/^@(-moz-)?document$/.test(e))return _(i,t,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/.test(e))return _(i,t,"atBlock");if(/^@(font-face|counter-style)/.test(e))return i.stateArg=e,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return _(i,t,"at");if("hash"==e)o="builtin";else if("word"==e)o="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return _(i,t,"interpolation");if(":"==e)return"pseudo";if(y&&"("==e)return _(i,t,"parens")}return i.context.type},block:function(e,t,i){if("word"==e){var n=t.current().toLowerCase();return p.hasOwnProperty(n)?(o="property","maybeprop"):h.hasOwnProperty(n)?(o="string-2","maybeprop"):y?(o=t.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(o+=" error","maybeprop")}return"meta"==e?"block":y||"hash"!=e&&"qualifier"!=e?L.top(e,t,i):(o="error","block")},maybeprop:function(e,t,i){return":"==e?_(i,t,"prop"):M(e,t,i)},prop:function(e,t,i){if(";"==e)return S(i);if("{"==e&&y)return _(i,t,"propBlock");if("}"==e||"{"==e)return T(e,t,i);if("("==e)return _(i,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"==e)O(t);else if("interpolation"==e)return _(i,t,"interpolation")}else o+=" error";return"prop"},propBlock:function(e,t,i){return"}"==e?S(i):"word"==e?(o="property","maybeprop"):i.context.type},parens:function(e,t,i){return"{"==e||"}"==e?T(e,t,i):")"==e?S(i):"("==e?_(i,t,"parens"):"interpolation"==e?_(i,t,"interpolation"):("word"==e&&O(t),"parens")},pseudo:function(e,t,i){return"word"==e?(o="variable-3",i.context.type):M(e,t,i)},documentTypes:function(e,t,i){return"word"==e&&l.hasOwnProperty(t.current())?(o="tag",i.context.type):L.atBlock(e,t,i)},atBlock:function(e,t,i){if("("==e)return _(i,t,"atBlock_parens");if("}"==e||";"==e)return T(e,t,i);if("{"==e)return S(i)&&_(i,t,y?"block":"top");if("interpolation"==e)return _(i,t,"interpolation");if("word"==e){var n=t.current().toLowerCase();o="only"==n||"not"==n||"and"==n||"or"==n?"keyword":c.hasOwnProperty(n)?"attribute":u.hasOwnProperty(n)?"property":d.hasOwnProperty(n)?"keyword":p.hasOwnProperty(n)?"property":h.hasOwnProperty(n)?"string-2":v.hasOwnProperty(n)?"atom":g.hasOwnProperty(n)?"keyword":"error"}return i.context.type},atComponentBlock:function(e,t,i){return"}"==e?T(e,t,i):"{"==e?S(i)&&_(i,t,y?"block":"top",!1):("word"==e&&(o="error"),i.context.type)},atBlock_parens:function(e,t,i){return")"==e?S(i):"{"==e||"}"==e?T(e,t,i,2):L.atBlock(e,t,i)},restricted_atBlock_before:function(e,t,i){return"{"==e?_(i,t,"restricted_atBlock"):"word"==e&&"@counter-style"==i.stateArg?(o="variable","restricted_atBlock_before"):M(e,t,i)},restricted_atBlock:function(e,t,i){return"}"==e?(i.stateArg=null,S(i)):"word"==e?(o="@font-face"==i.stateArg&&!f.hasOwnProperty(t.current().toLowerCase())||"@counter-style"==i.stateArg&&!m.hasOwnProperty(t.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(e,t,i){return"word"==e?(o="variable","keyframes"):"{"==e?_(i,t,"top"):M(e,t,i)},at:function(e,t,i){return";"==e?S(i):"{"==e||"}"==e?T(e,t,i):("word"==e?o="tag":"hash"==e&&(o="builtin"),"at")},interpolation:function(e,t,i){return"}"==e?S(i):"{"==e||";"==e?T(e,t,i):("word"==e?o="variable":"variable"!=e&&"("!=e&&")"!=e&&(o="error"),"interpolation")}};return{startState:function(e){return{tokenize:null,state:n?"block":"top",stateArg:null,context:new C(n?"block":"top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var i=(t.tokenize||function(e,t){var i=e.next();if(a[i]){var n=a[i](e,t);if(!1!==n)return n}return"@"==i?(e.eatWhile(/[\w\\\-]/),w("def",e.current())):"="==i||("~"==i||"|"==i)&&e.eat("=")?w(null,"compare"):'"'==i||"'"==i?(t.tokenize=x(i),t.tokenize(e,t)):"#"==i?(e.eatWhile(/[\w\\\-]/),w("atom","hash")):"!"==i?(e.match(/^\s*\w*/),w("keyword","important")):/\d/.test(i)||"."==i&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),w("number","unit")):"-"!==i?/[,+>*\/]/.test(i)?w(null,"select-op"):"."==i&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?w("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(i)?w(null,i):"u"==i&&e.match(/rl(-prefix)?\(/)||"d"==i&&e.match("omain(")||"r"==i&&e.match("egexp(")?(e.backUp(1),t.tokenize=k,w("property","word")):/[\w\\\-]/.test(i)?(e.eatWhile(/[\w\\\-]/),w("property","word")):w(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),w("number","unit")):e.match(/^-[\w\\\-]+/)?(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?w("variable-2","variable-definition"):w("variable-2","variable")):e.match(/^\w+-/)?w("meta","meta"):void 0})(e,t);return i&&"object"==typeof i&&(r=i[1],i=i[0]),o=i,t.state=L[t.state](r,e,t),o},indent:function(e,t){var i=e.context,n=t&&t.charAt(0),r=i.indent;return"prop"!=i.type||"}"!=n&&")"!=n||(i=i.prev),i.prev&&("}"!=n||"block"!=i.type&&"top"!=i.type&&"interpolation"!=i.type&&"restricted_atBlock"!=i.type?(")"!=n||"parens"!=i.type&&"atBlock_parens"!=i.type)&&("{"!=n||"at"!=i.type&&"atBlock"!=i.type)||(r=Math.max(0,i.indent-s),i=i.prev):r=(i=i.prev).indent),r},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var i=["domain","regexp","url","url-prefix"],n=t(i),r=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],o=t(r),s=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover"],a=t(s),l=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive"],c=t(l),u=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],d=t(u),p=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],h=t(p),f=t(["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),m=t(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),g=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],v=t(g),y=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],b=t(y),w=i.concat(r).concat(s).concat(l).concat(u).concat(p).concat(g).concat(y);function x(e,t){for(var i,n=!1;null!=(i=e.next());){if(n&&"/"==i){t.tokenize=null;break}n="*"==i}return["comment","comment"]}e.registerHelper("hintWords","css",w),e.defineMIME("text/css",{documentTypes:n,mediaTypes:o,mediaFeatures:a,mediaValueKeywords:c,propertyKeywords:d,nonStandardPropertyKeywords:h,fontProperties:f,counterDescriptors:m,colorKeywords:v,valueKeywords:b,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=x,x(e,t))}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:o,mediaFeatures:a,mediaValueKeywords:c,propertyKeywords:d,nonStandardPropertyKeywords:h,colorKeywords:v,valueKeywords:b,fontProperties:f,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=x,x(e,t)):["operator","operator"]},":":function(e){return!!e.match(/\s*\{/)&&[null,"{"]},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:o,mediaFeatures:a,mediaValueKeywords:c,propertyKeywords:d,nonStandardPropertyKeywords:h,colorKeywords:v,valueKeywords:b,fontProperties:f,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=x,x(e,t)):["operator","operator"]},"@":function(e){return e.eat("{")?[null,"interpolation"]:!e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)&&(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),e.defineMIME("text/x-gss",{documentTypes:n,mediaTypes:o,mediaFeatures:a,propertyKeywords:d,nonStandardPropertyKeywords:h,fontProperties:f,counterDescriptors:m,colorKeywords:v,valueKeywords:b,supportsAtComponent:!0,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=x,x(e,t))}},name:"css",helperType:"gss"})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],e):e(CodeMirror)}(function(e){"use strict";var t={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};var i={};function n(e,t){var n=e.match(function(e){var t=i[e];return t||(i[e]=new RegExp("\\s+"+e+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}(t));return n?/^\s*(.*?)\s*$/.exec(n[2])[1]:""}function r(e,t){return new RegExp((t?"^":"")+"</s*"+e+"s*>","i")}function o(e,t){for(var i in e)for(var n=t[i]||(t[i]=[]),r=e[i],o=r.length-1;o>=0;o--)n.unshift(r[o])}e.defineMode("htmlmixed",function(i,s){var a=e.getMode(i,{name:"xml",htmlMode:!0,multilineTagIndentFactor:s.multilineTagIndentFactor,multilineTagIndentPastTag:s.multilineTagIndentPastTag}),l={},c=s&&s.tags,u=s&&s.scriptTypes;if(o(t,l),c&&o(c,l),u)for(var d=u.length-1;d>=0;d--)l.script.unshift(["type",u[d].matches,u[d].mode]);function p(t,o){var s,c=a.token(t,o.htmlState),u=/\btag\b/.test(c);if(u&&!/[<>\s\/]/.test(t.current())&&(s=o.htmlState.tagName&&o.htmlState.tagName.toLowerCase())&&l.hasOwnProperty(s))o.inTag=s+" ";else if(o.inTag&&u&&/>$/.test(t.current())){var d=/^([\S]+) (.*)/.exec(o.inTag);o.inTag=null;var h=">"==t.current()&&function(e,t){for(var i=0;i<e.length;i++){var r=e[i];if(!r[0]||r[1].test(n(t,r[0])))return r[2]}}(l[d[1]],d[2]),f=e.getMode(i,h),m=r(d[1],!0),g=r(d[1],!1);o.token=function(e,t){return e.match(m,!1)?(t.token=p,t.localState=t.localMode=null,null):function(e,t,i){var n=e.current(),r=n.search(t);return r>-1?e.backUp(n.length-r):n.match(/<\/?$/)&&(e.backUp(n.length),e.match(t,!1)||e.match(n)),i}(e,g,t.localMode.token(e,t.localState))},o.localMode=f,o.localState=e.startState(f,a.indent(o.htmlState,""))}else o.inTag&&(o.inTag+=t.current(),t.eol()&&(o.inTag+=" "));return c}return{startState:function(){return{token:p,inTag:null,localMode:null,localState:null,htmlState:e.startState(a)}},copyState:function(t){var i;return t.localState&&(i=e.copyState(t.localMode,t.localState)),{token:t.token,inTag:t.inTag,localMode:t.localMode,localState:i,htmlState:e.copyState(a,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,i){return!t.localMode||/^\s*<\//.test(i)?a.indent(t.htmlState,i):t.localMode.indent?t.localMode.indent(t.localState,i):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||a}}}},"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t,i){return/^(?:operator|sof|keyword c|case|new|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(i||0)))}e.defineMode("javascript",function(i,n){var r,o,s=i.indentUnit,a=n.statementIndent,l=n.jsonld,c=n.json||l,u=n.typescript,d=n.wordCharacters||/[\w$\xa1-\uffff]/,p=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),i=e("keyword b"),n=e("keyword c"),r=e("operator"),o={type:"atom",style:"atom"},s={if:e("if"),while:t,with:t,else:i,do:i,try:i,finally:i,return:n,break:n,continue:n,new:e("new"),delete:n,throw:n,debugger:n,var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:r,typeof:r,instanceof:r,true:o,false:o,null:o,undefined:o,NaN:o,Infinity:o,this:e("this"),class:e("class"),super:e("atom"),yield:n,export:e("export"),import:e("import"),extends:n,await:n,async:e("async")};if(u){var a={type:"variable",style:"variable-3"},l={interface:e("class"),implements:n,namespace:n,module:e("module"),enum:e("module"),type:e("type"),public:e("modifier"),private:e("modifier"),protected:e("modifier"),abstract:e("modifier"),as:r,string:a,number:a,boolean:a,any:a};for(var c in l)s[c]=l[c]}return s}(),h=/[+\-*&%=<>!?|~^]/,f=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function m(e,t,i){return r=e,o=i,t}function g(e,i){var n,r=e.next();if('"'==r||"'"==r)return i.tokenize=(n=r,function(e,t){var i,r=!1;if(l&&"@"==e.peek()&&e.match(f))return t.tokenize=g,m("jsonld-keyword","meta");for(;null!=(i=e.next())&&(i!=n||r);)r=!r&&"\\"==i;return r||(t.tokenize=g),m("string","string")}),i.tokenize(e,i);if("."==r&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return m("number","number");if("."==r&&e.match(".."))return m("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return m(r);if("="==r&&e.eat(">"))return m("=>","operator");if("0"==r&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),m("number","number");if("0"==r&&e.eat(/o/i))return e.eatWhile(/[0-7]/i),m("number","number");if("0"==r&&e.eat(/b/i))return e.eatWhile(/[01]/i),m("number","number");if(/\d/.test(r))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),m("number","number");if("/"==r)return e.eat("*")?(i.tokenize=v,v(e,i)):e.eat("/")?(e.skipToEnd(),m("comment","comment")):t(e,i,1)?(function(e){for(var t,i=!1,n=!1;null!=(t=e.next());){if(!i){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}i=!i&&"\\"==t}}(e),e.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),m("regexp","string-2")):(e.eatWhile(h),m("operator","operator",e.current()));if("`"==r)return i.tokenize=y,y(e,i);if("#"==r)return e.skipToEnd(),m("error","error");if(h.test(r))return e.eatWhile(h),m("operator","operator",e.current());if(d.test(r)){e.eatWhile(d);var o=e.current(),s=p.propertyIsEnumerable(o)&&p[o];return s&&"."!=i.lastType?m(s.type,s.style,o):m("variable","variable",o)}}function v(e,t){for(var i,n=!1;i=e.next();){if("/"==i&&n){t.tokenize=g;break}n="*"==i}return m("comment","comment")}function y(e,t){for(var i,n=!1;null!=(i=e.next());){if(!n&&("`"==i||"$"==i&&e.eat("{"))){t.tokenize=g;break}n=!n&&"\\"==i}return m("quasi","string-2",e.current())}var b="([{}])";function w(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var i=e.string.indexOf("=>",e.start);if(!(i<0)){for(var n=0,r=!1,o=i-1;o>=0;--o){var s=e.string.charAt(o),a=b.indexOf(s);if(a>=0&&a<3){if(!n){++o;break}if(0==--n){"("==s&&(r=!0);break}}else if(a>=3&&a<6)++n;else if(d.test(s))r=!0;else{if(/["'\/]/.test(s))return;if(r&&!n){++o;break}}}r&&!n&&(t.fatArrowAt=o)}}var x={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function k(e,t,i,n,r,o){this.indented=e,this.column=t,this.type=i,this.prev=r,this.info=o,null!=n&&(this.align=n)}function C(e,t){for(var i=e.localVars;i;i=i.next)if(i.name==t)return!0;for(var n=e.context;n;n=n.prev)for(i=n.vars;i;i=i.next)if(i.name==t)return!0}var _={state:null,column:null,marked:null,cc:null};function S(){for(var e=arguments.length-1;e>=0;e--)_.cc.push(arguments[e])}function M(){return S.apply(null,arguments),!0}function T(e){function t(t){for(var i=t;i;i=i.next)if(i.name==e)return!0;return!1}var i=_.state;if(_.marked="def",i.context){if(t(i.localVars))return;i.localVars={name:e,next:i.localVars}}else{if(t(i.globalVars))return;n.globalVars&&(i.globalVars={name:e,next:i.globalVars})}}var O={name:"this",next:{name:"arguments"}};function L(){_.state.context={prev:_.state.context,vars:_.state.localVars},_.state.localVars=O}function $(){_.state.localVars=_.state.context.vars,_.state.context=_.state.context.prev}function D(e,t){var i=function(){var i=_.state,n=i.indented;if("stat"==i.lexical.type)n=i.lexical.indented;else for(var r=i.lexical;r&&")"==r.type&&r.align;r=r.prev)n=r.indented;i.lexical=new k(n,_.stream.column(),e,null,i.lexical,t)};return i.lex=!0,i}function I(){var e=_.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function A(e){return function t(i){return i==e?M():";"==e?S():M(t)}}function z(e,t){return"var"==e?M(D("vardef",t.length),ue,A(";"),I):"keyword a"==e?M(D("form"),E,z,I):"keyword b"==e?M(D("form"),z,I):"{"==e?M(D("}"),ie,I):";"==e?M():"if"==e?("else"==_.state.lexical.info&&_.state.cc[_.state.cc.length-1]==I&&_.state.cc.pop()(),M(D("form"),E,z,I,me)):"function"==e?M(xe):"for"==e?M(D("form"),ge,z,I):"variable"==e?M(D("stat"),Y):"switch"==e?M(D("form"),E,D("}","switch"),A("{"),ie,I,I):"case"==e?M(N,A(":")):"default"==e?M(A(":")):"catch"==e?M(D("form"),L,A("("),ke,A(")"),z,I,$):"class"==e?M(D("form"),Ce,I):"export"==e?M(D("stat"),Te,I):"import"==e?M(D("stat"),Oe,I):"module"==e?M(D("form"),de,D("}"),A("{"),ie,I,I):"type"==e?M(oe,A("operator"),oe,A(";")):"async"==e?M(z):S(D("stat"),N,A(";"),I)}function N(e){return F(e,!1)}function P(e){return F(e,!0)}function E(e){return"("!=e?S():M(D(")"),N,A(")"),I)}function F(e,t){if(_.state.fatArrowAt==_.stream.start){var i=t?K:V;if("("==e)return M(L,D(")"),ee(de,")"),I,A("=>"),i,$);if("variable"==e)return S(L,de,A("=>"),i,$)}var n=t?j:R;return x.hasOwnProperty(e)?M(n):"function"==e?M(xe,n):"keyword c"==e||"async"==e?M(t?W:H):"("==e?M(D(")"),H,A(")"),I,n):"operator"==e||"spread"==e?M(t?P:N):"["==e?M(D("]"),Ie,I,n):"{"==e?te(Z,"}",null,n):"quasi"==e?S(B,n):"new"==e?M(function(e){return function(t){return"."==t?M(e?G:U):S(e?P:N)}}(t)):M()}function H(e){return e.match(/[;\}\)\],]/)?S():S(N)}function W(e){return e.match(/[;\}\)\],]/)?S():S(P)}function R(e,t){return","==e?M(N):j(e,t,!1)}function j(e,t,i){var n=0==i?R:j,r=0==i?N:P;return"=>"==e?M(L,i?K:V,$):"operator"==e?/\+\+|--/.test(t)?M(n):"?"==t?M(N,A(":"),r):M(r):"quasi"==e?S(B,n):";"!=e?"("==e?te(P,")","call",n):"."==e?M(X,n):"["==e?M(D("]"),H,A("]"),I,n):void 0:void 0}function B(e,t){return"quasi"!=e?S():"${"!=t.slice(t.length-2)?M(B):M(N,q)}function q(e){if("}"==e)return _.marked="string-2",_.state.tokenize=y,M(B)}function V(e){return w(_.stream,_.state),S("{"==e?z:N)}function K(e){return w(_.stream,_.state),S("{"==e?z:P)}function U(e,t){if("target"==t)return _.marked="keyword",M(R)}function G(e,t){if("target"==t)return _.marked="keyword",M(j)}function Y(e){return":"==e?M(I,z):S(R,A(";"),I)}function X(e){if("variable"==e)return _.marked="property",M()}function Z(e,t){return"async"==e?(_.marked="property",M(Z)):"variable"==e||"keyword"==_.style?(_.marked="property",M("get"==t||"set"==t?Q:J)):"number"==e||"string"==e?(_.marked=l?"property":_.style+" property",M(J)):"jsonld-keyword"==e?M(J):"modifier"==e?M(Z):"["==e?M(N,A("]"),J):"spread"==e?M(N):":"==e?S(J):void 0}function Q(e){return"variable"!=e?S(J):(_.marked="property",M(xe))}function J(e){return":"==e?M(P):"("==e?S(xe):void 0}function ee(e,t){function i(n,r){if(","==n){var o=_.state.lexical;return"call"==o.info&&(o.pos=(o.pos||0)+1),M(function(i,n){return i==t||n==t?S():S(e)},i)}return n==t||r==t?M():M(A(t))}return function(n,r){return n==t||r==t?M():S(e,i)}}function te(e,t,i){for(var n=3;n<arguments.length;n++)_.cc.push(arguments[n]);return M(D(t,i),ee(e,t),I)}function ie(e){return"}"==e?M():S(z,ie)}function ne(e,t){if(u){if(":"==e)return M(oe);if("?"==t)return M(ne)}}function re(e,t){if("="==t)return M(P)}function oe(e){return"variable"==e?(_.marked="variable-3",M(ce)):"{"==e?M(ee(ae,"}")):"("==e?M(ee(le,")"),se):void 0}function se(e){if("=>"==e)return M(oe)}function ae(e){return"variable"==e||"keyword"==_.style?(_.marked="property",M(ae)):":"==e?M(oe):void 0}function le(e){return"variable"==e?M(le):":"==e?M(oe):void 0}function ce(e,t){return"<"==t?M(ee(oe,">"),ce):"["==e?M(A("]"),ce):void 0}function ue(){return S(de,ne,he,fe)}function de(e,t){return"modifier"==e?M(de):"variable"==e?(T(t),M()):"spread"==e?M(de):"["==e?te(de,"]"):"{"==e?te(pe,"}"):void 0}function pe(e,t){return"variable"!=e||_.stream.match(/^\s*:/,!1)?("variable"==e&&(_.marked="property"),"spread"==e?M(de):"}"==e?S():M(A(":"),de,he)):(T(t),M(he))}function he(e,t){if("="==t)return M(P)}function fe(e){if(","==e)return M(ue)}function me(e,t){if("keyword b"==e&&"else"==t)return M(D("form","else"),z,I)}function ge(e){if("("==e)return M(D(")"),ve,A(")"),I)}function ve(e){return"var"==e?M(ue,A(";"),be):";"==e?M(be):"variable"==e?M(ye):S(N,A(";"),be)}function ye(e,t){return"in"==t||"of"==t?(_.marked="keyword",M(N)):M(R,be)}function be(e,t){return";"==e?M(we):"in"==t||"of"==t?(_.marked="keyword",M(N)):S(N,A(";"),we)}function we(e){")"!=e&&M(N)}function xe(e,t){return"*"==t?(_.marked="keyword",M(xe)):"variable"==e?(T(t),M(xe)):"("==e?M(L,D(")"),ee(ke,")"),I,ne,z,$):void 0}function ke(e){return"spread"==e?M(ke):S(de,ne,re)}function Ce(e,t){if("variable"==e)return T(t),M(_e)}function _e(e,t){return"extends"==t?M(u?oe:N,_e):"{"==e?M(D("}"),Se,I):void 0}function Se(e,t){return"variable"==e||"keyword"==_.style?("static"==t||"get"==t||"set"==t||u&&("public"==t||"private"==t||"protected"==t))&&_.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(_.marked="keyword",M(Se)):(_.marked="property",M(u?Me:xe,Se)):"*"==t?(_.marked="keyword",M(Se)):";"==e?M(Se):"}"==e?M():void 0}function Me(e){return":"==e?M(oe):S(xe)}function Te(e,t){return"*"==t?(_.marked="keyword",M(De,A(";"))):"default"==t?(_.marked="keyword",M(N,A(";"))):S(z)}function Oe(e){return"string"==e?M():S(Le,De)}function Le(e,t){return"{"==e?te(Le,"}"):("variable"==e&&T(t),"*"==t&&(_.marked="keyword"),M($e))}function $e(e,t){if("as"==t)return _.marked="keyword",M(Le)}function De(e,t){if("from"==t)return _.marked="keyword",M(N)}function Ie(e){return"]"==e?M():S(ee(P,"]"))}return I.lex=!0,{startState:function(e){var t={tokenize:g,lastType:"sof",cc:[],lexical:new k((e||0)-s,0,"block",!1),localVars:n.localVars,context:n.localVars&&{vars:n.localVars},indented:e||0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),w(e,t)),t.tokenize!=v&&e.eatSpace())return null;var i=t.tokenize(e,t);return"comment"==r?i:(t.lastType="operator"!=r||"++"!=o&&"--"!=o?r:"incdec",function(e,t,i,n,r){var o=e.cc;for(_.state=e,_.stream=r,_.marked=null,_.cc=o,_.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((o.length?o.pop():c?N:z)(i,n)){for(;o.length&&o[o.length-1].lex;)o.pop()();return _.marked?_.marked:"variable"==i&&C(e,n)?"variable-2":t}}(t,i,r,o,e))},indent:function(t,i){if(t.tokenize==v)return e.Pass;if(t.tokenize!=g)return 0;var r,o=i&&i.charAt(0),l=t.lexical;if(!/^\s*else\b/.test(i))for(var c=t.cc.length-1;c>=0;--c){var u=t.cc[c];if(u==I)l=l.prev;else if(u!=me)break}for(;("stat"==l.type||"form"==l.type)&&("}"==o||(r=t.cc[t.cc.length-1])&&(r==R||r==j)&&!/^[,\.=+\-*:?[\(]/.test(i));)l=l.prev;a&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var d=l.type,p=o==d;return"vardef"==d?l.indented+("operator"==t.lastType||","==t.lastType?l.info+1:0):"form"==d&&"{"==o?l.indented:"form"==d?l.indented+s:"stat"==d?l.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||h.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(t,i)?a||s:0):"switch"!=l.info||p||0==n.doubleIndentSwitch?l.align?l.column+(p?0:1):l.indented+(p?0:s):l.indented+(/^(?:case|default)\b/.test(i)?s:2*s)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:c?null:"/*",blockCommentEnd:c?null:"*/",lineComment:c?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:c?"json":"javascript",jsonldMode:l,jsonMode:c,expressionAllowed:t,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=N&&t!=P||e.cc.pop()}}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(e){var t,i,n,r,o,s,a,l,c,u,d,p,h,f,m,g,v,y,b,w,x,k,C,_,S,M,T,O,L,$,D,I,A,z,N,P,E,F=(t=65,i={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!1},n=function(t,i){var n=N(t);e(i).data("colorpicker").fields.eq(1).val(n.r).end().eq(2).val(n.g).end().eq(3).val(n.b).end()},r=function(t,i){e(i).data("colorpicker").fields.eq(4).val(t.h).end().eq(5).val(t.s).end().eq(6).val(t.b).end()},o=function(t,i){e(i).data("colorpicker").fields.eq(0).val(P(t)).end()},s=function(t,i){e(i).data("colorpicker").selector.css("backgroundColor","#"+P({h:t.h,s:100,b:100})),e(i).data("colorpicker").selectorIndic.css({left:parseInt(150*t.s/100,10),top:parseInt(150*(100-t.b)/100,10)})},a=function(t,i){e(i).data("colorpicker").hue.css("top",parseInt(150-150*t.h/360,10))},l=function(t,i){e(i).data("colorpicker").currentColor.css("backgroundColor","#"+P(t))},c=function(t,i){e(i).data("colorpicker").newColor.css("backgroundColor","#"+P(t))},u=function(i){var n=i.charCode||i.keyCode||-1;if(n>t&&n<=90||32==n)return!1;!0===e(this).parent().parent().data("colorpicker").livePreview&&d.apply(this)},d=function(t){var i,l=e(this).parent().parent();this.parentNode.className.indexOf("_hex")>0?l.data("colorpicker").color=i=A(I(this.value)):this.parentNode.className.indexOf("_hsb")>0?l.data("colorpicker").color=i=$({h:parseInt(l.data("colorpicker").fields.eq(4).val(),10),s:parseInt(l.data("colorpicker").fields.eq(5).val(),10),b:parseInt(l.data("colorpicker").fields.eq(6).val(),10)}):l.data("colorpicker").color=i=z(D({r:parseInt(l.data("colorpicker").fields.eq(1).val(),10),g:parseInt(l.data("colorpicker").fields.eq(2).val(),10),b:parseInt(l.data("colorpicker").fields.eq(3).val(),10)})),t&&(n(i,l.get(0)),o(i,l.get(0)),r(i,l.get(0))),s(i,l.get(0)),a(i,l.get(0)),c(i,l.get(0)),l.data("colorpicker").onChange.apply(l,[i,P(i),N(i)])},p=function(t){e(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus")},h=function(){t=this.parentNode.className.indexOf("_hex")>0?70:65,e(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),e(this).parent().addClass("colorpicker_focus")},f=function(t){var i=e(this).parent().find("input").focus(),n={el:e(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:t.pageY,field:i,val:parseInt(i.val(),10),preview:e(this).parent().parent().data("colorpicker").livePreview};e(document).bind("mouseup",n,g),e(document).bind("mousemove",n,m)},m=function(e){return e.data.field.val(Math.max(0,Math.min(e.data.max,parseInt(e.data.val+e.pageY-e.data.y,10)))),e.data.preview&&d.apply(e.data.field.get(0),[!0]),!1},g=function(t){return d.apply(t.data.field.get(0),[!0]),t.data.el.removeClass("colorpicker_slider").find("input").focus(),e(document).unbind("mouseup",g),e(document).unbind("mousemove",m),!1},v=function(t){var i={cal:e(this).parent(),y:e(this).offset().top};i.preview=i.cal.data("colorpicker").livePreview,e(document).bind("mouseup",i,b),e(document).bind("mousemove",i,y)},y=function(e){return d.apply(e.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,e.pageY-e.data.y)))/150,10)).get(0),[e.data.preview]),!1},b=function(t){return n(t.data.cal.data("colorpicker").color,t.data.cal.get(0)),o(t.data.cal.data("colorpicker").color,t.data.cal.get(0)),e(document).unbind("mouseup",b),e(document).unbind("mousemove",y),!1},w=function(t){var i={cal:e(this).parent(),pos:e(this).offset()};i.preview=i.cal.data("colorpicker").livePreview,e(document).bind("mouseup",i,k),e(document).bind("mousemove",i,x)},x=function(e){return d.apply(e.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,e.pageY-e.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,e.pageX-e.data.pos.left))/150,10)).get(0),[e.data.preview]),!1},k=function(t){return n(t.data.cal.data("colorpicker").color,t.data.cal.get(0)),o(t.data.cal.data("colorpicker").color,t.data.cal.get(0)),e(document).unbind("mouseup",k),e(document).unbind("mousemove",x),!1},C=function(t){e(this).addClass("colorpicker_focus")},_=function(t){e(this).removeClass("colorpicker_focus")},S=function(t){var i=e(this).parent(),n=i.data("colorpicker").color;i.data("colorpicker").origColor=n,l(n,i.get(0)),i.data("colorpicker").onSubmit(n,P(n),N(n),i.data("colorpicker").el)},M=function(t){var i=e("#"+e(this).data("colorpickerId"));i.data("colorpicker").onBeforeShow.apply(this,[i.get(0)]);var n=e(this).offset(),r=L(),o=n.top+this.offsetHeight,s=n.left;return o+176>r.t+r.h&&(o-=this.offsetHeight+176),s+356>r.l+r.w&&(s-=356),i.css({left:s+"px",top:o+"px"}),0!=i.data("colorpicker").onShow.apply(this,[i.get(0)])&&i.show(),e(document).bind("mousedown",{cal:i},T),!1},T=function(t){O(t.data.cal.get(0),t.target,t.data.cal.get(0))||(0!=t.data.cal.data("colorpicker").onHide.apply(this,[t.data.cal.get(0)])&&t.data.cal.hide(),e(document).unbind("mousedown",T))},O=function(e,t,i){if(e==t)return!0;if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return!!(16&e.compareDocumentPosition(t));for(var n=t.parentNode;n&&n!=i;){if(n==e)return!0;n=n.parentNode}return!1},L=function(){var e="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(e?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(e?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(e?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(e?document.documentElement.clientHeight:document.body.clientHeight)}},$=function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},D=function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}},I=function(e){var t=6-e.length;if(t>0){for(var i=[],n=0;n<t;n++)i.push("0");i.push(e),e=i.join("")}return e},A=function(e){return z(function(e){return{r:(e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16))>>16,g:(65280&e)>>8,b:255&e}}(e))},z=function(e){var t={h:0,s:0,b:0},i=Math.min(e.r,e.g,e.b),n=Math.max(e.r,e.g,e.b),r=n-i;return t.b=n,t.s=0!=n?255*r/n:0,0!=t.s?e.r==n?t.h=(e.g-e.b)/r:e.g==n?t.h=2+(e.b-e.r)/r:t.h=4+(e.r-e.g)/r:t.h=-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t},N=function(e){var t={},i=Math.round(e.h),n=Math.round(255*e.s/100),r=Math.round(255*e.b/100);if(0==n)t.r=t.g=t.b=r;else{var o=r,s=(255-n)*r/255,a=i%60*(o-s)/60;360==i&&(i=0),i<60?(t.r=o,t.b=s,t.g=s+a):i<120?(t.g=o,t.b=s,t.r=o-a):i<180?(t.g=o,t.r=s,t.b=s+a):i<240?(t.b=o,t.r=s,t.g=o-a):i<300?(t.b=o,t.g=s,t.r=s+a):i<360?(t.r=o,t.g=s,t.b=o-a):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},P=function(t){return i=N(t),n=[i.r.toString(16),i.g.toString(16),i.b.toString(16)],e.each(n,function(e,t){1==t.length&&(n[e]="0"+t)}),n.join("");var i,n},E=function(){var t=e(this).parent(),i=t.data("colorpicker").origColor;t.data("colorpicker").color=i,n(i,t.get(0)),o(i,t.get(0)),r(i,t.get(0)),s(i,t.get(0)),a(i,t.get(0)),c(i,t.get(0))},{init:function(t){if("string"==typeof(t=e.extend({},i,t||{})).color)t.color=A(t.color);else if(null!=t.color.r&&null!=t.color.g&&null!=t.color.b)t.color=z(t.color);else{if(null==t.color.h||null==t.color.s||null==t.color.b)return this;t.color=$(t.color)}return this.each(function(){if(!e(this).data("colorpickerId")){var i=e.extend({},t);i.origColor=t.color;var m="collorpicker_"+parseInt(1e3*Math.random());e(this).data("colorpickerId",m);var g=e('<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>').attr("id",m);i.flat?g.appendTo(this).show():g.appendTo(document.body),i.fields=g.find("input").bind("keyup",u).bind("change",d).bind("blur",p).bind("focus",h),g.find("span").bind("mousedown",f).end().find(">div.colorpicker_current_color").bind("click",E),i.selector=g.find("div.colorpicker_color").bind("mousedown",w),i.selectorIndic=i.selector.find("div div"),i.el=this,i.hue=g.find("div.colorpicker_hue div"),g.find("div.colorpicker_hue").bind("mousedown",v),i.newColor=g.find("div.colorpicker_new_color"),i.currentColor=g.find("div.colorpicker_current_color"),g.data("colorpicker",i),g.find("div.colorpicker_submit").bind("mouseenter",C).bind("mouseleave",_).bind("click",S),n(i.color,g.get(0)),r(i.color,g.get(0)),o(i.color,g.get(0)),a(i.color,g.get(0)),s(i.color,g.get(0)),l(i.color,g.get(0)),c(i.color,g.get(0)),i.flat?g.css({position:"relative",display:"block"}):e(this).bind(i.eventName,M)}})},showPicker:function(){return this.each(function(){e(this).data("colorpickerId")&&M.apply(this)})},hidePicker:function(){return this.each(function(){e(this).data("colorpickerId")&&e("#"+e(this).data("colorpickerId")).hide()})},setColor:function(t){if("string"==typeof t)t=A(t);else if(null!=t.r&&null!=t.g&&null!=t.b)t=z(t);else{if(null==t.h||null==t.s||null==t.b)return this;t=$(t)}return this.each(function(){if(e(this).data("colorpickerId")){var i=e("#"+e(this).data("colorpickerId"));i.data("colorpicker").color=t,i.data("colorpicker").origColor=t,n(t,i.get(0)),r(t,i.get(0)),o(t,i.get(0)),a(t,i.get(0)),s(t,i.get(0)),l(t,i.get(0)),c(t,i.get(0))}})}});e.fn.extend({ColorPicker:F.init,ColorPickerHide:F.hidePicker,ColorPickerShow:F.showPicker,ColorPickerSetColor:F.setColor})}(jQuery),jQuery(document).ready(function(){if(!locale.cjwpbldr_is_local){(function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);null===t||decodeURIComponent(t[1].replace(/\+/g," "))})("page")}}),function(e){"use strict";function t(e,t,i){"addEventListener"in window?e.addEventListener(t,i,!1):"attachEvent"in window&&e.attachEvent("on"+t,i)}function i(e,t,i){"removeEventListener"in window?e.removeEventListener(t,i,!1):"detachEvent"in window&&e.detachEvent("on"+t,i)}function n(e){return D+"["+function(e){var t="Host page: "+e;return window.top!==window.self&&(t=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+e:"Nested host page: "+e),t}(e)+"]"}function r(e){return P[e]?P[e].log:O}function o(e,t){l("log",e,t,r(e))}function s(e,t){l("info",e,t,r(e))}function a(e,t){l("warn",e,t,!0)}function l(e,t,i,r){!0===r&&"object"==typeof window.console&&console[e](n(t),i)}function c(e){function n(){r("Height"),r("Width"),v(function(){g(M),h(T),_("resizedCallback",M)},M,"init")}function r(e){var t=Number(P[T]["max"+e]),i=Number(P[T]["min"+e]),n=e.toLowerCase(),r=Number(M[n]);o(T,"Checking "+n+" is in range "+i+"-"+t),i>r&&(r=i,o(T,"Set "+n+" to min value")),r>t&&(r=t,o(T,"Set "+n+" to max value")),M[n]=""+r}function l(e){return S.substr(S.indexOf(":")+$+e)}function c(e,t){x(function(){y("Send Page Info","pageInfo:"+function(){var e=document.body.getBoundingClientRect(),t=M.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:t.height,iframeWidth:t.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(t.top-e.top,10),offsetLeft:parseInt(t.left-e.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset})}(),e,t)},32)}function w(e){var t=e.getBoundingClientRect();return p(T),{x:Math.floor(Number(t.left)+Number(A.x)),y:Math.floor(Number(t.top)+Number(A.y))}}function k(e){var t=e?w(M.iframe):{x:0,y:0},i={x:Number(M.width)+t.x,y:Number(M.height)+t.y};o(T,"Reposition requested from iFrame (offset x:"+t.x+" y:"+t.y+")"),window.top!==window.self?window.parentIFrame?window.parentIFrame["scrollTo"+(e?"Offset":"")](i.x,i.y):a(T,"Unable to scroll to requested position, window.parentIFrame not found"):(A=i,C(),o(T,"--"))}function C(){!1!==_("scrollCallback",A)?h(T):f()}function _(e,t){return u(T,e,t)}var S=e.data,M={},T=null;"[iFrameResizerChild]Ready"===S?function(){for(var e in P)y("iFrame requested init",b(e),document.getElementById(e),e)}():D===(""+S).substr(0,I)&&S.substr(I).split(":")[0]in P?(M=function(){var e=S.substr(I).split(":");return{iframe:P[e[0]].iframe,id:e[0],height:e[1],width:e[2],type:e[3]}}(),T=M.id,P[T].loaded=!0,!function(){var e=M.type in{true:1,false:1,undefined:1};return e&&o(T,"Ignoring init message from meta parent page"),e}()&&function(e){var t=!0;return P[e]||(t=!1,a(M.type+" No settings for "+e+". Message was: "+S)),t}(T)&&(o(T,"Received: "+S),function(){var e=!0;return null===M.iframe&&(a(T,"IFrame ("+M.id+") not found"),e=!1),e}()&&function(){var t=e.origin,i=P[T].checkOrigin;if(i&&""+t!="null"&&!(i.constructor===Array?function(){var e=0,n=!1;for(o(T,"Checking connection is from allowed list of origins: "+i);e<i.length;e++)if(i[e]===t){n=!0;break}return n}():function(){var e=P[T].remoteHost;return o(T,"Checking connection is from: "+e),t===e}()))throw new Error("Unexpected message received from: "+t+" for "+M.iframe.id+". Message was: "+e.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}()&&function(){switch(P[T].firstRun&&(P[T].firstRun=!1),M.type){case"close":d(M.iframe);break;case"message":e=l(6),o(T,"MessageCallback passed: {iframe: "+M.iframe.id+", message: "+e+"}"),_("messageCallback",{iframe:M.iframe,message:JSON.parse(e)}),o(T,"--");break;case"scrollTo":k(!1);break;case"scrollToOffset":k(!0);break;case"pageInfo":c(P[T].iframe,T),function(){function e(e,t){function i(){P[r]?c(P[r].iframe,r):n()}["scroll","resize"].forEach(function(n){o(r,e+n+" listener for sendPageInfo"),t(window,n,i)})}function n(){e("Remove ",i)}var r=T;e("Add ",t),P[r].stopPageInfo=n}();break;case"pageInfoStop":P[T]&&P[T].stopPageInfo&&(P[T].stopPageInfo(),delete P[T].stopPageInfo);break;case"inPageLink":!function(e){var t=e.split("#")[1]||"",i=decodeURIComponent(t),n=document.getElementById(i)||document.getElementsByName(i)[0];n?function(){var e=w(n);o(T,"Moving to in page link (#"+t+") at x: "+e.x+" y: "+e.y),A={x:e.x,y:e.y},C(),o(T,"--")}():window.top!==window.self?window.parentIFrame?window.parentIFrame.moveToAnchor(t):o(T,"In page link #"+t+" not found and window.parentIFrame not found"):o(T,"In page link #"+t+" not found")}(l(9));break;case"reset":m(M);break;case"init":n(),_("initCallback",M.iframe);break;default:n()}var e}())):s(T,"Ignored: "+S)}function u(e,t,i){var n=null,r=null;if(P[e]){if("function"!=typeof(n=P[e][t]))throw new TypeError(t+" on iFrame["+e+"] is not a function");r=n(i)}return r}function d(e){var t=e.id;o(t,"Removing iFrame: "+t),e.parentNode&&e.parentNode.removeChild(e),u(t,"closedCallback",t),o(t,"--"),delete P[t]}function p(t){null===A&&o(t,"Get page position: "+(A={x:window.pageXOffset!==e?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==e?window.pageYOffset:document.documentElement.scrollTop}).x+","+A.y)}function h(e){null!==A&&(window.scrollTo(A.x,A.y),o(e,"Set page position: "+A.x+","+A.y),f())}function f(){A=null}function m(e){o(e.id,"Size reset requested by "+("init"===e.type?"host page":"iFrame")),p(e.id),v(function(){g(e),y("reset","reset",e.iframe,e.id)},e,"reset")}function g(e){function t(t){e.iframe.style[t]=e[t]+"px",o(e.id,"IFrame ("+r+") "+t+" set to "+e[t]+"px")}function i(t){L||"0"!==e[t]||(L=!0,o(r,"Hidden iFrame detected, creating visibility listener"),function(){function e(){function e(e){function t(t){return"0px"===P[e].iframe.style[t]}(function(e){return null!==e.offsetParent})(P[e].iframe)&&(t("height")||t("width"))&&y("Visibility change","resize",P[e].iframe,e)}for(var t in P)e(t)}function t(t){o("window","Mutation observed: "+t[0].target+" "+t[0].type),x(e,16)}var i=window.MutationObserver||window.WebKitMutationObserver;i&&function(){var e=document.querySelector("body");new i(t).observe(e,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0})}()}())}function n(e){t(e),i(e)}var r=e.iframe.id;P[r]&&(P[r].sizeHeight&&n("height"),P[r].sizeWidth&&n("width"))}function v(e,t,i){i!==t.type&&z?(o(t.id,"Requesting animation frame"),z(e)):e()}function y(e,t,i,n,r){var s=!1;n=n||i.id,P[n]&&(function(){var r;i&&"contentWindow"in i&&null!==i.contentWindow?(r=P[n].targetOrigin,o(n,"["+e+"] Sending msg to iframe["+n+"] ("+t+") targetOrigin: "+r),i.contentWindow.postMessage(D+t,r)):a(n,"["+e+"] IFrame("+n+") not found")}(),r&&P[n].warningTimeout&&(P[n].msgTimeout=setTimeout(function(){!P[n]||P[n].loaded||s||(s=!0,a(n,"IFrame has not responded within "+P[n].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ingored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))},P[n].warningTimeout)))}function b(e){return e+":"+P[e].bodyMarginV1+":"+P[e].sizeWidth+":"+P[e].log+":"+P[e].interval+":"+P[e].enablePublicMethods+":"+P[e].autoResize+":"+P[e].bodyMargin+":"+P[e].heightCalculationMethod+":"+P[e].bodyBackground+":"+P[e].bodyPadding+":"+P[e].tolerance+":"+P[e].inPageLinks+":"+P[e].resizeFrom+":"+P[e].widthCalculationMethod}function w(i,n){var r=function(e){return e,""===e&&(i.id=e=function(){var e=n&&n.id||F.id+T++;return null!==document.getElementById(e)&&(e+=T++),e}(),O=(n||{}).log,e,o(e,"Added missing iframe ID: "+e+" ("+i.src+")")),e}(i.id);r in P&&"iFrameResizer"in i?a(r,"Ignored iFrame, already setup."):(function(e){e=e||{},P[r]={firstRun:!0,iframe:i,remoteHost:i.src.split("/").slice(0,3).join("/")},function(e){if("object"!=typeof e)throw new TypeError("Options is not an object")}(e),function(e){for(var t in F)F.hasOwnProperty(t)&&(P[r][t]=e.hasOwnProperty(t)?e[t]:F[t])}(e),P[r].targetOrigin=!0===P[r].checkOrigin?function(e){return""===e||"file://"===e?"*":e}(P[r].remoteHost):"*"}(n),function(){switch(o(r,"IFrame scrolling "+(P[r].scrolling?"enabled":"disabled")+" for "+r),i.style.overflow=!1===P[r].scrolling?"hidden":"auto",P[r].scrolling){case!0:i.scrolling="yes";break;case!1:i.scrolling="no";break;default:i.scrolling=P[r].scrolling}}(),function(){function e(e){1/0!==P[r][e]&&0!==P[r][e]&&(i.style[e]=P[r][e]+"px",o(r,"Set "+e+" = "+P[r][e]+"px"))}function t(e){if(P[r]["min"+e]>P[r]["max"+e])throw new Error("Value for min"+e+" can not be greater than max"+e)}t("Height"),t("Width"),e("maxHeight"),e("minHeight"),e("maxWidth"),e("minWidth")}(),("number"==typeof P[r].bodyMargin||"0"===P[r].bodyMargin)&&(P[r].bodyMarginV1=P[r].bodyMargin,P[r].bodyMargin=P[r].bodyMargin+"px"),function(n){t(i,"load",function(){y("iFrame.onload",n,i,e,!0),function(){var e=P[r].firstRun,t=P[r].heightCalculationMethod in N;!e&&t&&m({iframe:i,height:0,width:0,type:"init"})}()}),y("init",n,i,e,!0)}(b(r)),Function.prototype.bind&&(P[r].iframe.iFrameResizer={close:d.bind(null,P[r].iframe),resize:y.bind(null,"Window resize","resize",P[r].iframe),moveToAnchor:function(e){y("Move to anchor","moveToAnchor:"+e,P[r].iframe,r)},sendMessage:function(e){y("Send Message","message:"+(e=JSON.stringify(e)),P[r].iframe,r)}}))}function x(e,t){null===E&&(E=setTimeout(function(){E=null,e()},t))}function k(e){o("window","Trigger event: "+e),x(function(){_("Window "+e,"resize")},16)}function C(){"hidden"!==document.visibilityState&&(o("document","Trigger event: Visiblity change"),x(function(){_("Tab Visable","resize")},16))}function _(e,t){function i(e){return"parent"===P[e].resizeFrom&&P[e].autoResize&&!P[e].firstRun}for(var n in P)i(n)&&y(e,t,document.getElementById(n),n)}function S(){t(window,"message",c),t(window,"resize",function(){k("resize")}),t(document,"visibilitychange",C),t(document,"-webkit-visibilitychange",C),t(window,"focusin",function(){k("focus")}),t(window,"focus",function(){k("focus")})}function M(){function t(e,t){t&&(function(){if(!t.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==t.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+t.tagName+">")}(),w(t,e),i.push(t))}var i;return function(){var e,t=["moz","webkit","o","ms"];for(e=0;e<t.length&&!z;e+=1)z=window[t[e]+"RequestAnimationFrame"];z||o("setup","RequestAnimationFrame not supported")}(),S(),function(n,r){switch(i=[],function(e){e&&e.enablePublicMethods&&a("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}(n),typeof r){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(r||"iframe"),t.bind(e,n));break;case"object":t(n,r);break;default:throw new TypeError("Unexpected data type ("+typeof r+")")}return i}}if("undefined"!=typeof window){var T=0,O=!1,L=!1,$="message".length,D="[iFrameSizer]",I=D.length,A=null,z=window.requestAnimationFrame,N={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},P={},E=null,F={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){a("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}};window.jQuery&&function(e){e.fn?e.fn.iFrameResize||(e.fn.iFrameResize=function(e){return this.filter("iframe").each(function(t,i){w(i,e)}).end()}):s("","Unable to bind to jQuery, it is not fully loaded.")}(window.jQuery),"function"==typeof define&&define.amd?define([],M):"object"==typeof module&&"object"==typeof module.exports?module.exports=M():window.iFrameResize=window.iFrameResize||M()}}(),function(e){"function"==typeof define&&define.amd?define(["jquery","jquery-ui"],e):e(jQuery)}(function($){if($.ui.timepicker=$.ui.timepicker||{},!$.ui.timepicker.version){$.extend($.ui,{timepicker:{version:"1.6.3"}});var Timepicker=function(){this.regional=[],this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",timezoneText:"Time Zone",isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,timeOnlyShowDate:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,maxTime:null,minTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,altRedirectFocus:!0,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",oneLine:!1,defaultValue:null,parse:"strict",afterInject:null},$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,maxTime:null,minTime:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_newInst:function($input,opts){var tp_inst=new Timepicker,inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(e){inlineSettings[attrName]=attrValue}}for(i in overrides={beforeShow:function(e,t){return $.isFunction(tp_inst._defaults.evnts.beforeShow)?tp_inst._defaults.evnts.beforeShow.call($input[0],e,t,tp_inst):void 0},onChangeMonthYear:function(e,t,i){$.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)&&tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],e,t,i,tp_inst)},onClose:function(e,t){!0===tp_inst.timeDefined&&""!==$input.val()&&tp_inst._updateDateTime(t),$.isFunction(tp_inst._defaults.evnts.onClose)&&tp_inst._defaults.evnts.onClose.call($input[0],e,t,tp_inst)}},overrides)overrides.hasOwnProperty(i)&&(fns[i]=opts[i]||this._defaults[i]||null);tp_inst._defaults=$.extend({},this._defaults,inlineSettings,opts,overrides,{evnts:fns,timepicker:tp_inst}),tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(e){return e.toUpperCase()}),tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(e){return e.toUpperCase()}),tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:"")+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:"")),"string"==typeof tp_inst._defaults.controlType?("slider"===tp_inst._defaults.controlType&&void 0===$.ui.slider&&(tp_inst._defaults.controlType="select"),tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]):tp_inst.control=tp_inst._defaults.controlType;var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];null!==tp_inst._defaults.timezoneList&&(timezoneList=tp_inst._defaults.timezoneList);var tzl=timezoneList.length,tzi=0,tzv=null;if(tzl>0&&"object"!=typeof timezoneList[0])for(;tzl>tzi;tzi++)tzv=timezoneList[tzi],timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)};return tp_inst._defaults.timezoneList=timezoneList,tp_inst.timezone=null!==tp_inst._defaults.timezone?$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone):-1*(new Date).getTimezoneOffset(),tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour,tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute,tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second,tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec,tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec,tp_inst.ampm="",tp_inst.$input=$input,tp_inst._defaults.altField&&(tp_inst.$altInput=$(tp_inst._defaults.altField),!0===tp_inst._defaults.altRedirectFocus&&tp_inst.$altInput.css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})),(0===tp_inst._defaults.minDate||0===tp_inst._defaults.minDateTime)&&(tp_inst._defaults.minDate=new Date),(0===tp_inst._defaults.maxDate||0===tp_inst._defaults.maxDateTime)&&(tp_inst._defaults.maxDate=new Date),void 0!==tp_inst._defaults.minDate&&tp_inst._defaults.minDate instanceof Date&&(tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())),void 0!==tp_inst._defaults.minDateTime&&tp_inst._defaults.minDateTime instanceof Date&&(tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())),void 0!==tp_inst._defaults.maxDate&&tp_inst._defaults.maxDate instanceof Date&&(tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())),void 0!==tp_inst._defaults.maxDateTime&&tp_inst._defaults.maxDateTime instanceof Date&&(tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())),tp_inst.$input.bind("focus",function(){tp_inst._onFocus()}),tp_inst},_addTimePicker:function(e){var t=$.trim(this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val());this.timeDefined=this._parseTime(t),this._limitMinMaxDateTime(e,!1),this._injectTimePicker(),this._afterInject()},_parseTime:function(e,t){if(this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),t||!this._defaults.timeOnly){var i=$.datepicker._get(this.inst,"dateFormat");try{var n=parseDateTimeInternal(i,this._defaults.timeFormat,e,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!n.timeObj)return!1;$.extend(this,n.timeObj)}catch(t){return $.timepicker.log("Error parsing the date/time string: "+t+"\ndate/time string = "+e+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+i),!1}return!0}var r=$.datepicker.parseTime(this._defaults.timeFormat,e,this._defaults);return!!r&&($.extend(this,r),!0)},_afterInject:function(){var e=this.inst.settings;$.isFunction(e.afterInject)&&e.afterInject.call(this)},_injectTimePicker:function(){var e=this.inst.dpDiv,t=this.inst.settings,i=this,n="",r="",o=null,s={},a={},l=null,c=0,u=0;if(0===e.find("div.ui-timepicker-div").length&&t.showTimepicker){var d=" ui_tpicker_unit_hide",p='<div class="ui-timepicker-div'+(t.isRTL?" ui-timepicker-rtl":"")+(t.oneLine&&"select"===t.controlType?" ui-timepicker-oneLine":"")+'"><dl><dt class="ui_tpicker_time_label'+(t.showTime?"":d)+'">'+t.timeText+'</dt><dd class="ui_tpicker_time '+(t.showTime?"":d)+'"><input class="ui_tpicker_time_input" '+(t.timeInput?"":"disabled")+"/></dd>";for(c=0,u=this.units.length;u>c;c++){if(o=null!==t["show"+(r=(n=this.units[c]).substr(0,1).toUpperCase()+n.substr(1))]?t["show"+r]:this.support[n],s[n]=parseInt(t[n+"Max"]-(t[n+"Max"]-t[n+"Min"])%t["step"+r],10),a[n]=0,p+='<dt class="ui_tpicker_'+n+"_label"+(o?"":d)+'">'+t[n+"Text"]+'</dt><dd class="ui_tpicker_'+n+(o?"":d)+'"><div class="ui_tpicker_'+n+"_slider"+(o?"":d)+'"></div>',o&&t[n+"Grid"]>0){if(p+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>',"hour"===n)for(var h=t[n+"Min"];h<=s[n];h+=parseInt(t[n+"Grid"],10)){a[n]++;var f=$.datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:h},t);p+='<td data-for="'+n+'">'+f+"</td>"}else for(var m=t[n+"Min"];m<=s[n];m+=parseInt(t[n+"Grid"],10))a[n]++,p+='<td data-for="'+n+'">'+(10>m?"0":"")+m+"</td>";p+="</tr></table></div>"}p+="</dd>"}var g=null!==t.showTimezone?t.showTimezone:this.support.timezone;p+='<dt class="ui_tpicker_timezone_label'+(g?"":d)+'">'+t.timezoneText+"</dt>",p+='<dd class="ui_tpicker_timezone'+(g?"":d)+'"></dd>';var v=$(p+="</dl></div>");for(!0===t.timeOnly&&(v.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+t.timeOnlyTitle+"</div></div>"),e.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()),c=0,u=i.units.length;u>c;c++)o=null!==t["show"+(r=(n=i.units[c]).substr(0,1).toUpperCase()+n.substr(1))]?t["show"+r]:this.support[n],i[n+"_slider"]=i.control.create(i,v.find(".ui_tpicker_"+n+"_slider"),n,i[n],t[n+"Min"],s[n],t["step"+r]),o&&t[n+"Grid"]>0&&(l=100*a[n]*t[n+"Grid"]/(s[n]-t[n+"Min"]),v.find(".ui_tpicker_"+n+" table").css({width:l+"%",marginLeft:t.isRTL?"0":l/(-2*a[n])+"%",marginRight:t.isRTL?l/(-2*a[n])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(e){var t=$(this),r=t.html(),o=parseInt(r.replace(/[^0-9]/g),10),s=r.replace(/[^apm]/gi),a=t.data("for");"hour"===a&&(-1!==s.indexOf("p")&&12>o?o+=12:-1!==s.indexOf("a")&&12===o&&(o=0)),i.control.value(i,i[a+"_slider"],n,o),i._onTimeChange(),i._onSelectHandler()}).css({cursor:"pointer",width:100/a[n]+"%",textAlign:"center",overflow:"hidden"}));if(this.timezone_select=v.find(".ui_tpicker_timezone").append("<select></select>").find("select"),$.fn.append.apply(this.timezone_select,$.map(t.timezoneList,function(e,t){return $("<option />").val("object"==typeof e?e.value:e).text("object"==typeof e?e.label:e)})),void 0!==this.timezone&&null!==this.timezone&&""!==this.timezone)-1*new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12).getTimezoneOffset()===this.timezone?selectLocalTimezone(i):this.timezone_select.val(this.timezone);else void 0!==this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(t.timezone):selectLocalTimezone(i);this.timezone_select.change(function(){i._onTimeChange(),i._onSelectHandler(),i._afterInject()});var y=e.find(".ui-datepicker-buttonpane");if(y.length?y.before(v):e.append(v),this.$timeObj=v.find(".ui_tpicker_time_input"),this.$timeObj.change(function(){var e=i.inst.settings.timeFormat,t=$.datepicker.parseTime(e,this.value),n=new Date;t?(n.setHours(t.hour),n.setMinutes(t.minute),n.setSeconds(t.second),$.datepicker._setTime(i.inst,n)):(this.value=i.formattedTime,this.blur())}),null!==this.inst){var b=this.timeDefined;this._onTimeChange(),this.timeDefined=b}if(this._defaults.addSliderAccess){var w=this._defaults.sliderAccessArgs,x=this._defaults.isRTL;w.isRTL=x,setTimeout(function(){if(0===v.find(".ui-slider-access").length){v.find(".ui-slider:visible").sliderAccess(w);var e=v.find(".ui-slider-access:eq(0)").outerWidth(!0);e&&v.find("table:visible").each(function(){var t=$(this),i=t.outerWidth(),n=t.css(x?"marginRight":"marginLeft").toString().replace("%",""),r=i-e,o=n*r/i+"%",s={width:r,marginRight:0,marginLeft:0};s[x?"marginRight":"marginLeft"]=o,t.css(s)})}},10)}i._limitMinMaxDateTime(this.inst,!0)}},_limitMinMaxDateTime:function(e,t){var i=this._defaults,n=new Date(e.selectedYear,e.selectedMonth,e.selectedDay);if(this._defaults.showTimepicker){if(null!==$.datepicker._get(e,"minDateTime")&&void 0!==$.datepicker._get(e,"minDateTime")&&n){var r=$.datepicker._get(e,"minDateTime"),o=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0);(null===this.hourMinOriginal||null===this.minuteMinOriginal||null===this.secondMinOriginal||null===this.millisecMinOriginal||null===this.microsecMinOriginal)&&(this.hourMinOriginal=i.hourMin,this.minuteMinOriginal=i.minuteMin,this.secondMinOriginal=i.secondMin,this.millisecMinOriginal=i.millisecMin,this.microsecMinOriginal=i.microsecMin),e.settings.timeOnly||o.getTime()===n.getTime()?(this._defaults.hourMin=r.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=r.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=r.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=r.getMilliseconds(),this.millisec<=this._defaults.millisecMin?(this.millisec=this._defaults.millisecMin,this._defaults.microsecMin=r.getMicroseconds()):(this.microsec<this._defaults.microsecMin&&(this.microsec=this._defaults.microsecMin),this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)}if(null!==$.datepicker._get(e,"maxDateTime")&&void 0!==$.datepicker._get(e,"maxDateTime")&&n){var s=$.datepicker._get(e,"maxDateTime"),a=new Date(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0,0);(null===this.hourMaxOriginal||null===this.minuteMaxOriginal||null===this.secondMaxOriginal||null===this.millisecMaxOriginal)&&(this.hourMaxOriginal=i.hourMax,this.minuteMaxOriginal=i.minuteMax,this.secondMaxOriginal=i.secondMax,this.millisecMaxOriginal=i.millisecMax,this.microsecMaxOriginal=i.microsecMax),e.settings.timeOnly||a.getTime()===n.getTime()?(this._defaults.hourMax=s.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=s.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=s.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=s.getMilliseconds(),this.millisec>=this._defaults.millisecMax?(this.millisec=this._defaults.millisecMax,this._defaults.microsecMax=s.getMicroseconds()):(this.microsec>this._defaults.microsecMax&&(this.microsec=this._defaults.microsecMax),this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)}if(null!==e.settings.minTime){var l=new Date("01/01/1970 "+e.settings.minTime);this.hour<l.getHours()?(this.hour=this._defaults.hourMin=l.getHours(),this.minute=this._defaults.minuteMin=l.getMinutes()):this.hour===l.getHours()&&this.minute<l.getMinutes()?this.minute=this._defaults.minuteMin=l.getMinutes():this._defaults.hourMin<l.getHours()?(this._defaults.hourMin=l.getHours(),this._defaults.minuteMin=l.getMinutes()):this._defaults.hourMin===l.getHours()===this.hour&&this._defaults.minuteMin<l.getMinutes()?this._defaults.minuteMin=l.getMinutes():this._defaults.minuteMin=0}if(null!==e.settings.maxTime){var c=new Date("01/01/1970 "+e.settings.maxTime);this.hour>c.getHours()?(this.hour=this._defaults.hourMax=c.getHours(),this.minute=this._defaults.minuteMax=c.getMinutes()):this.hour===c.getHours()&&this.minute>c.getMinutes()?this.minute=this._defaults.minuteMax=c.getMinutes():this._defaults.hourMax>c.getHours()?(this._defaults.hourMax=c.getHours(),this._defaults.minuteMax=c.getMinutes()):this._defaults.hourMax===c.getHours()===this.hour&&this._defaults.minuteMax>c.getMinutes()?this._defaults.minuteMax=c.getMinutes():this._defaults.minuteMax=59}if(void 0!==t&&!0===t){var u=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),d=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),p=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),h=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10),f=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10);this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:u,step:this._defaults.stepHour}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:d,step:this._defaults.stepMinute}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:p,step:this._defaults.stepSecond}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:h,step:this._defaults.stepMillisec}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)),this.microsec_slider&&(this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,max:f,step:this._defaults.stepMicrosec}),this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec))}}},_onTimeChange:function(){if(this._defaults.showTimepicker){var e=!!this.hour_slider&&this.control.value(this,this.hour_slider,"hour"),t=!!this.minute_slider&&this.control.value(this,this.minute_slider,"minute"),i=!!this.second_slider&&this.control.value(this,this.second_slider,"second"),n=!!this.millisec_slider&&this.control.value(this,this.millisec_slider,"millisec"),r=!!this.microsec_slider&&this.control.value(this,this.microsec_slider,"microsec"),o=!!this.timezone_select&&this.timezone_select.val(),s=this._defaults,a=s.pickerTimeFormat||s.timeFormat,l=s.pickerTimeSuffix||s.timeSuffix;"object"==typeof e&&(e=!1),"object"==typeof t&&(t=!1),"object"==typeof i&&(i=!1),"object"==typeof n&&(n=!1),"object"==typeof r&&(r=!1),"object"==typeof o&&(o=!1),!1!==e&&(e=parseInt(e,10)),!1!==t&&(t=parseInt(t,10)),!1!==i&&(i=parseInt(i,10)),!1!==n&&(n=parseInt(n,10)),!1!==r&&(r=parseInt(r,10)),!1!==o&&(o=o.toString());var c=s[12>e?"amNames":"pmNames"][0],u=e!==parseInt(this.hour,10)||t!==parseInt(this.minute,10)||i!==parseInt(this.second,10)||n!==parseInt(this.millisec,10)||r!==parseInt(this.microsec,10)||this.ampm.length>0&&12>e!=(-1!==$.inArray(this.ampm.toUpperCase(),this.amNames))||null!==this.timezone&&o!==this.timezone.toString();if(u&&(!1!==e&&(this.hour=e),!1!==t&&(this.minute=t),!1!==i&&(this.second=i),!1!==n&&(this.millisec=n),!1!==r&&(this.microsec=r),!1!==o&&(this.timezone=o),this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),this.support.ampm&&(this.ampm=c),this.formattedTime=$.datepicker.formatTime(s.timeFormat,this,s),this.$timeObj&&(this.$timeObj.val(a===s.timeFormat?this.formattedTime+l:$.datepicker.formatTime(a,this,s)+l),this.$timeObj[0].setSelectionRange)){var d=this.$timeObj[0].selectionStart,p=this.$timeObj[0].selectionEnd;this.$timeObj[0].setSelectionRange(d,p)}this.timeDefined=!0,u&&this._updateDateTime()}},_onSelectHandler:function(){var e=this._defaults.onSelect||this.inst.settings.onSelect,t=this.$input?this.$input[0]:null;e&&t&&e.apply(t,[this.formattedDateTime,this])},_updateDateTime:function(e){var t=(e=this.inst||e).currentYear>0?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(e.selectedYear,e.selectedMonth,e.selectedDay),i=$.datepicker._daylightSavingAdjust(t),n=$.datepicker._get(e,"dateFormat"),r=$.datepicker._getFormatConfig(e),o=null!==i&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(n,null===i?new Date:i,r);var s=this.formattedDate;if(""===e.lastVal&&(e.currentYear=e.selectedYear,e.currentMonth=e.selectedMonth,e.currentDay=e.selectedDay),!0===this._defaults.timeOnly&&!1===this._defaults.timeOnlyShowDate?s=this.formattedTime:(!0!==this._defaults.timeOnly&&(this._defaults.alwaysSetTime||o)||!0===this._defaults.timeOnly&&!0===this._defaults.timeOnlyShowDate)&&(s+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=s,this._defaults.showTimepicker)if(this.$altInput&&!1===this._defaults.timeOnly&&!0===this._defaults.altFieldTimeOnly)this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate);else if(this.$altInput){this.$input.val(s);var a="",l=null!==this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,c=null!==this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;this._defaults.timeOnly||(a=this._defaults.altFormat?$.datepicker.formatDate(this._defaults.altFormat,null===i?new Date:i,r):this.formattedDate)&&(a+=l),a+=null!==this._defaults.altTimeFormat?$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+c:this.formattedTime+c,this.$altInput.val(a)}else this.$input.val(s);else this.$input.val(this.formattedDate);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var e=$.datepicker._getInst(this.$input.get(0)),t=$.datepicker._get(e,"timepicker");if(t&&t._defaults.timeOnly&&e.input.val()!==e.lastVal)try{$.datepicker._updateDatepicker(e)}catch(e){$.timepicker.log(e)}}},_controls:{slider:{create:function(e,t,i,n,r,o,s){var a=e._defaults.isRTL;return t.prop("slide",null).slider({orientation:"horizontal",value:a?-1*n:n,min:a?-1*o:r,max:a?-1*r:o,step:s,slide:function(t,n){e.control.value(e,$(this),i,a?-1*n.value:n.value),e._onTimeChange()},stop:function(t,i){e._onSelectHandler()}})},options:function(e,t,i,n,r){if(e._defaults.isRTL){if("string"==typeof n)return"min"===n||"max"===n?void 0!==r?t.slider(n,-1*r):Math.abs(t.slider(n)):t.slider(n);var o=n.min,s=n.max;return n.min=n.max=null,void 0!==o&&(n.max=-1*o),void 0!==s&&(n.min=-1*s),t.slider(n)}return"string"==typeof n&&void 0!==r?t.slider(n,r):t.slider(n)},value:function(e,t,i,n){return e._defaults.isRTL?void 0!==n?t.slider("value",-1*n):Math.abs(t.slider("value")):void 0!==n?t.slider("value",n):t.slider("value")}},select:{create:function(e,t,i,n,r,o,s){for(var a='<select class="ui-timepicker-select ui-state-default ui-corner-all" data-unit="'+i+'" data-min="'+r+'" data-max="'+o+'" data-step="'+s+'">',l=e._defaults.pickerTimeFormat||e._defaults.timeFormat,c=r;o>=c;c+=s)a+='<option value="'+c+'"'+(c===n?" selected":"")+">",a+="hour"===i?$.datepicker.formatTime($.trim(l.replace(/[^ht ]/gi,"")),{hour:c},e._defaults):"millisec"===i||"microsec"===i||c>=10?c:"0"+c.toString(),a+="</option>";return a+="</select>",t.children("select").remove(),$(a).appendTo(t).change(function(t){e._onTimeChange(),e._onSelectHandler(),e._afterInject()}),t},options:function(e,t,i,n,r){var o={},s=t.children("select");if("string"==typeof n){if(void 0===r)return s.data(n);o[n]=r}else o=n;return e.control.create(e,t,s.data("unit"),s.val(),o.min>=0?o.min:s.data("min"),o.max||s.data("max"),o.step||s.data("step"))},value:function(e,t,i,n){var r=t.children("select");return void 0!==n?r.val(n):r.val()}}}}),$.fn.extend({timepicker:function(e){e=e||{};var t=Array.prototype.slice.call(arguments);return"object"==typeof e&&(t[0]=$.extend(e,{timeOnly:!0})),$(this).each(function(){$.fn.datetimepicker.apply($(this),t)})},datetimepicker:function(e){var t=arguments;return"string"==typeof(e=e||{})?"getDate"===e||"option"===e&&2===t.length&&"string"==typeof t[1]?$.fn.datepicker.apply($(this[0]),t):this.each(function(){var e=$(this);e.datepicker.apply(e,t)}):this.each(function(){var t=$(this);t.datepicker($.timepicker._newInst(t,e)._defaults)})}}),$.datepicker.parseDateTime=function(e,t,i,n,r){var o=parseDateTimeInternal(e,t,i,n,r);if(o.timeObj){var s=o.timeObj;o.date.setHours(s.hour,s.minute,s.second,s.millisec),o.date.setMicroseconds(s.microsec)}return o.date},$.datepicker.parseTime=function(e,t,i){var n=extendRemove(extendRemove({},$.timepicker._defaults),i||{}),r=(e.replace(/\'.*?\'/g,"").indexOf("Z"),function(e,t,i){var n,r="^"+e.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(e){var t=e.length;switch(e.charAt(0).toLowerCase()){case"h":case"m":case"s":return 1===t?"(\\d?\\d)":"(\\d{"+t+"})";case"l":case"c":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return function(e,t){var i=[];return e&&$.merge(i,e),t&&$.merge(i,t),"("+(i=$.map(i,function(e){return e.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")})).join("|")+")?"}(i.amNames,i.pmNames);default:return"("+e.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(e){return"\\"+e})+")?"}}).replace(/\s/g,"\\s?")+i.timeSuffix+"$",o=function(e){var t=e.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),i={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(t)for(var n=0;n<t.length;n++)-1===i[t[n].toString().charAt(0)]&&(i[t[n].toString().charAt(0)]=n+1);return i}(e),s="",a={hour:0,minute:0,second:0,millisec:0,microsec:0};return!!(n=t.match(new RegExp(r,"i")))&&(-1!==o.t&&(void 0===n[o.t]||0===n[o.t].length?(s="",a.ampm=""):(s=-1!==$.inArray(n[o.t].toUpperCase(),$.map(i.amNames,function(e,t){return e.toUpperCase()}))?"AM":"PM",a.ampm=i["AM"===s?"amNames":"pmNames"][0])),-1!==o.h&&("AM"===s&&"12"===n[o.h]?a.hour=0:"PM"===s&&"12"!==n[o.h]?a.hour=parseInt(n[o.h],10)+12:a.hour=Number(n[o.h])),-1!==o.m&&(a.minute=Number(n[o.m])),-1!==o.s&&(a.second=Number(n[o.s])),-1!==o.l&&(a.millisec=Number(n[o.l])),-1!==o.c&&(a.microsec=Number(n[o.c])),-1!==o.z&&void 0!==n[o.z]&&(a.timezone=$.timepicker.timezoneOffsetNumber(n[o.z])),a)});return"function"==typeof n.parse?n.parse(e,t,n):"loose"===n.parse?function(e,t,i){try{var n=new Date("2012-01-01 "+t);if(isNaN(n.getTime())&&(n=new Date("2012-01-01T"+t),isNaN(n.getTime())&&(n=new Date("01/01/2012 "+t),isNaN(n.getTime()))))throw"Unable to parse time with native Date: "+t;return{hour:n.getHours(),minute:n.getMinutes(),second:n.getSeconds(),millisec:n.getMilliseconds(),microsec:n.getMicroseconds(),timezone:-1*n.getTimezoneOffset()}}catch(n){try{return r(e,t,i)}catch(i){$.timepicker.log("Unable to parse \ntimeString: "+t+"\ntimeFormat: "+e)}}return!1}(e,t,n):r(e,t,n)},$.datepicker.formatTime=function(e,t,i){i=i||{},i=$.extend({},$.timepicker._defaults,i),t=$.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},t);var n=e,r=i.amNames[0],o=parseInt(t.hour,10);return o>11&&(r=i.pmNames[0]),n.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(e){switch(e){case"HH":return("0"+o).slice(-2);case"H":return o;case"hh":return("0"+convert24to12(o)).slice(-2);case"h":return convert24to12(o);case"mm":return("0"+t.minute).slice(-2);case"m":return t.minute;case"ss":return("0"+t.second).slice(-2);case"s":return t.second;case"l":return("00"+t.millisec).slice(-3);case"c":return("00"+t.microsec).slice(-3);case"z":return $.timepicker.timezoneOffsetString(null===t.timezone?i.timezone:t.timezone,!1);case"Z":return $.timepicker.timezoneOffsetString(null===t.timezone?i.timezone:t.timezone,!0);case"T":return r.charAt(0).toUpperCase();case"TT":return r.toUpperCase();case"t":return r.charAt(0).toLowerCase();case"tt":return r.toLowerCase();default:return e.replace(/'/g,"")}})},$.datepicker._base_selectDate=$.datepicker._selectDate,$.datepicker._selectDate=function(e,t){var i,n=this._getInst($(e)[0]),r=this._get(n,"timepicker");r&&n.settings.showTimepicker?(r._limitMinMaxDateTime(n,!0),i=n.inline,n.inline=n.stay_open=!0,this._base_selectDate(e,t),n.inline=i,n.stay_open=!1,this._notifyChange(n),this._updateDatepicker(n)):this._base_selectDate(e,t)},$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(e){var t=e.input[0];if(!($.datepicker._curInst&&$.datepicker._curInst!==e&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!==t||"boolean"==typeof e.stay_open&&!1!==e.stay_open)){this._base_updateDatepicker(e);var i=this._get(e,"timepicker");i&&i._addTimePicker(e)}},$.datepicker._base_doKeyPress=$.datepicker._doKeyPress,$.datepicker._doKeyPress=function(e){var t=$.datepicker._getInst(e.target),i=$.datepicker._get(t,"timepicker");if(i&&$.datepicker._get(t,"constrainInput")){var n=i.support.ampm,r=null!==i._defaults.showTimezone?i._defaults.showTimezone:i.support.timezone,o=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),s=i._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,n?"APM":"").replace(/Tt/g,n?"AaPpMm":"").replace(/tT/g,n?"AaPpMm":"").replace(/T/g,n?"AP":"").replace(/tt/g,n?"apm":"").replace(/t/g,n?"ap":"")+" "+i._defaults.separator+i._defaults.timeSuffix+(r?i._defaults.timezoneList.join(""):"")+i._defaults.amNames.join("")+i._defaults.pmNames.join("")+o,a=String.fromCharCode(void 0===e.charCode?e.keyCode:e.charCode);return e.ctrlKey||" ">a||!o||s.indexOf(a)>-1}return $.datepicker._base_doKeyPress(e)},$.datepicker._base_updateAlternate=$.datepicker._updateAlternate,$.datepicker._updateAlternate=function(e){var t=this._get(e,"timepicker");if(t){var i=t._defaults.altField;if(i){var n=(t._defaults.altFormat||t._defaults.dateFormat,this._getDate(e)),r=$.datepicker._getFormatConfig(e),o="",s=t._defaults.altSeparator?t._defaults.altSeparator:t._defaults.separator,a=t._defaults.altTimeSuffix?t._defaults.altTimeSuffix:t._defaults.timeSuffix,l=null!==t._defaults.altTimeFormat?t._defaults.altTimeFormat:t._defaults.timeFormat;o+=$.datepicker.formatTime(l,t,t._defaults)+a,t._defaults.timeOnly||t._defaults.altFieldTimeOnly||null===n||(o=t._defaults.altFormat?$.datepicker.formatDate(t._defaults.altFormat,n,r)+s+o:t.formattedDate+s+o),$(i).val(e.input.val()?o:"")}}else $.datepicker._base_updateAlternate(e)},$.datepicker._base_doKeyUp=$.datepicker._doKeyUp,$.datepicker._doKeyUp=function(e){var t=$.datepicker._getInst(e.target),i=$.datepicker._get(t,"timepicker");if(i&&i._defaults.timeOnly&&t.input.val()!==t.lastVal)try{$.datepicker._updateDatepicker(t)}catch(e){$.timepicker.log(e)}return $.datepicker._base_doKeyUp(e)},$.datepicker._base_gotoToday=$.datepicker._gotoToday,$.datepicker._gotoToday=function(e){var t=this._getInst($(e)[0]);this._base_gotoToday(e);var i=this._get(t,"timepicker");if(i){var n=$.timepicker.timezoneOffsetNumber(i.timezone),r=new Date;r.setMinutes(r.getMinutes()+r.getTimezoneOffset()+parseInt(n,10)),this._setTime(t,r),this._setDate(t,r),i._onSelectHandler()}},$.datepicker._disableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var i=this._get(t,"timepicker");$(e).datepicker("getDate"),i&&(t.settings.showTimepicker=!1,i._defaults.showTimepicker=!1,i._updateDateTime(t))}},$.datepicker._enableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var i=this._get(t,"timepicker");$(e).datepicker("getDate"),i&&(t.settings.showTimepicker=!0,i._defaults.showTimepicker=!0,i._addTimePicker(t),i._updateDateTime(t))}},$.datepicker._setTime=function(e,t){var i=this._get(e,"timepicker");if(i){var n=i._defaults;i.hour=t?t.getHours():n.hour,i.minute=t?t.getMinutes():n.minute,i.second=t?t.getSeconds():n.second,i.millisec=t?t.getMilliseconds():n.millisec,i.microsec=t?t.getMicroseconds():n.microsec,i._limitMinMaxDateTime(e,!0),i._onTimeChange(),i._updateDateTime(e)}},$.datepicker._setTimeDatepicker=function(e,t,i){var n=this._getInst(e);if(n){var r,o=this._get(n,"timepicker");if(o)this._setDateFromField(n),t&&("string"==typeof t?(o._parseTime(t,i),(r=new Date).setHours(o.hour,o.minute,o.second,o.millisec),r.setMicroseconds(o.microsec)):(r=new Date(t.getTime())).setMicroseconds(t.getMicroseconds()),"Invalid Date"===r.toString()&&(r=void 0),this._setTime(n,r))}},$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker,$.datepicker._setDateDatepicker=function(e,t){var i=this._getInst(e),n=t;if(i){"string"==typeof t&&((n=new Date(t)).getTime()||(this._base_setDateDatepicker.apply(this,arguments),n=$(e).datepicker("getDate")));var r,o=this._get(i,"timepicker");n instanceof Date?(r=new Date(n.getTime())).setMicroseconds(n.getMicroseconds()):r=n,o&&r&&(o.support.timezone||null!==o._defaults.timezone||(o.timezone=-1*r.getTimezoneOffset()),n=$.timepicker.timezoneAdjust(n,$.timepicker.timezoneOffsetString(-n.getTimezoneOffset()),o.timezone),r=$.timepicker.timezoneAdjust(r,$.timepicker.timezoneOffsetString(-r.getTimezoneOffset()),o.timezone)),this._updateDatepicker(i),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(e,r,!0)}},$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker,$.datepicker._getDateDatepicker=function(e,t){var i=this._getInst(e);if(i){var n=this._get(i,"timepicker");if(n){void 0===i.lastVal&&this._setDateFromField(i,t);var r,o=this._getDate(i);return r=n.$altInput&&n._defaults.altFieldTimeOnly?n.$input.val()+" "+n.$altInput.val():"INPUT"!==n.$input.get(0).tagName&&n.$altInput?n.$altInput.val():n.$input.val(),o&&n._parseTime(r,!i.settings.timeOnly)&&(o.setHours(n.hour,n.minute,n.second,n.millisec),o.setMicroseconds(n.microsec),null!=n.timezone&&(n.support.timezone||null!==n._defaults.timezone||(n.timezone=-1*o.getTimezoneOffset()),o=$.timepicker.timezoneAdjust(o,n.timezone,$.timepicker.timezoneOffsetString(-o.getTimezoneOffset())))),o}return this._base_getDateDatepicker(e,t)}},$.datepicker._base_parseDate=$.datepicker.parseDate,$.datepicker.parseDate=function(e,t,i){var n;try{n=this._base_parseDate(e,t,i)}catch(r){if(!(r.indexOf(":")>=0))throw r;n=this._base_parseDate(e,t.substring(0,t.length-(r.length-r.indexOf(":")-2)),i),$.timepicker.log("Error parsing the date string: "+r+"\ndate string = "+t+"\ndate format = "+e)}return n},$.datepicker._base_formatDate=$.datepicker._formatDate,$.datepicker._formatDate=function(e,t,i,n){var r=this._get(e,"timepicker");return r?(r._updateDateTime(e),r.$input.val()):this._base_formatDate(e)},$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker,$.datepicker._optionDatepicker=function(e,t,i){var n,r=this._getInst(e);if(!r)return null;var o=this._get(r,"timepicker");if(o){var s,a,l,c,u=null,d=null,p=null,h=o._defaults.evnts,f={};if("string"==typeof t){if("minDate"===t||"minDateTime"===t)u=i;else if("maxDate"===t||"maxDateTime"===t)d=i;else if("onSelect"===t)p=i;else if(h.hasOwnProperty(t)){if(void 0===i)return h[t];f[t]=i,n={}}}else if("object"==typeof t)for(s in t.minDate?u=t.minDate:t.minDateTime?u=t.minDateTime:t.maxDate?d=t.maxDate:t.maxDateTime&&(d=t.maxDateTime),h)h.hasOwnProperty(s)&&t[s]&&(f[s]=t[s]);for(s in f)f.hasOwnProperty(s)&&(h[s]=f[s],n||(n=$.extend({},t)),delete n[s]);if(n&&isEmptyObject(n))return;if(u?(u=0===u?new Date:new Date(u),o._defaults.minDate=u,o._defaults.minDateTime=u):d?(d=0===d?new Date:new Date(d),o._defaults.maxDate=d,o._defaults.maxDateTime=d):p&&(o._defaults.onSelect=p),u||d)return l=(c=$(e)).datetimepicker("getDate"),a=this._base_optionDatepicker.call($.datepicker,e,n||t,i),c.datetimepicker("setDate",l),a}return void 0===i?this._base_optionDatepicker.call($.datepicker,e,t):this._base_optionDatepicker.call($.datepicker,e,n||t,i)};var isEmptyObject=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},extendRemove=function(e,t){for(var i in $.extend(e,t),t)(null===t[i]||void 0===t[i])&&(e[i]=t[i]);return e},detectSupport=function(e){var t=e.replace(/'.*?'/g,"").toLowerCase(),i=function(e,t){return-1!==e.indexOf(t)};return{hour:i(t,"h"),minute:i(t,"m"),second:i(t,"s"),millisec:i(t,"l"),microsec:i(t,"c"),timezone:i(t,"z"),ampm:i(t,"t")&&i(e,"h"),iso8601:i(e,"Z")}},convert24to12=function(e){return 0===(e%=12)&&(e=12),String(e)},computeEffectiveSetting=function(e,t){return e&&e[t]?e[t]:$.timepicker._defaults[t]},splitDateTime=function(e,t){var i=computeEffectiveSetting(t,"separator"),n=computeEffectiveSetting(t,"timeFormat").split(i).length,r=e.split(i),o=r.length;return o>1?{dateString:r.splice(0,o-n).join(i),timeString:r.splice(0,n).join(i)}:{dateString:e,timeString:""}},parseDateTimeInternal=function(e,t,i,n,r){var o,s,a;if(s=splitDateTime(i,r),o=$.datepicker._base_parseDate(e,s.dateString,n),""===s.timeString)return{date:o};if(!(a=$.datepicker.parseTime(t,s.timeString,r)))throw"Wrong time format";return{date:o,timeObj:a}},selectLocalTimezone=function(e,t){if(e&&e.timezone_select){var i=t||new Date;e.timezone_select.val(-i.getTimezoneOffset())}};$.timepicker=new Timepicker,$.timepicker.timezoneOffsetString=function(e,t){if(isNaN(e)||e>840||-720>e)return e;var i=e%60,n=(e-i)/60,r=t?":":"",o=(e>=0?"+":"-")+("0"+Math.abs(n)).slice(-2)+r+("0"+Math.abs(i)).slice(-2);return"+00:00"===o?"Z":o},$.timepicker.timezoneOffsetNumber=function(e){var t=e.toString().replace(":","");return"Z"===t.toUpperCase()?0:/^(\-|\+)\d{4}$/.test(t)?("-"===t.substr(0,1)?-1:1)*(60*parseInt(t.substr(1,2),10)+parseInt(t.substr(3,2),10)):parseInt(e,10)},$.timepicker.timezoneAdjust=function(e,t,i){var n=$.timepicker.timezoneOffsetNumber(t),r=$.timepicker.timezoneOffsetNumber(i);return isNaN(r)||e.setMinutes(e.getMinutes()+-n- -r),e},$.timepicker.timeRange=function(e,t,i){return $.timepicker.handleRange("timepicker",e,t,i)},$.timepicker.datetimeRange=function(e,t,i){$.timepicker.handleRange("datetimepicker",e,t,i)},$.timepicker.dateRange=function(e,t,i){$.timepicker.handleRange("datepicker",e,t,i)},$.timepicker.handleRange=function(e,t,i,n){function r(r,o){var s=t[e]("getDate"),a=i[e]("getDate"),l=r[e]("getDate");if(null!==s){var c=new Date(s.getTime()),u=new Date(s.getTime());c.setMilliseconds(c.getMilliseconds()+n.minInterval),u.setMilliseconds(u.getMilliseconds()+n.maxInterval),n.minInterval>0&&c>a?i[e]("setDate",c):n.maxInterval>0&&a>u?i[e]("setDate",u):s>a&&o[e]("setDate",l)}}function o(t,i,r){if(t.val()){var o=t[e].call(t,"getDate");null!==o&&n.minInterval>0&&("minDate"===r&&o.setMilliseconds(o.getMilliseconds()+n.minInterval),"maxDate"===r&&o.setMilliseconds(o.getMilliseconds()-n.minInterval)),o.getTime&&i[e].call(i,"option",r,o)}}n=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},n);var s=!1;return"timepicker"===e&&(s=!0,e="datetimepicker"),$.fn[e].call(t,$.extend({timeOnly:s,onClose:function(e,t){r($(this),i)},onSelect:function(e){o($(this),i,"minDate")}},n,n.start)),$.fn[e].call(i,$.extend({timeOnly:s,onClose:function(e,i){r($(this),t)},onSelect:function(e){o($(this),t,"maxDate")}},n,n.end)),r(t,i),o(t,i,"minDate"),o(i,t,"maxDate"),$([t.get(0),i.get(0)])},$.timepicker.log=function(){window.console&&window.console.log&&window.console.log.apply&&window.console.log.apply(window.console,Array.prototype.slice.call(arguments))},$.timepicker._util={_extendRemove:extendRemove,_isEmptyObject:isEmptyObject,_convert24to12:convert24to12,_detectSupport:detectSupport,_selectLocalTimezone:selectLocalTimezone,_computeEffectiveSetting:computeEffectiveSetting,_splitDateTime:splitDateTime,_parseDateTimeInternal:parseDateTimeInternal},Date.prototype.getMicroseconds||(Date.prototype.microseconds=0,Date.prototype.getMicroseconds=function(){return this.microseconds},Date.prototype.setMicroseconds=function(e){return this.setMilliseconds(this.getMilliseconds()+Math.floor(e/1e3)),this.microseconds=e%1e3,this}),$.timepicker.version="1.6.3"}}),function(e,t,i){"use strict";var n=/^.*(youtu\.be\/|youtube\.com\/v\/|youtube\.com\/embed\/|youtube\.com\/watch\?v=|youtube\.com\/watch\?.*\&v=)([^#\&\?]*).*/i;e.fn.backstretch=function(i,n){var r,o=arguments;return 0===e(t).scrollTop()&&t.scrollTo(0,0),this.each(function(t){var s=e(this),a=s.data("backstretch");if(a){if("string"==typeof o[0]&&"function"==typeof a[o[0]]){var l=a[o[0]].apply(a,Array.prototype.slice.call(o,1));return l===a&&(l=void 0),void(void 0!==l&&((r=r||[])[t]=l))}n=e.extend(a.options,n),a.hasOwnProperty("destroy")&&a.destroy(!0)}if(!i||i&&0===i.length){var c=s.css("background-image");c&&"none"!==c?i=[{url:s.css("backgroundImage").replace(/url\(|\)|"|'/g,"")}]:e.error("No images were supplied for Backstretch, or element must have a CSS-defined background image.")}a=new v(this,i,n||{}),s.data("backstretch",a)}),r?1===r.length?r[0]:r:this},e.backstretch=function(t,i){return e("body").backstretch(t,i).data("backstretch")},e.expr[":"].backstretch=function(t){return void 0!==e(t).data("backstretch")},e.fn.backstretch.defaults={duration:5e3,transition:"fade",transitionDuration:0,animateFirst:!0,alignX:.5,alignY:.5,paused:!1,start:0,preload:2,preloadSize:1,resolutionRefreshRate:2500,resolutionChangeRatioThreshold:.1};var r,o,s,a,l,c,u={wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},itemWrapper:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"100%",height:"100%",zIndex:-999999},item:{position:"absolute",margin:0,padding:0,border:"none",width:"100%",height:"100%",maxWidth:"none"}},d=(r=function(e){for(var t=1;t<e.length;t++){for(var i=e[t],n=t;e[n-1]&&parseInt(e[n-1].width,10)>parseInt(i.width,10);)e[n]=e[n-1],--n;e[n]=i}return e},o=function(e,i,n){for(var r,o,s=t.devicePixelRatio||1,a=L(),l=($(),i>e?"portrait":e>i?"landscape":"square"),c=0,u=0;u<n.length&&("string"==typeof(o=n[u])&&(o=n[u]={url:o}),o.pixelRatio&&"auto"!==o.pixelRatio&&parseFloat(o.pixelRatio)!==s||o.deviceOrientation&&o.deviceOrientation!==a||o.windowOrientation&&o.windowOrientation!==a||o.orientation&&o.orientation!==l||(c=u,r=e,"auto"===o.pixelRatio&&(e*=s),!(o.width>=r)));u++);return n[Math.min(u,c)]},s=function(e,t){if("string"==typeof e)e=e.replace(/{{(width|height)}}/g,t);else if(e instanceof Array)for(var i=0;i<e.length;i++)e[i].src?e[i].src=s(e[i].src,t):e[i]=s(e[i],t);return e},function(t,i){for(var n=t.width(),a=t.height(),l=[],c=function(e,t){return"width"===t?n:"height"===t?a:e},u=0;u<i.length;u++)if(e.isArray(i[u])){i[u]=r(i[u]);var d=o(n,a,i[u]);l.push(d)}else{"string"==typeof i[u]&&(i[u]={url:i[u]});var p=e.extend({},i[u]);p.url=s(p.url,c),l.push(p)}return l}),p=function(e){return n.test(e.url)||e.isVideo},h=(a=[],l=function(e){for(var t=0;t<a.length;t++)if(a[t].src===e.src)return a[t];return a.push(e),e},c=function(e,t,i){"function"==typeof t&&t.call(e,i)},function t(i,n,r,o,s){if(void 0!==i){e.isArray(i)||(i=[i]),arguments.length<5&&"function"==typeof arguments[arguments.length-1]&&(s=arguments[arguments.length-1]),n="function"!=typeof n&&n?n:0,r="function"==typeof r||!r||r<0?i.length:Math.min(r,i.length),o="function"!=typeof o&&o?o:1,n>=i.length&&(n=0,r=0),o<0&&(o=r),o=Math.min(o,r);var a=i.slice(n+o,r-o);if(i=i.slice(n,o),r=i.length)for(var u,d=0,h=function(){++d===r&&(c(i,s,!a),t(a,0,0,o,s))},f=0;f<i.length;f++)p(i[f])||((u=new Image).src=i[f].url,(u=l(u)).complete?h():e(u).on("load error",h));else c(i,s,!0)}}),f=function(t){for(var i=[],n=0;n<t.length;n++)"string"==typeof t[n]?i.push({url:t[n]}):e.isArray(t[n])?i.push(f(t[n])):i.push(m(t[n]));return i},m=function(e,i){return(e.centeredX||e.centeredY)&&(t.console&&t.console.log&&t.console.log("jquery.backstretch: `centeredX`/`centeredY` is deprecated, please use `alignX`/`alignY`"),e.centeredX&&(e.alignX=.5),e.centeredY&&(e.alignY=.5)),void 0!==e.speed&&(t.console&&t.console.log&&t.console.log("jquery.backstretch: `speed` is deprecated, please use `transitionDuration`"),e.transitionDuration=e.speed,e.transition="fade"),void 0!==e.resolutionChangeRatioTreshold&&(t.console.log("jquery.backstretch: `treshold` is a typo!"),e.resolutionChangeRatioThreshold=e.resolutionChangeRatioTreshold),void 0!==e.fadeFirst&&(e.animateFirst=e.fadeFirst),void 0!==e.fade&&(e.transitionDuration=e.fade,e.transition="fade"),g(e)},g=function(e,t){return"left"===e.alignX?e.alignX=0:"center"===e.alignX?e.alignX=.5:"right"===e.alignX?e.alignX=1:(void 0!==e.alignX||t)&&(e.alignX=parseFloat(e.alignX),isNaN(e.alignX)&&(e.alignX=.5)),"top"===e.alignY?e.alignY=0:"center"===e.alignY?e.alignY=.5:"bottom"===e.alignY?e.alignY=1:(void 0!==e.alignX||t)&&(e.alignY=parseFloat(e.alignY),isNaN(e.alignY)&&(e.alignY=.5)),e},v=function(i,n,r){this.options=e.extend({},e.fn.backstretch.defaults,r||{}),this.firstShow=!0,m(this.options,!0),this.images=f(e.isArray(n)?n:[n]),this.options.paused&&(this.paused=!0),this.options.start>=this.images.length&&(this.options.start=this.images.length-1),this.options.start<0&&(this.options.start=0),this.isBody=i===document.body;var o=e(t);this.$container=e(i),this.$root=this.isBody?D?o:e(document):this.$container,this.originalImages=this.images,this.images=d(this.options.alwaysTestWindowResolution?o:this.$root,this.originalImages),h(this.images,this.options.start||0,this.options.preload||1);var s=this.$container.children(".backstretch").first();if(this.$wrap=s.length?s:e('<div class="backstretch"></div>').css(this.options.bypassCss?{}:u.wrap).appendTo(this.$container),!this.options.bypassCss){if(!this.isBody){var a=this.$container.css("position"),l=this.$container.css("zIndex");this.$container.css({position:"static"===a?"relative":a,zIndex:"auto"===l?0:l}),this.$wrap.css({zIndex:-999998})}this.$wrap.css({position:this.isBody&&D?"fixed":"absolute"})}this.index=this.options.start,this.show(this.index),o.on("resize.backstretch",e.proxy(this.resize,this)).on("orientationchange.backstretch",e.proxy(function(){this.isBody&&0===t.pageYOffset&&(t.scrollTo(0,1),this.resize())},this))};v.prototype={resize:function(){try{var i=this.options.alwaysTestWindowResolution?e(t):this.$root,n=i.width(),r=i.height(),o=n/(this._lastResizeContainerWidth||0),s=r/(this._lastResizeContainerHeight||0),a=this.options.resolutionChangeRatioThreshold||0;if((n!==this._lastResizeContainerWidth||r!==this._lastResizeContainerHeight)&&(Math.abs(o-1)>=a||isNaN(o)||Math.abs(s-1)>=a||isNaN(s))&&(this._lastResizeContainerWidth=n,this._lastResizeContainerHeight=r,this.images=d(i,this.originalImages),this.options.preload&&h(this.images,(this.index+1)%this.images.length,this.options.preload),1===this.images.length&&this._currentImage.url!==this.images[0].url)){var l=this;clearTimeout(l._selectAnotherResolutionTimeout),l._selectAnotherResolutionTimeout=setTimeout(function(){l.show(0)},this.options.resolutionRefreshRate)}var c={left:0,top:0,right:"auto",bottom:"auto"},u=this.isBody?this.$root.width():this.$root.innerWidth(),p=this.isBody?t.innerHeight?t.innerHeight:this.$root.height():this.$root.innerHeight(),f=u,m=f/this.$itemWrapper.data("ratio"),g=e.Event("backstretch.resize",{relatedTarget:this.$container[0]}),v=void 0===this._currentImage.alignX?this.options.alignX:this._currentImage.alignX,y=void 0===this._currentImage.alignY?this.options.alignY:this._currentImage.alignY;m>=p?c.top=-(m-p)*y:(((f=(m=p)*this.$itemWrapper.data("ratio"))-u)/2,c.left=-(f-u)*v),this.options.bypassCss||this.$wrap.css({width:u,height:p}).find(">.backstretch-item").not(".deleteable").each(function(){e(this).find("img,video,iframe").css({width:f,height:m}).css(c)}),this.$container.trigger(g,this)}catch(e){}return this},show:function(t,i){if(!(Math.abs(t)>this.images.length-1)){var n=this,r=n.$wrap.find(">.backstretch-item").addClass("deleteable"),o=n.videoWrapper,s={relatedTarget:n.$container[0]};n.$container.trigger(e.Event("backstretch.before",s),[n,t]),this.index=t;var a=n.images[t];clearTimeout(n._cycleTimeout),delete n.videoWrapper;var l=p(a);return l?(n.videoWrapper=new y(a),n.$item=n.videoWrapper.$video.css("pointer-events","none")):n.$item=e("<img />"),n.$itemWrapper=e('<div class="backstretch-item">').append(n.$item),this.options.bypassCss?n.$itemWrapper.css({display:"none"}):(n.$itemWrapper.css(u.itemWrapper),n.$item.css(u.item)),n.$item.bind(l?"canplay":"load",function(a){var c=e(this).parent(),u=c.data("options");i&&(u=e.extend({},u,i));var d=this.naturalWidth||this.videoWidth||this.width,p=this.naturalHeight||this.videoHeight||this.height;c.data("ratio",d/p);var h=function(e){return void 0!==u[e]?u[e]:n.options[e]},f=h("transition"),m=h("transitionEasing"),g=h("transitionDuration"),v=function(){o&&(o.stop(),o.destroy()),r.remove(),!n.paused&&n.images.length>1&&n.cycle(),n.options.bypassCss||n.isBody||n.$container.css("background-image","none"),e(["after","show"]).each(function(){n.$container.trigger(e.Event("backstretch."+this,s),[n,t])}),l&&n.videoWrapper.play()};n.firstShow&&!n.options.animateFirst||!g||!f?(c.show(),v()):function(t){var i=t.transition||"fade";"string"==typeof i&&i.indexOf("|")>-1&&(i=i.split("|")),i instanceof Array&&(i=i[Math.round(Math.random()*(i.length-1))]);var n=t.new,r=t.old?t.old:e([]);switch(i.toString().toLowerCase()){default:case"fade":n.fadeIn({duration:t.duration,complete:t.complete,easing:t.easing||void 0});break;case"fadeinout":case"fade_in_out":var o=function(){n.fadeIn({duration:t.duration/2,complete:t.complete,easing:t.easing||void 0})};r.length?r.fadeOut({duration:t.duration/2,complete:o,easing:t.easing||void 0}):o();break;case"pushleft":case"push_left":case"pushright":case"push_right":case"pushup":case"push_up":case"pushdown":case"push_down":case"coverleft":case"cover_left":case"coverright":case"cover_right":case"coverup":case"cover_up":case"coverdown":case"cover_down":var s=i.match(/^(cover|push)_?(.*)$/),a="left"===s[2]?"right":"right"===s[2]?"left":"down"===s[2]?"top":"up"===s[2]?"bottom":"right",l={display:""},c={};if(l[a]="-100%",c[a]=0,n.css(l).animate(c,{duration:t.duration,complete:function(){n.css(a,""),t.complete.apply(this,arguments)},easing:t.easing||void 0}),"push"===s[1]&&r.length){var u={};u[a]="100%",r.animate(u,{duration:t.duration,complete:function(){r.css("display","none")},easing:t.easing||void 0})}}}({new:c,old:r,transition:f,duration:g,easing:m,complete:v}),n.firstShow=!1,n.resize()}),n.$itemWrapper.appendTo(n.$wrap),n.$item.attr("alt",a.alt||""),n.$itemWrapper.data("options",a),l||n.$item.attr("src",a.url),n._currentImage=a,n}},current:function(){return this.index},next:function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift(this.index<this.images.length-1?this.index+1:0),this.show.apply(this,e)},prev:function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift(0===this.index?this.images.length-1:this.index-1),this.show.apply(this,e)},pause:function(){return this.paused=!0,this.videoWrapper&&this.videoWrapper.pause(),this},resume:function(){return this.paused=!1,this.videoWrapper&&this.videoWrapper.play(),this.cycle(),this},cycle:function(){if(this.images.length>1){clearTimeout(this._cycleTimeout);var t=this._currentImage&&this._currentImage.duration||this.options.duration,i=p(this._currentImage),n=function(){this.$item.off(".cycle"),this.paused||this.next()};if(i){if(!this._currentImage.loop){var r=0;this.$item.on("playing.cycle",function(){var t=e(this).data("player");clearTimeout(r),r=setTimeout(function(){t.pause(),t.$video.trigger("ended")},1e3*(t.getDuration()-t.getCurrentTime()))}).on("ended.cycle",function(){clearTimeout(r)})}this.$item.on("error.cycle initerror.cycle",e.proxy(n,this))}i&&!this._currentImage.duration?this.$item.on("ended.cycle",e.proxy(n,this)):this._cycleTimeout=setTimeout(e.proxy(n,this),t)}return this},destroy:function(i){e(t).off("resize.backstretch orientationchange.backstretch"),this.videoWrapper&&this.videoWrapper.destroy(),clearTimeout(this._cycleTimeout),i||this.$wrap.remove(),this.$container.removeData("backstretch")}};var y=function(){this.init.apply(this,arguments)};y.prototype.init=function(i){var r,o=this,s=function(){o.$video=r,o.video=r[0]},a="video";if(i.url instanceof Array||!n.test(i.url)||(a="youtube"),o.type=a,"youtube"===a){y.loadYoutubeAPI(),o.ytId=i.url.match(n)[2];var l="https://www.youtube.com/embed/"+o.ytId+"?rel=0&autoplay=0&showinfo=0&controls=0&modestbranding=1&cc_load_policy=0&disablekb=1&iv_load_policy=3&loop=0&enablejsapi=1&origin="+encodeURIComponent(t.location.origin);o.__ytStartMuted=!!i.mute||void 0===i.mute,r=e("<iframe />").attr({src_to_load:l}).css({border:0,margin:0,padding:0}).data("player",o),i.loop&&r.on("ended.loop",function(){o.__manuallyStopped||o.play()}),o.ytReady=!1,s(),t.YT?(o._initYoutube(),r.trigger("initsuccess")):e(t).one("youtube_api_load",function(){o._initYoutube(),r.trigger("initsuccess")})}else{r=e("<video>").prop("autoplay",!1).prop("controls",!1).prop("loop",!!i.loop).prop("muted",!!i.mute||void 0===i.mute).prop("preload","auto").prop("poster",i.poster||"");for(var c=i.url instanceof Array?i.url:[i.url],u=0;u<c.length;u++){var d=c[u];"string"==typeof d&&(d={src:d}),e("<source>").attr("src",d.src).attr("type",d.type||null).appendTo(r)}r[0].canPlayType&&c.length?r.trigger("initsuccess"):r.trigger("initerror"),s()}},y.prototype._initYoutube=function(){var i=this,n=t.YT;i.$video.attr("src",i.$video.attr("src_to_load")).removeAttr("src_to_load");var r=!!i.$video[0].parentNode;if(!r){var o=e("<div>").css("display","none !important").appendTo(document.body);i.$video.appendTo(o)}var s=new n.Player(i.video,{events:{onReady:function(){i.__ytStartMuted&&s.mute(),r||(i.$video[0].parentNode===o[0]&&i.$video.detach(),o.remove()),i.ytReady=!0,i._updateYoutubeSize(),i.$video.trigger("canplay")},onStateChange:function(e){switch(e.data){case n.PlayerState.PLAYING:i.$video.trigger("playing");break;case n.PlayerState.ENDED:i.$video.trigger("ended");break;case n.PlayerState.PAUSED:i.$video.trigger("pause");break;case n.PlayerState.BUFFERING:i.$video.trigger("waiting");break;case n.PlayerState.CUED:i.$video.trigger("canplay")}},onPlaybackQualityChange:function(){i._updateYoutubeSize(),i.$video.trigger("resize")},onError:function(e){i.hasError=!0,i.$video.trigger({type:"error",error:e})}}});return i.ytPlayer=s,i},y.prototype._updateYoutubeSize=function(){switch(this.ytPlayer.getPlaybackQuality()||"medium"){case"small":this.video.videoWidth=426,this.video.videoHeight=240;break;case"medium":this.video.videoWidth=640,this.video.videoHeight=360;break;default:case"large":this.video.videoWidth=854,this.video.videoHeight=480;break;case"hd720":this.video.videoWidth=1280,this.video.videoHeight=720;break;case"hd1080":this.video.videoWidth=1920,this.video.videoHeight=1080;break;case"highres":this.video.videoWidth=2560,this.video.videoHeight=1440}return this},y.prototype.play=function(){return this.__manuallyStopped=!1,"youtube"===this.type?this.ytReady&&(this.$video.trigger("play"),this.ytPlayer.playVideo()):this.video.play(),this},y.prototype.pause=function(){return this.__manuallyStopped=!1,"youtube"===this.type?this.ytReady&&this.ytPlayer.pauseVideo():this.video.pause(),this},y.prototype.stop=function(){return this.__manuallyStopped=!0,"youtube"===this.type?this.ytReady&&(this.ytPlayer.pauseVideo(),this.ytPlayer.seekTo(0)):(this.video.pause(),this.video.currentTime=0),this},y.prototype.destroy=function(){return this.ytPlayer&&this.ytPlayer.destroy(),this.$video.remove(),this},y.prototype.getCurrentTime=function(e){return"youtube"!==this.type?this.video.currentTime:this.ytReady?this.ytPlayer.getCurrentTime():0},y.prototype.setCurrentTime=function(e){return"youtube"===this.type?this.ytReady&&this.ytPlayer.seekTo(e,!0):this.video.currentTime=e,this},y.prototype.getDuration=function(){return"youtube"!==this.type?this.video.duration:this.ytReady?this.ytPlayer.getDuration():0},y.loadYoutubeAPI=function(){if(!t.YT){e("script[src*=www\\.youtube\\.com\\/iframe_api]").length||e('<script type="text/javascript" src="https://www.youtube.com/iframe_api">').appendTo("body");var i=setInterval(function(){t.YT&&t.YT.loaded&&(e(t).trigger("youtube_api_load"),clearTimeout(i))},50)}};var b,w,x,k,C,_,S,M,T,O,L=function(){if("matchMedia"in t){if(t.matchMedia("(orientation: portrait)").matches)return"portrait";if(t.matchMedia("(orientation: landscape)").matches)return"landscape"}return screen.height>screen.width?"portrait":"landscape"},$=function(){return t.innerHeight>t.innerWidth?"portrait":t.innerWidth>t.innerHeight?"landscape":"square"},D=(b=navigator.userAgent,w=navigator.platform,x=b.match(/AppleWebKit\/([0-9]+)/),k=!!x&&x[1],C=b.match(/Fennec\/([0-9]+)/),_=!!C&&C[1],S=b.match(/Opera Mobi\/([0-9]+)/),M=!!S&&S[1],T=b.match(/MSIE ([0-9]+)/),O=!!T&&T[1],!((w.indexOf("iPhone")>-1||w.indexOf("iPad")>-1||w.indexOf("iPod")>-1)&&k&&k<534||t.operamini&&"[object OperaMini]"==={}.toString.call(t.operamini)||S&&M<7458||b.indexOf("Android")>-1&&k&&k<533||_&&_<6||"palmGetResource"in t&&k&&k<534||b.indexOf("MeeGo")>-1&&b.indexOf("NokiaBrowser/8.5.0")>-1||O&&O<=6))}(jQuery,window),function(e,t,i,n){var r={bounds:!0,strictBounds:!1,country:null,map:!1,details:!1,detailsAttribute:"name",detailsScope:null,autoselect:!0,location:!1,mapOptions:{zoom:14,scrollwheel:!1,mapTypeId:"roadmap"},markerOptions:{draggable:!1},maxZoom:16,types:["geocode"],blur:!1,geocodeAfterResult:!1,restoreValueAfterBlur:!1},o="street_address route intersection political country administrative_area_level_1 administrative_area_level_2 administrative_area_level_3 colloquial_area locality sublocality neighborhood premise subpremise postal_code natural_feature airport park point_of_interest post_box street_number floor room lat lng viewport location formatted_address location_type bounds".split(" "),s="id place_id url website vicinity reference name rating international_phone_number icon formatted_phone_number".split(" ");function a(t,i){this.options=e.extend(!0,{},r,i),i&&i.types&&(this.options.types=i.types),this.input=t,this.$input=e(t),this._defaults=r,this._name="geocomplete",this.init()}e.extend(a.prototype,{init:function(){this.initMap(),this.initMarker(),this.initGeocoder(),this.initDetails(),this.initLocation()},initMap:function(){this.options.map&&("function"!=typeof this.options.map.setCenter?(this.map=new google.maps.Map(e(this.options.map)[0],this.options.mapOptions),google.maps.event.addListener(this.map,"click",e.proxy(this.mapClicked,this)),google.maps.event.addListener(this.map,"dragend",e.proxy(this.mapDragged,this)),google.maps.event.addListener(this.map,"idle",e.proxy(this.mapIdle,this)),google.maps.event.addListener(this.map,"zoom_changed",e.proxy(this.mapZoomed,this))):this.map=this.options.map)},initMarker:function(){if(this.map){var t=e.extend(this.options.markerOptions,{map:this.map});t.disabled||(this.marker=new google.maps.Marker(t),google.maps.event.addListener(this.marker,"dragend",e.proxy(this.markerDragged,this)))}},initGeocoder:function(){var t={types:this.options.types,bounds:!0===this.options.bounds?null:this.options.bounds,componentRestrictions:this.options.componentRestrictions,strictBounds:this.options.strictBounds};this.options.country&&(t.componentRestrictions={country:this.options.country}),this.autocomplete=new google.maps.places.Autocomplete(this.input,t),this.geocoder=new google.maps.Geocoder,this.map&&!0===this.options.bounds&&this.autocomplete.bindTo("bounds",this.map),google.maps.event.addListener(this.autocomplete,"place_changed",e.proxy(this.placeChanged,this)),this.$input.on("keypress."+this._name,function(e){if(13===e.keyCode)return!1}),!0===this.options.geocodeAfterResult&&this.$input.bind("keypress."+this._name,e.proxy(function(){9!=event.keyCode&&!0===this.selected&&(this.selected=!1)},this)),this.$input.bind("geocode."+this._name,e.proxy(function(){this.find()},this)),this.$input.bind("geocode:result."+this._name,e.proxy(function(){this.lastInputVal=this.$input.val()},this)),!0===this.options.blur&&this.$input.on("blur."+this._name,e.proxy(function(){!0===this.options.geocodeAfterResult&&!0===this.selected||(!0===this.options.restoreValueAfterBlur&&!0===this.selected?setTimeout(e.proxy(this.restoreLastValue,this),0):this.find())},this))},initDetails:function(){if(this.options.details){if(this.options.detailsScope)var t=e(this.input).parents(this.options.detailsScope).find(this.options.details);else t=e(this.options.details);var i=this.options.detailsAttribute,n={};e.each(o,function(e,t){r(t),r(t+"_short")}),e.each(s,function(e,t){r(t)}),this.$details=t,this.details=n}function r(e){n[e]=t.find("["+i+"="+e+"]")}},initLocation:function(){var e,t=this.options.location;t&&("string"!=typeof t?(t instanceof Array&&(e=new google.maps.LatLng(t[0],t[1])),t instanceof google.maps.LatLng&&(e=t),e&&(this.map&&this.map.setCenter(e),this.marker&&this.marker.setPosition(e))):this.find(t))},destroy:function(){this.map&&(google.maps.event.clearInstanceListeners(this.map),google.maps.event.clearInstanceListeners(this.marker)),this.autocomplete.unbindAll(),google.maps.event.clearInstanceListeners(this.autocomplete),google.maps.event.clearInstanceListeners(this.input),this.$input.removeData(),this.$input.off(this._name),this.$input.unbind("."+this._name)},find:function(e){this.geocode({address:e||this.$input.val()})},geocode:function(t){t.address&&(this.options.bounds&&!t.bounds&&(!0===this.options.bounds?t.bounds=this.map&&this.map.getBounds():t.bounds=this.options.bounds),this.options.country&&(t.region=this.options.country),this.geocoder.geocode(t,e.proxy(this.handleGeocode,this)))},selectFirstResult:function(){var t="";e(".pac-item-selected")[0]&&(t="-selected");var i=e(".pac-container:visible .pac-item"+t+":first span:nth-child(2)").text(),n=e(".pac-container:visible .pac-item"+t+":first span:nth-child(3)").text(),r=i;return n&&(r+=" - "+n),this.$input.val(r),r},restoreLastValue:function(){this.lastInputVal&&this.$input.val(this.lastInputVal)},handleGeocode:function(e,t){if(t===google.maps.GeocoderStatus.OK){var i=e[0];this.$input.val(i.formatted_address),this.update(i),e.length>1&&this.trigger("geocode:multiple",e)}else this.trigger("geocode:error",t)},trigger:function(e,t){this.$input.trigger(e,[t])},center:function(e){e.viewport?(this.map.fitBounds(e.viewport),this.map.getZoom()>this.options.maxZoom&&this.map.setZoom(this.options.maxZoom)):(this.map.setZoom(this.options.maxZoom),this.map.setCenter(e.location)),this.marker&&(this.marker.setPosition(e.location),this.marker.setAnimation(this.options.markerOptions.animation))},update:function(e){this.map&&this.center(e.geometry),this.$details&&this.fillDetails(e),this.trigger("geocode:result",e)},fillDetails:function(t){var i={},n=t.geometry,r=n.viewport,o=n.bounds;e.each(t.address_components,function(t,n){n.types[0];e.each(n.types,function(e,t){i[t]=n.long_name,i[t+"_short"]=n.short_name})}),e.each(s,function(e,n){i[n]=t[n]}),e.extend(i,{formatted_address:t.formatted_address,location_type:n.location_type||"PLACES",viewport:r,bounds:o,location:n.location,lat:n.location.lat(),lng:n.location.lng()}),e.each(this.details,e.proxy(function(e,t){var n=i[e];this.setDetail(t,n)},this)),this.data=i},setDetail:function(e,t){void 0===t?t="":"function"==typeof t.toUrlValue&&(t=t.toUrlValue()),e.is(":input")?e.val(t):e.text(t)},markerDragged:function(e){this.trigger("geocode:dragged",e.latLng)},mapClicked:function(e){this.trigger("geocode:click",e.latLng)},mapDragged:function(e){this.trigger("geocode:mapdragged",this.map.getCenter())},mapIdle:function(e){this.trigger("geocode:idle",this.map.getCenter())},mapZoomed:function(e){this.trigger("geocode:zoom",this.map.getZoom())},resetMarker:function(){this.marker.setPosition(this.data.location),this.setDetail(this.details.lat,this.data.location.lat()),this.setDetail(this.details.lng,this.data.location.lng())},placeChanged:function(){var e=this.autocomplete.getPlace();if(this.selected=!0,e.geometry)this.update(e);else if(this.options.autoselect){var t=this.selectFirstResult();this.find(t)}}}),e.fn.geocomplete=function(t){var i="plugin_geocomplete";if("string"==typeof t){var n=e(this).data(i)||e(this).geocomplete().data(i),r=n[t];return"function"==typeof r?(r.apply(n,Array.prototype.slice.call(arguments,1)),e(this)):(2==arguments.length&&(r=arguments[1]),r)}return this.each(function(){var n=e.data(this,i);n||(n=new a(this,t),e.data(this,i,n))})}}(jQuery,window,document),function(e,t,i,n){e.fn.quicksearch=function(i,n){var r,o,s,a,l="",c=this,u=e.extend({delay:100,selector:null,stripeRows:null,loader:null,noResults:"",matchedResultsCount:0,bind:"keyup",onBefore:function(){},onAfter:function(){},show:function(){this.style.display=""},hide:function(){this.style.display="none"},prepareQuery:function(e){return e.toLowerCase().split(" ")},testQuery:function(e,t,i){for(var n=0;n<e.length;n+=1)if(-1===t.indexOf(e[n]))return!1;return!0}},n);return this.go=function(){for(var e=0,t=0,i=!0,n=u.prepareQuery(l),r=0===l.replace(" ","").length,a=(e=0,s.length);e<a;e++)r||u.testQuery(n,o[e],s[e])?(u.show.apply(s[e]),i=!1,t++):u.hide.apply(s[e]);return i?this.results(!1):(this.results(!0),this.stripe()),this.matchedResultsCount=t,this.loader(!1),u.onAfter(),this},this.search=function(e){l=e,c.trigger()},this.currentMatchedResults=function(){return this.matchedResultsCount},this.stripe=function(){if("object"==typeof u.stripeRows&&null!==u.stripeRows){var t=u.stripeRows.join(" "),i=u.stripeRows.length;a.not(":hidden").each(function(n){e(this).removeClass(t).addClass(u.stripeRows[n%i])})}return this},this.strip_html=function(t){var i=t.replace(new RegExp("<[^<]+>","g"),"");return i=e.trim(i.toLowerCase())},this.results=function(t){return"string"==typeof u.noResults&&""!==u.noResults&&(t?e(u.noResults).hide():e(u.noResults).show()),this},this.loader=function(t){return"string"==typeof u.loader&&""!==u.loader&&(t?e(u.loader).show():e(u.loader).hide()),this},this.cache=function(){a=e(i),"string"==typeof u.noResults&&""!==u.noResults&&(a=a.not(u.noResults));var t="string"==typeof u.selector?a.find(u.selector):e(i).not(u.noResults);return o=t.map(function(){return c.strip_html(this.innerHTML)}),s=a.map(function(){return this}),l=l||this.val()||"",this.go()},this.trigger=function(){return this.loader(!0),u.onBefore(),t.clearTimeout(r),r=t.setTimeout(function(){c.go()},u.delay),this},this.cache(),this.results(!0),this.stripe(),this.loader(!1),this.each(function(){e(this).on(u.bind,function(){l=e(this).val(),c.trigger()})})}}(jQuery,this,document),function(e,t){"function"==typeof define&&define.amd?define("sifter",t):"object"==typeof exports?module.exports=t():e.Sifter=t()}(this,function(){var e=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};e.prototype.tokenize=function(e){if(!(e=r(String(e||"").toLowerCase()))||!e.length)return[];var t,i,n,s,l=[],c=e.split(/ +/);for(t=0,i=c.length;t<i;t++){if(n=o(c[t]),this.settings.diacritics)for(s in a)a.hasOwnProperty(s)&&(n=n.replace(new RegExp(s,"g"),a[s]));l.push({string:c[t],regex:new RegExp(n,"i")})}return l},e.prototype.iterator=function(e,t){(s(e)?Array.prototype.forEach||function(e){for(var t=0,i=this.length;t<i;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)}).apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var i,r,o,s;e=this.prepareSearch(e,t),r=e.tokens,i=e.options.fields,o=r.length,s=e.options.nesting;var a=function(e,t){var i,n;return e?-1===(n=(e=String(e||"")).search(t.regex))?0:(i=t.string.length/e.length,0===n&&(i+=.5),i):0},l=function(){var e=i.length;return e?1===e?function(e,t){return a(n(t,i[0],s),e)}:function(t,r){for(var o=0,l=0;o<e;o++)l+=a(n(r,i[o],s),t);return l/e}:function(){return 0}}();return o?1===o?function(e){return l(r[0],e)}:"and"===e.options.conjunction?function(e){for(var t,i=0,n=0;i<o;i++){if((t=l(r[i],e))<=0)return 0;n+=t}return n/o}:function(e){for(var t=0,i=0;t<o;t++)i+=l(r[t],e);return i/o}:function(){return 0}},e.prototype.getSortFunction=function(e,i){var r,o,s,a,l,c,u,d,p,h,f;if(f=!(e=(s=this).prepareSearch(e,i)).query&&i.sort_empty||i.sort,p=function(e,t){return"$score"===e?t.score:n(s.items[t.id],e,i.nesting)},l=[],f)for(r=0,o=f.length;r<o;r++)(e.query||"$score"!==f[r].field)&&l.push(f[r]);if(e.query){for(h=!0,r=0,o=l.length;r<o;r++)if("$score"===l[r].field){h=!1;break}h&&l.unshift({field:"$score",direction:"desc"})}else for(r=0,o=l.length;r<o;r++)if("$score"===l[r].field){l.splice(r,1);break}for(d=[],r=0,o=l.length;r<o;r++)d.push("desc"===l[r].direction?-1:1);return(c=l.length)?1===c?(a=l[0].field,u=d[0],function(e,i){return u*t(p(a,e),p(a,i))}):function(e,i){var n,r,o;for(n=0;n<c;n++)if(o=l[n].field,r=d[n]*t(p(o,e),p(o,i)))return r;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;var n=(t=i({},t)).fields,r=t.sort,o=t.sort_empty;return n&&!s(n)&&(t.fields=[n]),r&&!s(r)&&(t.sort=[r]),o&&!s(o)&&(t.sort_empty=[o]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,t){var i,n,r,o,s=this;return n=this.prepareSearch(e,t),t=n.options,e=n.query,o=t.score||s.getScoreFunction(n),e.length?s.iterator(s.items,function(e,r){i=o(e),(!1===t.filter||i>0)&&n.items.push({score:i,id:r})}):s.iterator(s.items,function(e,t){n.items.push({score:1,id:t})}),(r=s.getSortFunction(n,t))&&n.items.sort(r),n.total=n.items.length,"number"==typeof t.limit&&(n.items=n.items.slice(0,t.limit)),n};var t=function(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:e<t?-1:0:(e=l(String(e||"")))>(t=l(String(t||"")))?1:t>e?-1:0},i=function(e,t){var i,n,r,o;for(i=1,n=arguments.length;i<n;i++)if(o=arguments[i])for(r in o)o.hasOwnProperty(r)&&(e[r]=o[r]);return e},n=function(e,t,i){if(e&&t){if(!i)return e[t];for(var n=t.split(".");n.length&&(e=e[n.shift()]););return e}},r=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},o=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},s=Array.isArray||"undefined"!=typeof $&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a={a:"[aḀḁĂăÂâǍǎȺⱥȦȧẠạÄäÀàÁáĀāÃãÅåąĄÃąĄ]",b:"[b␢βΒB฿𐌁ᛒ]",c:"[cĆćĈĉČčĊċC̄c̄ÇçḈḉȻȼƇƈɕᴄＣｃ]",d:"[dĎďḊḋḐḑḌḍḒḓḎḏĐđD̦d̦ƉɖƊɗƋƌᵭᶁᶑȡᴅＤｄð]",e:"[eÉéÈèÊêḘḙĚěĔĕẼẽḚḛẺẻĖėËëĒēȨȩĘęᶒɆɇȄȅẾếỀềỄễỂểḜḝḖḗḔḕȆȇẸẹỆệⱸᴇＥｅɘǝƏƐε]",f:"[fƑƒḞḟ]",g:"[gɢ₲ǤǥĜĝĞğĢģƓɠĠġ]",h:"[hĤĥĦħḨḩẖẖḤḥḢḣɦʰǶƕ]",i:"[iÍíÌìĬĭÎîǏǐÏïḮḯĨĩĮįĪīỈỉȈȉȊȋỊịḬḭƗɨɨ̆ᵻᶖİiIıɪＩｉ]",j:"[jȷĴĵɈɉʝɟʲ]",k:"[kƘƙꝀꝁḰḱǨǩḲḳḴḵκϰ₭]",l:"[lŁłĽľĻļĹĺḶḷḸḹḼḽḺḻĿŀȽƚⱠⱡⱢɫɬᶅɭȴʟＬｌ]",n:"[nŃńǸǹŇňÑñṄṅŅņṆṇṊṋṈṉN̈n̈ƝɲȠƞᵰᶇɳȵɴＮｎŊŋ]",o:"[oØøÖöÓóÒòÔôǑǒŐőŎŏȮȯỌọƟɵƠơỎỏŌōÕõǪǫȌȍՕօ]",p:"[pṔṕṖṗⱣᵽƤƥᵱ]",q:"[qꝖꝗʠɊɋꝘꝙq̃]",r:"[rŔŕɌɍŘřŖŗṘṙȐȑȒȓṚṛⱤɽ]",s:"[sŚśṠṡṢṣꞨꞩŜŝŠšŞşȘșS̈s̈]",t:"[tŤťṪṫŢţṬṭƮʈȚțṰṱṮṯƬƭ]",u:"[uŬŭɄʉỤụÜüÚúÙùÛûǓǔŰűŬŭƯưỦủŪūŨũŲųȔȕ∪]",v:"[vṼṽṾṿƲʋꝞꝟⱱʋ]",w:"[wẂẃẀẁŴŵẄẅẆẇẈẉ]",x:"[xẌẍẊẋχ]",y:"[yÝýỲỳŶŷŸÿỸỹẎẏỴỵɎɏƳƴ]",z:"[zŹźẐẑŽžŻżẒẓẔẕƵƶ]"},l=function(){var e,t,i,n,r="",o={};for(i in a)if(a.hasOwnProperty(i))for(r+=n=a[i].substring(2,a[i].length-1),e=0,t=n.length;e<t;e++)o[n.charAt(e)]=i;var s=new RegExp("["+r+"]","g");return function(e){return e.replace(s,function(e){return o[e]}).toLowerCase()}}();return e}),function(e,t){"function"==typeof define&&define.amd?define("microplugin",t):"object"==typeof exports?module.exports=t():e.MicroPlugin=t()}(this,function(){var e={mixin:function(e){e.plugins={},e.prototype.initializePlugins=function(e){var i,n,r,o=this,s=[];if(o.plugins={names:[],settings:{},requested:{},loaded:{}},t.isArray(e))for(i=0,n=e.length;i<n;i++)"string"==typeof e[i]?s.push(e[i]):(o.plugins.settings[e[i].name]=e[i].options,s.push(e[i].name));else if(e)for(r in e)e.hasOwnProperty(r)&&(o.plugins.settings[r]=e[r],s.push(r));for(;s.length;)o.require(s.shift())},e.prototype.loadPlugin=function(t){var i=this,n=i.plugins,r=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');n.requested[t]=!0,n.loaded[t]=r.fn.apply(i,[i.plugins.settings[t]||{}]),n.names.push(t)},e.prototype.require=function(e){var t=this,i=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(i.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return i.loaded[e]},e.define=function(t,i){e.plugins[t]={name:t,fn:i}}}},t={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e}),function(e,t){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("sifter"),require("microplugin")):e.Selectize=t(e.jQuery,e.Sifter,e.MicroPlugin)}(this,function(e,t,i){"use strict";var n=function(e,t){if("string"!=typeof t||t.length){var i="string"==typeof t?new RegExp(t,"i"):t,n=function(e){var t=0;if(3===e.nodeType){var r=e.data.search(i);if(r>=0&&e.data.length>0){var o=e.data.match(i),s=document.createElement("span");s.className="highlight";var a=e.splitText(r),l=(a.splitText(o[0].length),a.cloneNode(!0));s.appendChild(l),a.parentNode.replaceChild(s,a),t=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName)&&("highlight"!==e.className||"SPAN"!==e.tagName))for(var c=0;c<e.childNodes.length;++c)c+=n(e.childNodes[c]);return t};return e.each(function(){n(this)})}};e.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;var e=this.parentNode;e.replaceChild(this.firstChild,this),e.normalize()}).end()};var r=function(){};r.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var i=arguments.length;return 0===i?delete this._events:1===i?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=0&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=0)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},r.mixin=function(e){for(var t=["on","off","trigger"],i=0;i<t.length;i++)e.prototype[t[i]]=r.prototype[t[i]]};var o=/Mac/.test(navigator.userAgent),s=o?91:17,a=o?18:17,l=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("input").validity,c=function(e){return void 0!==e},u=function(e){return null==e?null:"boolean"==typeof e?e?"1":"0":e+""},d=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},p={before:function(e,t,i){var n=e[t];e[t]=function(){return i.apply(e,arguments),n.apply(e,arguments)}},after:function(e,t,i){var n=e[t];e[t]=function(){var t=n.apply(e,arguments);return i.apply(e,arguments),t}}},h=function(e,t){var i;return function(){var n=this,r=arguments;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(n,r)},t)}},f=function(e,t,i){var n,r=e.trigger,o={};for(n in e.trigger=function(){var i=arguments[0];if(-1===t.indexOf(i))return r.apply(e,arguments);o[i]=arguments},i.apply(e,[]),e.trigger=r,o)o.hasOwnProperty(n)&&r.apply(e,o[n])},m=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var i=document.selection.createRange(),n=document.selection.createRange().text.length;i.moveStart("character",-e.value.length),t.start=i.text.length-n,t.length=n}return t},g=function(t,i){return t?(b.$testInput||(b.$testInput=e("<span />").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).appendTo("body")),b.$testInput.text(t),function(e,t,i){var n,r,o={};if(i)for(n=0,r=i.length;n<r;n++)o[i[n]]=e.css(i[n]);else o=e.css();t.css(o)}(i,b.$testInput,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]),b.$testInput.width()):0},v=function(e){var t=null,i=function(i,n){var r,o,s,a,l,c,u,d;n=n||{},(i=i||window.event||{}).metaKey||i.altKey||(n.force||!1!==e.data("grow"))&&(r=e.val(),i.type&&"keydown"===i.type.toLowerCase()&&(s=(o=i.keyCode)>=48&&o<=57||o>=65&&o<=90||o>=96&&o<=111||o>=186&&o<=222||32===o,46===o||8===o?(d=m(e[0])).length?r=r.substring(0,d.start)+r.substring(d.start+d.length):8===o&&d.start?r=r.substring(0,d.start-1)+r.substring(d.start+1):46===o&&void 0!==d.start&&(r=r.substring(0,d.start)+r.substring(d.start+1)):s&&(c=i.shiftKey,u=String.fromCharCode(i.keyCode),r+=u=c?u.toUpperCase():u.toLowerCase())),a=e.attr("placeholder"),!r&&a&&(r=a),(l=g(r,e)+4)!==t&&(t=l,e.width(l),e.triggerHandler("resize")))};e.on("keydown keyup update blur",i),i()},y=function(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML},b=function(i,n){var r,o,s,a,l=this;(a=i[0]).selectize=l;var c=window.getComputedStyle&&window.getComputedStyle(a,null);if(s=(s=c?c.getPropertyValue("direction"):a.currentStyle&&a.currentStyle.direction)||i.parents("[dir]:first").attr("dir")||"",e.extend(l,{order:0,settings:n,$input:i,tabIndex:i.attr("tabindex")||"",tagType:"select"===a.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(s),eventNS:".selectize"+ ++b.count,highlightedValue:null,isBlurring:!1,isOpen:!1,isDisabled:!1,isRequired:i.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===n.loadThrottle?l.onSearchChange:h(l.onSearchChange,n.loadThrottle)}),l.sifter=new t(this.options,{diacritics:n.diacritics}),l.settings.options){for(r=0,o=l.settings.options.length;r<o;r++)l.registerOption(l.settings.options[r]);delete l.settings.options}if(l.settings.optgroups){for(r=0,o=l.settings.optgroups.length;r<o;r++)l.registerOptionGroup(l.settings.optgroups[r]);delete l.settings.optgroups}l.settings.mode=l.settings.mode||(1===l.settings.maxItems?"single":"multi"),"boolean"!=typeof l.settings.hideSelected&&(l.settings.hideSelected="multi"===l.settings.mode),l.initializePlugins(l.settings.plugins),l.setupCallbacks(),l.setupTemplates(),l.setup()};return r.mixin(b),void 0!==i?i.mixin(b):function(e,t){t||(t={}),console.error("Selectize: Dependency MicroPlugin is missing"),t.explanation&&(console.group&&console.group(),console.error(t.explanation),console.group&&console.groupEnd())}(0,{explanation:'Make sure you either: (1) are using the "standalone" version of Selectize, or (2) require MicroPlugin before you load Selectize.'}),e.extend(b.prototype,{setup:function(){var t,i,n,r,c,u,d,p,h,f,m=this,g=m.settings,y=m.eventNS,b=e(window),w=e(document),x=m.$input;if(d=m.settings.mode,p=x.attr("class")||"",t=e("<div>").addClass(g.wrapperClass).addClass(p).addClass(d),i=e("<div>").addClass(g.inputClass).addClass("items").appendTo(t),n=e('<input type="text" autocomplete="off" />').appendTo(i).attr("tabindex",x.is(":disabled")?"-1":m.tabIndex),u=e(g.dropdownParent||t),r=e("<div>").addClass(g.dropdownClass).addClass(d).hide().appendTo(u),c=e("<div>").addClass(g.dropdownContentClass).appendTo(r),(f=x.attr("id"))&&(n.attr("id",f+"-selectized"),e("label[for='"+f+"']").attr("for",f+"-selectized")),m.settings.copyClassesToDropdown&&r.addClass(p),t.css({width:x[0].style.width}),m.plugins.names.length&&(h="plugin-"+m.plugins.names.join(" plugin-"),t.addClass(h),r.addClass(h)),(null===g.maxItems||g.maxItems>1)&&1===m.tagType&&x.attr("multiple","multiple"),m.settings.placeholder&&n.attr("placeholder",g.placeholder),!m.settings.splitOn&&m.settings.delimiter){var k=m.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");m.settings.splitOn=new RegExp("\\s*"+k+"+\\s*")}x.attr("autocorrect")&&n.attr("autocorrect",x.attr("autocorrect")),x.attr("autocapitalize")&&n.attr("autocapitalize",x.attr("autocapitalize")),n[0].type=x[0].type,m.$wrapper=t,m.$control=i,m.$control_input=n,m.$dropdown=r,m.$dropdown_content=c,r.on("mouseenter mousedown click","[data-disabled]>[data-selectable]",function(e){e.stopImmediatePropagation()}),r.on("mouseenter","[data-selectable]",function(){return m.onOptionHover.apply(m,arguments)}),r.on("mousedown click","[data-selectable]",function(){return m.onOptionSelect.apply(m,arguments)}),function(e,t,i,n){e.on(t,i,function(t){for(var i=t.target;i&&i.parentNode!==e[0];)i=i.parentNode;return t.currentTarget=i,n.apply(this,[t])})}(i,"mousedown","*:not(input)",function(){return m.onItemSelect.apply(m,arguments)}),v(n),i.on({mousedown:function(){return m.onMouseDown.apply(m,arguments)},click:function(){return m.onClick.apply(m,arguments)}}),n.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return m.onKeyDown.apply(m,arguments)},keyup:function(){return m.onKeyUp.apply(m,arguments)},keypress:function(){return m.onKeyPress.apply(m,arguments)},resize:function(){m.positionDropdown.apply(m,[])},blur:function(){return m.onBlur.apply(m,arguments)},focus:function(){return m.ignoreBlur=!1,m.onFocus.apply(m,arguments)},paste:function(){return m.onPaste.apply(m,arguments)}}),w.on("keydown"+y,function(e){m.isCmdDown=e[o?"metaKey":"ctrlKey"],m.isCtrlDown=e[o?"altKey":"ctrlKey"],m.isShiftDown=e.shiftKey}),w.on("keyup"+y,function(e){e.keyCode===a&&(m.isCtrlDown=!1),16===e.keyCode&&(m.isShiftDown=!1),e.keyCode===s&&(m.isCmdDown=!1)}),w.on("mousedown"+y,function(e){if(m.isFocused){if(e.target===m.$dropdown[0]||e.target.parentNode===m.$dropdown[0])return!1;m.$control.has(e.target).length||e.target===m.$control[0]||m.blur(e.target)}}),b.on(["scroll"+y,"resize"+y].join(" "),function(){m.isOpen&&m.positionDropdown.apply(m,arguments)}),b.on("mousemove"+y,function(){m.ignoreHover=!1}),this.revertSettings={$children:x.children().detach(),tabindex:x.attr("tabindex")},x.attr("tabindex",-1).hide().after(m.$wrapper),e.isArray(g.items)&&(m.setValue(g.items),delete g.items),l&&x.on("invalid"+y,function(e){e.preventDefault(),m.isInvalid=!0,m.refreshState()}),m.updateOriginalInput(),m.refreshItems(),m.refreshState(),m.updatePlaceholder(),m.isSetup=!0,x.is(":disabled")&&m.disable(),m.on("change",this.onChange),x.data("selectize",m),x.addClass("selectized"),m.trigger("initialize"),!0===g.preload&&m.onSearchChange("")},setupTemplates:function(){var t=this,i=t.settings.labelField,n=t.settings.optgroupLabelField,r={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[n])+"</div>"},option:function(e,t){return'<div class="option">'+t(e[i])+"</div>"},item:function(e,t){return'<div class="item">'+t(e[i])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};t.settings.render=e.extend({},r,t.settings.render)},setupCallbacks:function(){var e,t,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in i)i.hasOwnProperty(e)&&(t=this.settings[i[e]])&&this.on(e,t)},onClick:function(e){var t=this;t.isFocused&&t.isOpen||(t.focus(),e.preventDefault())},onMouseDown:function(t){var i=this,n=t.isDefaultPrevented();if(e(t.target),i.isFocused){if(t.target!==i.$control_input[0])return"single"===i.settings.mode?i.isOpen?i.close():i.open():n||i.setActiveItem(null),!1}else n||window.setTimeout(function(){i.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(t){var i=this;i.isFull()||i.isInputHidden||i.isLocked?t.preventDefault():i.settings.splitOn&&setTimeout(function(){var t=i.$control_input.val();if(t.match(i.settings.splitOn))for(var n=e.trim(t).split(i.settings.splitOn),r=0,o=n.length;r<o;r++)i.createItem(n[r])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){var t=(e.target,this.$control_input[0],this);if(!t.isLocked){switch(e.keyCode){case 65:if(t.isCmdDown)return void t.selectAll();break;case 27:return void(t.isOpen&&(e.preventDefault(),e.stopPropagation(),t.close()));case 78:if(!e.ctrlKey||e.altKey)break;case 40:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var i=t.getAdjacentOption(t.$activeOption,1);i.length&&t.setActiveOption(i,!0,!0)}return void e.preventDefault();case 80:if(!e.ctrlKey||e.altKey)break;case 38:if(t.$activeOption){t.ignoreHover=!0;var n=t.getAdjacentOption(t.$activeOption,-1);n.length&&t.setActiveOption(n,!0,!0)}return void e.preventDefault();case 13:return void(t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault()));case 37:return void t.advanceSelection(-1,e);case 39:return void t.advanceSelection(1,e);case 9:return t.settings.selectOnTab&&t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),t.isFull()||e.preventDefault()),void(t.settings.create&&t.createItem()&&e.preventDefault());case 8:case 46:return void t.deleteSelection(e)}return!t.isFull()&&!t.isInputHidden||(o?e.metaKey:e.ctrlKey)?void 0:void e.preventDefault()}9!==e.keyCode&&e.preventDefault()},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var i=t.$control_input.val()||"";t.lastValue!==i&&(t.lastValue=i,t.onSearchChange(i),t.refreshOptions(),t.trigger("type",i))},onSearchChange:function(e){var t=this,i=t.settings.load;i&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load(function(n){i.apply(t,[e,n])})))},onFocus:function(e){var t=this,i=t.isFocused;if(t.isDisabled)return t.blur(),e&&e.preventDefault(),!1;t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),i||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())},onBlur:function(e,t){var i=this;if(i.isFocused&&(i.isFocused=!1,!i.ignoreFocus)){if(!i.ignoreBlur&&document.activeElement===i.$dropdown_content[0])return i.ignoreBlur=!0,void i.onFocus(e);var n=function(){i.close(),i.setTextboxValue(""),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),t&&t.focus&&t.focus(),i.isBlurring=!1,i.ignoreFocus=!1,i.trigger("blur")};i.isBlurring=!0,i.ignoreFocus=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,n):n()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(t){var i,n,r=this;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),(n=e(t.currentTarget)).hasClass("create")?r.createItem(null,function(){r.settings.closeAfterSelect&&r.close()}):void 0!==(i=n.attr("data-value"))&&(r.lastQuery=null,r.setTextboxValue(""),r.addItem(i),r.settings.closeAfterSelect?r.close():!r.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&r.setActiveOption(r.getOption(i)))},onItemSelect:function(e){var t=this;t.isLocked||"multi"===t.settings.mode&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,i=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||i.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},setTextboxValue:function(e){var t=this.$control_input;t.val()!==e&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){f(this,t?[]:["change"],function(){this.clear(t),this.addItems(e,t)})},setActiveItem:function(t,i){var n,r,o,s,a,l,c,u,d=this;if("single"!==d.settings.mode){if(!(t=e(t)).length)return e(d.$activeItems).removeClass("active"),d.$activeItems=[],void(d.isFocused&&d.showInput());if("mousedown"===(n=i&&i.type.toLowerCase())&&d.isShiftDown&&d.$activeItems.length){for(u=d.$control.children(".active:last"),(s=Array.prototype.indexOf.apply(d.$control[0].childNodes,[u[0]]))>(a=Array.prototype.indexOf.apply(d.$control[0].childNodes,[t[0]]))&&(c=s,s=a,a=c),r=s;r<=a;r++)l=d.$control[0].childNodes[r],-1===d.$activeItems.indexOf(l)&&(e(l).addClass("active"),d.$activeItems.push(l));i.preventDefault()}else"mousedown"===n&&d.isCtrlDown||"keydown"===n&&this.isShiftDown?t.hasClass("active")?(o=d.$activeItems.indexOf(t[0]),d.$activeItems.splice(o,1),t.removeClass("active")):d.$activeItems.push(t.addClass("active")[0]):(e(d.$activeItems).removeClass("active"),d.$activeItems=[t.addClass("active")[0]]);d.hideInput(),this.isFocused||d.focus()}},setActiveOption:function(t,i,n){var r,o,s,a,l,u=this;u.$activeOption&&u.$activeOption.removeClass("active"),u.$activeOption=null,(t=e(t)).length&&(u.$activeOption=t.addClass("active"),!i&&c(i)||(r=u.$dropdown_content.height(),o=u.$activeOption.outerHeight(!0),i=u.$dropdown_content.scrollTop()||0,a=s=u.$activeOption.offset().top-u.$dropdown_content.offset().top+i,l=s-r+o,s+o>r+i?u.$dropdown_content.stop().animate({scrollTop:l},n?u.settings.scrollDuration:0):s<i&&u.$dropdown_content.stop().animate({scrollTop:a},n?u.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:-1e4}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}},search:function(t){var i,n,r,o=this,s=o.settings,a=this.getSearchOptions();if(s.score&&"function"!=typeof(r=o.settings.score.apply(this,[t])))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==o.lastQuery?(o.lastQuery=t,n=o.sifter.search(t,e.extend(a,{score:r})),o.currentResults=n):n=e.extend(!0,{},o.currentResults),s.hideSelected)for(i=n.items.length-1;i>=0;i--)-1!==o.items.indexOf(u(n.items[i].id))&&n.items.splice(i,1);return n},refreshOptions:function(t){var i,r,o,s,a,l,c,d,p,h,f,m,g,v,b,w;void 0===t&&(t=!0);var x=this,k=e.trim(x.$control_input.val()),C=x.search(k),_=x.$dropdown_content,S=x.$activeOption&&u(x.$activeOption.attr("data-value"));for(s=C.items.length,"number"==typeof x.settings.maxOptions&&(s=Math.min(s,x.settings.maxOptions)),a={},l=[],i=0;i<s;i++)for(c=x.options[C.items[i].id],d=x.render("option",c),p=c[x.settings.optgroupField]||"",r=0,o=(h=e.isArray(p)?p:[p])&&h.length;r<o;r++)p=h[r],x.optgroups.hasOwnProperty(p)||(p=""),a.hasOwnProperty(p)||(a[p]=document.createDocumentFragment(),l.push(p)),a[p].appendChild(d);for(this.settings.lockOptgroupOrder&&l.sort(function(e,t){return(x.optgroups[e].$order||0)-(x.optgroups[t].$order||0)}),f=document.createDocumentFragment(),i=0,s=l.length;i<s;i++)p=l[i],x.optgroups.hasOwnProperty(p)&&a[p].childNodes.length?((m=document.createDocumentFragment()).appendChild(x.render("optgroup_header",x.optgroups[p])),m.appendChild(a[p]),f.appendChild(x.render("optgroup",e.extend({},x.optgroups[p],{html:y(m),dom:m})))):f.appendChild(a[p]);if(_.html(f),x.settings.highlight&&(_.removeHighlight(),C.query.length&&C.tokens.length))for(i=0,s=C.tokens.length;i<s;i++)n(_,C.tokens[i].regex);if(!x.settings.hideSelected)for(i=0,s=x.items.length;i<s;i++)x.getOption(x.items[i]).addClass("selected");(g=x.canCreate(k))&&(_.prepend(x.render("option_create",{input:k})),w=e(_[0].childNodes[0])),x.hasOptions=C.items.length>0||g,x.hasOptions?(C.items.length>0?((b=S&&x.getOption(S))&&b.length?v=b:"single"===x.settings.mode&&x.items.length&&(v=x.getOption(x.items[0])),v&&v.length||(v=w&&!x.settings.addPrecedence?x.getAdjacentOption(w,1):_.find("[data-selectable]:first"))):v=w,x.setActiveOption(v),t&&!x.isOpen&&x.open()):(x.setActiveOption(null),t&&x.isOpen&&x.close())},addOption:function(t){var i,n,r,o=this;if(e.isArray(t))for(i=0,n=t.length;i<n;i++)o.addOption(t[i]);else(r=o.registerOption(t))&&(o.userOptions[r]=!0,o.lastQuery=null,o.trigger("option_add",r,t))},registerOption:function(e){var t=u(e[this.settings.valueField]);return null!=t&&!this.options.hasOwnProperty(t)&&(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=u(e[this.settings.optgroupValueField]);return!!t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(t,i){var n,r,o,s,a,l,c,d=this;if(t=u(t),o=u(i[d.settings.valueField]),null!==t&&d.options.hasOwnProperty(t)){if("string"!=typeof o)throw new Error("Value must be set in option data");c=d.options[t].$order,o!==t&&(delete d.options[t],-1!==(s=d.items.indexOf(t))&&d.items.splice(s,1,o)),i.$order=i.$order||c,d.options[o]=i,a=d.renderCache.item,l=d.renderCache.option,a&&(delete a[t],delete a[o]),l&&(delete l[t],delete l[o]),-1!==d.items.indexOf(o)&&(n=d.getItem(t),r=e(d.render("item",i)),n.hasClass("active")&&r.addClass("active"),n.replaceWith(r)),d.lastQuery=null,d.isOpen&&d.refreshOptions(!1)}},removeOption:function(e,t){var i=this;e=u(e);var n=i.renderCache.item,r=i.renderCache.option;n&&delete n[e],r&&delete r[e],delete i.userOptions[e],delete i.options[e],i.lastQuery=null,i.trigger("option_remove",e),i.removeItem(e,t)},clearOptions:function(){var t=this;t.loadedSearches={},t.userOptions={},t.renderCache={};var i=t.options;e.each(t.options,function(e,n){-1==t.items.indexOf(e)&&delete i[e]}),t.options=t.sifter.items=i,t.lastQuery=null,t.trigger("option_clear")},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(t,i){var n=this.$dropdown.find("[data-selectable]"),r=n.index(t)+i;return r>=0&&r<n.length?n.eq(r):e()},getElementWithValue:function(t,i){if(void 0!==(t=u(t))&&null!==t)for(var n=0,r=i.length;n<r;n++)if(i[n].getAttribute("data-value")===t)return e(i[n]);return e()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(t,i){this.buffer=document.createDocumentFragment();for(var n=this.$control[0].childNodes,r=0;r<n.length;r++)this.buffer.appendChild(n[r]);for(var o=e.isArray(t)?t:[t],s=(r=0,o.length);r<s;r++)this.isPending=r<s-1,this.addItem(o[r],i);var a=this.$control[0];a.insertBefore(this.buffer,a.firstChild),this.buffer=null},addItem:function(t,i){f(this,i?[]:["change"],function(){var n,r,o,s,a,l=this,c=l.settings.mode;t=u(t),-1===l.items.indexOf(t)?l.options.hasOwnProperty(t)&&("single"===c&&l.clear(i),"multi"===c&&l.isFull()||(n=e(l.render("item",l.options[t])),a=l.isFull(),l.items.splice(l.caretPos,0,t),l.insertAtCaret(n),(!l.isPending||!a&&l.isFull())&&l.refreshState(),l.isSetup&&(o=l.$dropdown_content.find("[data-selectable]"),l.isPending||(r=l.getOption(t),s=l.getAdjacentOption(r,1).attr("data-value"),l.refreshOptions(l.isFocused&&"single"!==c),s&&l.setActiveOption(l.getOption(s))),!o.length||l.isFull()?l.close():l.isPending||l.positionDropdown(),l.updatePlaceholder(),l.trigger("item_add",t,n),l.isPending||l.updateOriginalInput({silent:i})))):"single"===c&&l.close()})},removeItem:function(t,i){var n,r,o,s=this;n=t instanceof e?t:s.getItem(t),t=u(n.attr("data-value")),-1!==(r=s.items.indexOf(t))&&(n.remove(),n.hasClass("active")&&(o=s.$activeItems.indexOf(n[0]),s.$activeItems.splice(o,1)),s.items.splice(r,1),s.lastQuery=null,!s.settings.persist&&s.userOptions.hasOwnProperty(t)&&s.removeOption(t,i),r<s.caretPos&&s.setCaret(s.caretPos-1),s.refreshState(),s.updatePlaceholder(),s.updateOriginalInput({silent:i}),s.positionDropdown(),s.trigger("item_remove",t,n))},createItem:function(t,i){var n=this,r=n.caretPos;t=t||e.trim(n.$control_input.val()||"");var o=arguments[arguments.length-1];if("function"!=typeof o&&(o=function(){}),"boolean"!=typeof i&&(i=!0),!n.canCreate(t))return o(),!1;n.lock();var s="function"==typeof n.settings.create?this.settings.create:function(e){var t={};return t[n.settings.labelField]=e,t[n.settings.valueField]=e,t},a=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}(function(e){if(n.unlock(),!e||"object"!=typeof e)return o();var t=u(e[n.settings.valueField]);if("string"!=typeof t)return o();n.setTextboxValue(""),n.addOption(e),n.setCaret(r),n.addItem(t),n.refreshOptions(i&&"single"!==n.settings.mode),o(e)}),l=s.apply(this,[t,a]);return void 0!==l&&a(l),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var e=!this.items.length;this.isInvalid=e,this.$control_input.prop("required",e),this.$input.prop("required",!e)},refreshClasses:function(){var t=this,i=t.isFull(),n=t.isLocked;t.$wrapper.toggleClass("rtl",t.rtl),t.$control.toggleClass("focus",t.isFocused).toggleClass("disabled",t.isDisabled).toggleClass("required",t.isRequired).toggleClass("invalid",t.isInvalid).toggleClass("locked",n).toggleClass("full",i).toggleClass("not-full",!i).toggleClass("input-active",t.isFocused&&!t.isInputHidden).toggleClass("dropdown-active",t.isOpen).toggleClass("has-options",!e.isEmptyObject(t.options)).toggleClass("has-items",t.items.length>0),t.$control_input.data("grow",!i&&!n)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,i,n,r,o=this;if(e=e||{},1===o.tagType){for(n=[],t=0,i=o.items.length;t<i;t++)r=o.options[o.items[t]][o.settings.labelField]||"",n.push('<option value="'+d(o.items[t])+'" selected="selected">'+d(r)+"</option>");n.length||this.$input.attr("multiple")||n.push('<option value="" selected="selected"></option>'),o.$input.html(n.join(""))}else o.$input.val(o.getValue()),o.$input.attr("value",o.$input.val());o.isSetup&&(e.silent||o.trigger("change",o.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&(e.hideInput(),e.isBlurring||e.$control_input.blur()),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e[0].getBoundingClientRect().width,top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(e){var t=Math.min(this.caretPos,this.items.length),i=e[0],n=this.buffer||this.$control[0];0===t?n.insertBefore(i,n.firstChild):n.insertBefore(i,n.childNodes[t]),this.setCaret(t+1)},deleteSelection:function(t){var i,n,r,o,s,a,l,c,u,d=this;if(r=t&&8===t.keyCode?-1:1,o=m(d.$control_input[0]),d.$activeOption&&!d.settings.hideSelected&&(l=d.getAdjacentOption(d.$activeOption,-1).attr("data-value")),s=[],d.$activeItems.length){for(u=d.$control.children(".active:"+(r>0?"last":"first")),a=d.$control.children(":not(input)").index(u),r>0&&a++,i=0,n=d.$activeItems.length;i<n;i++)s.push(e(d.$activeItems[i]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(d.isFocused||"single"===d.settings.mode)&&d.items.length&&(r<0&&0===o.start&&0===o.length?s.push(d.items[d.caretPos-1]):r>0&&o.start===d.$control_input.val().length&&s.push(d.items[d.caretPos]));if(!s.length||"function"==typeof d.settings.onDelete&&!1===d.settings.onDelete.apply(d,[s]))return!1;for(void 0!==a&&d.setCaret(a);s.length;)d.removeItem(s.pop());return d.showInput(),d.positionDropdown(),d.refreshOptions(!0),l&&((c=d.getOption(l)).length&&d.setActiveOption(c)),!0},advanceSelection:function(e,t){var i,n,r,o,s,a=this;0!==e&&(a.rtl&&(e*=-1),i=e>0?"last":"first",n=m(a.$control_input[0]),a.isFocused&&!a.isInputHidden?(o=a.$control_input.val().length,(e<0?0===n.start&&0===n.length:n.start===o)&&!o&&a.advanceCaret(e,t)):(s=a.$control.children(".active:"+i)).length&&(r=a.$control.children(":not(input)").index(s),a.setActiveItem(null),a.setCaret(e>0?r+1:r)))},advanceCaret:function(e,t){var i,n,r=this;0!==e&&(i=e>0?"next":"prev",r.isShiftDown?(n=r.$control_input[i]()).length&&(r.hideInput(),r.setActiveItem(n),t&&t.preventDefault()):r.setCaret(r.caretPos+e))},setCaret:function(t){var i,n,r,o,s=this;if(t="single"===s.settings.mode?s.items.length:Math.max(0,Math.min(s.items.length,t)),!s.isPending)for(i=0,n=(r=s.$control.children(":not(input)")).length;i<n;i++)o=e(r[i]).detach(),i<t?s.$control_input.before(o):s.$control.append(o);s.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var t=this,i=t.eventNS,n=t.revertSettings;t.trigger("destroy"),t.off(),t.$wrapper.remove(),t.$dropdown.remove(),t.$input.html("").append(n.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:n.tabindex}).show(),t.$control_input.removeData("grow"),t.$input.removeData("selectize"),0==--b.count&&b.$testInput&&(b.$testInput.remove(),b.$testInput=void 0),e(window).off(i),e(document).off(i),e(document.body).off(i),delete t.$input[0].selectize},render:function(t,i){var n,r,o="",s=!1,a=this;return"option"!==t&&"item"!==t||(s=!!(n=u(i[a.settings.valueField]))),s&&(c(a.renderCache[t])||(a.renderCache[t]={}),a.renderCache[t].hasOwnProperty(n))?a.renderCache[t][n]:(o=e(a.settings.render[t].apply(this,[i,d])),"option"===t||"option_create"===t?i[a.settings.disabledField]||o.attr("data-selectable",""):"optgroup"===t&&(r=i[a.settings.optgroupValueField]||"",o.attr("data-group",r),i[a.settings.disabledField]&&o.attr("data-disabled","")),"option"!==t&&"item"!==t||o.attr("data-value",n||""),s&&(a.renderCache[t][n]=o[0]),o[0])},clearCache:function(e){void 0===e?this.renderCache={}:delete this.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var i=t.settings.createFilter;return e.length&&("function"!=typeof i||i.apply(t,[e]))&&("string"!=typeof i||new RegExp(i).test(e))&&(!(i instanceof RegExp)||i.test(e))}}),b.count=0,b.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},e.fn.selectize=function(t){var i=e.fn.selectize.defaults,n=e.extend({},i,t),r=n.dataAttr,o=n.labelField,s=n.valueField,a=n.disabledField,l=n.optgroupField,c=n.optgroupLabelField,d=n.optgroupValueField,p=function(t,i){var a,l,c,u,d=t.attr(r);if(d)for(i.options=JSON.parse(d),a=0,l=i.options.length;a<l;a++)i.items.push(i.options[a][s]);else{var p=e.trim(t.val()||"");if(!n.allowEmptyOption&&!p.length)return;for(a=0,l=(c=p.split(n.delimiter)).length;a<l;a++)(u={})[o]=c[a],u[s]=c[a],i.options.push(u);i.items=c}},h=function(t,i){var p,h,f,m,g=i.options,v={},y=function(e){var t=r&&e.attr(r);return"string"==typeof t&&t.length?JSON.parse(t):null},b=function(t,r){t=e(t);var c=u(t.val());if(c||n.allowEmptyOption)if(v.hasOwnProperty(c)){if(r){var d=v[c][l];d?e.isArray(d)?d.push(r):v[c][l]=[d,r]:v[c][l]=r}}else{var p=y(t)||{};p[o]=p[o]||t.text(),p[s]=p[s]||c,p[a]=p[a]||t.prop("disabled"),p[l]=p[l]||r,v[c]=p,g.push(p),t.is(":selected")&&i.items.push(c)}};for(i.maxItems=t.attr("multiple")?null:1,p=0,h=(m=t.children()).length;p<h;p++)"optgroup"===(f=m[p].tagName.toLowerCase())?function(t){var n,r,o,s,l;for((o=(t=e(t)).attr("label"))&&((s=y(t)||{})[c]=o,s[d]=o,s[a]=t.prop("disabled"),i.optgroups.push(s)),n=0,r=(l=e("option",t)).length;n<r;n++)b(l[n],o)}(m[p]):"option"===f&&b(m[p])};return this.each(function(){if(!this.selectize){var r=e(this),o=this.tagName.toLowerCase(),s=r.attr("placeholder")||r.attr("data-placeholder");s||n.allowEmptyOption||(s=r.children('option[value=""]').text());var a={placeholder:s,options:[],optgroups:[],items:[]};"select"===o?h(r,a):p(r,a),new b(r,e.extend(!0,{},i,a,t))}})},e.fn.selectize.defaults=b.defaults,e.fn.selectize.support={validity:l},b.define("drag_drop",function(t){if(!e.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var i=this;i.lock=function(){var e=i.lock;return function(){var t=i.$control.data("sortable");return t&&t.disable(),e.apply(i,arguments)}}(),i.unlock=function(){var e=i.unlock;return function(){var t=i.$control.data("sortable");return t&&t.enable(),e.apply(i,arguments)}}(),i.setup=function(){var t=i.setup;return function(){t.apply(this,arguments);var n=i.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:i.isLocked,start:function(e,t){t.placeholder.css("width",t.helper.css("width")),n.css({overflow:"visible"})},stop:function(){n.css({overflow:"hidden"});var t=i.$activeItems?i.$activeItems.slice():null,r=[];n.children("[data-value]").each(function(){r.push(e(this).attr("data-value"))}),i.setValue(r),i.setActiveItem(t)}})}}()}}),b.define("dropdown_header",function(t){var i,n=this;t=e.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a href="javascript:void(0)" class="'+e.closeClass+'">&times;</a></div></div>'}},t),n.setup=(i=n.setup,function(){i.apply(n,arguments),n.$dropdown_header=e(t.html(t)),n.$dropdown.prepend(n.$dropdown_header)})}),b.define("optgroup_columns",function(t){var i=this;t=e.extend({equalizeWidth:!0,equalizeHeight:!0},t),this.getAdjacentOption=function(t,i){var n=t.closest("[data-group]").find("[data-selectable]"),r=n.index(t)+i;return r>=0&&r<n.length?n.eq(r):e()},this.onKeyDown=function(){var e=i.onKeyDown;return function(t){var n,r,o,s;return!this.isOpen||37!==t.keyCode&&39!==t.keyCode?e.apply(this,arguments):(i.ignoreHover=!0,n=(s=this.$activeOption.closest("[data-group]")).find("[data-selectable]").index(this.$activeOption),void((r=(o=(s=37===t.keyCode?s.prev("[data-group]"):s.next("[data-group]")).find("[data-selectable]")).eq(Math.min(o.length-1,n))).length&&this.setActiveOption(r)))}}();var n=function(){var e,t=n.width,i=document;return void 0===t&&((e=i.createElement("div")).innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,i.body.appendChild(e),t=n.width=e.offsetWidth-e.clientWidth,i.body.removeChild(e)),t},r=function(){var r,o,s,a,l,c,u;if((o=(u=e("[data-group]",i.$dropdown_content)).length)&&i.$dropdown_content.width()){if(t.equalizeHeight){for(s=0,r=0;r<o;r++)s=Math.max(s,u.eq(r).height());u.css({height:s})}t.equalizeWidth&&(c=i.$dropdown_content.innerWidth()-n(),a=Math.round(c/o),u.css({width:a}),o>1&&(l=c-a*(o-1),u.eq(o-1).css({width:l})))}};(t.equalizeHeight||t.equalizeWidth)&&(p.after(this,"positionDropdown",r),p.after(this,"refreshOptions",r))}),b.define("remove_button",function(t){t=e.extend({label:"&times;",title:"Remove",className:"remove",append:!0},t),"single"!==this.settings.mode?function(t,i){var n,r=t,o='<a href="javascript:void(0)" class="'+i.className+'" tabindex="-1" title="'+d(i.title)+'">'+i.label+"</a>";t.setup=(n=r.setup,function(){if(i.append){var s=r.settings.render.item;r.settings.render.item=function(e){return function(e,t){var i=e.search(/(<\/[^>]+>\s*)$/);return e.substring(0,i)+t+e.substring(i)}(s.apply(t,arguments),o)}}n.apply(t,arguments),t.$control.on("click","."+i.className,function(t){if(t.preventDefault(),!r.isLocked){var i=e(t.currentTarget).parent();r.setActiveItem(i),r.deleteSelection()&&r.setCaret(r.items.length)}})})}(this,t):function(t,i){i.className="remove-single";var n,r=t,o='<a href="javascript:void(0)" class="'+i.className+'" tabindex="-1" title="'+d(i.title)+'">'+i.label+"</a>",s=function(t,i){return e("<span>").append(t).append(i)};t.setup=(n=r.setup,function(){if(i.append){var a=e(r.$input.context).attr("id"),l=(e("#"+a),r.settings.render.item);r.settings.render.item=function(e){return s(l.apply(t,arguments),o)}}n.apply(t,arguments),t.$control.on("click","."+i.className,function(e){e.preventDefault(),r.isLocked||r.clear()})})}(this,t)}),b.define("restore_on_backspace",function(e){var t,i=this;e.text=e.text||function(e){return e[this.settings.labelField]},this.onKeyDown=(t=i.onKeyDown,function(i){var n,r;return 8===i.keyCode&&""===this.$control_input.val()&&!this.$activeItems.length&&(n=this.caretPos-1)>=0&&n<this.items.length?(r=this.options[this.items[n]],this.deleteSelection(i)&&(this.setTextboxValue(e.text.apply(this,[r])),this.refreshOptions(!0)),void i.preventDefault()):t.apply(this,arguments)})}),b}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Sweetalert2=t()}(this,function(){"use strict";function e(){null!==h.previousBodyPadding&&(document.body.style.paddingRight=h.previousBodyPadding,h.previousBodyPadding=null)}function t(){var e=arguments;return t.isVisible()&&t.close(),function(){if(void 0===arguments[0])return console.error("SweetAlert2 expects at least 1 attribute!"),!1;var e=d({},P);switch(typeof arguments[0]){case"string":e.title=arguments[0],e.text=arguments[1]||"",e.type=arguments[2]||"";break;case"object":d(e,arguments[0]),e.extraParams=arguments[0].extraParams,"email"===e.input&&null===e.inputValidator&&(e.inputValidator=function(e){return new Promise(function(t,i){/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(e)?t():i("Invalid email address")})});break;default:return console.error('SweetAlert2: Unexpected type of argument! Expected "string" or "object", got '+typeof arguments[0]),!1}F(e);var n=m();return new Promise(function(r,s){function a(t,i){for(var n=k(e.focusCancel),r=0;r<n.length;r++){(t+=i)===n.length?t=0:-1===t&&(t=n.length-1);var o=n[t];if($(o))return o.focus()}}e.timer&&(n.timeout=setTimeout(function(){t.closeModal(e.onClose),s("timer")},e.timer));var l=function(t){switch(t=t||e.input){case"select":case"textarea":case"file":return T(n,o[t]);case"checkbox":return n.querySelector("."+o.checkbox+" input");case"radio":return n.querySelector("."+o.radio+" input:checked")||n.querySelector("."+o.radio+" input:first-child");case"range":return n.querySelector("."+o.range+" input");default:return T(n,o.input)}},c=function(){var t=l();if(!t)return null;switch(e.input){case"checkbox":return t.checked?1:0;case"radio":return t.checked?t.value:null;case"file":return t.files.length?t.files[0]:null;default:return e.inputAutoTrim?t.value.trim():t.value}};e.input&&setTimeout(function(){var e=l();e&&_(e)},0);var d,f=function(i){e.showLoaderOnConfirm&&t.showLoading(),e.preConfirm?e.preConfirm(i,e.extraParams).then(function(n){t.closeModal(e.onClose),r(n||i)},function(e){t.hideLoading(),e&&t.showValidationError(e)}):(t.closeModal(e.onClose),r(i))},C=function(i){var n=i||window.event,r=n.target||n.srcElement,o=b(),a=w(),l=o===r||o.contains(r),u=a===r||a.contains(r);switch(n.type){case"mouseover":case"mouseup":e.buttonsStyling&&(l?o.style.backgroundColor=p(e.confirmButtonColor,-.1):u&&(a.style.backgroundColor=p(e.cancelButtonColor,-.1)));break;case"mouseout":e.buttonsStyling&&(l?o.style.backgroundColor=e.confirmButtonColor:u&&(a.style.backgroundColor=e.cancelButtonColor));break;case"mousedown":e.buttonsStyling&&(l?o.style.backgroundColor=p(e.confirmButtonColor,-.2):u&&(a.style.backgroundColor=p(e.cancelButtonColor,-.2)));break;case"click":if(l&&t.isVisible())if(e.input){var d=c();e.inputValidator?(t.disableInput(),e.inputValidator(d,e.extraParams).then(function(){t.enableInput(),f(d)},function(e){t.enableInput(),e&&t.showValidationError(e)})):f(d)}else f(!0);else u&&t.isVisible()&&(t.closeModal(e.onClose),s("cancel"))}},A=n.querySelectorAll("button");for(d=0;d<A.length;d++)A[d].onclick=C,A[d].onmouseover=C,A[d].onmouseout=C,A[d].onmousedown=C;x().onclick=function(){t.closeModal(e.onClose),s("close")},i.onclick=function(n){n.target===i&&e.allowOutsideClick&&(t.closeModal(e.onClose),s("overlay"))};var z=b(),P=w();e.reverseButtons?z.parentNode.insertBefore(P,z):z.parentNode.insertBefore(z,P),h.previousWindowKeyDown=window.onkeydown,window.onkeydown=function(i){var n=i||window.event,r=n.keyCode||n.which;if(-1!==[9,13,32,27].indexOf(r)){for(var o=n.target||n.srcElement,l=k(e.focusCancel),c=-1,u=0;u<l.length;u++)if(o===l[u]){c=u;break}9===r?(n.shiftKey?a(c,-1):a(c,1),I(n)):13===r||32===r?-1===c&&(e.focusCancel?D(P,n):D(z,n)):27===r&&!0===e.allowEscapeKey&&(t.closeModal(e.onClose),s("esc"))}},e.buttonsStyling&&(z.style.borderLeftColor=e.confirmButtonColor,z.style.borderRightColor=e.confirmButtonColor),t.showLoading=t.enableLoading=function(){O(g()),O(z,"inline-block"),S(z,"loading"),S(n,"loading"),z.disabled=!0,P.disabled=!0},t.hideLoading=t.disableLoading=function(){e.showConfirmButton||(L(z),e.showCancelButton||L(g())),M(z,"loading"),M(n,"loading"),z.disabled=!1,P.disabled=!1},t.enableButtons=function(){z.disabled=!1,P.disabled=!1},t.disableButtons=function(){z.disabled=!0,P.disabled=!0},t.enableConfirmButton=function(){z.disabled=!1},t.disableConfirmButton=function(){z.disabled=!0},t.enableInput=function(){var e=l();if(!e)return!1;if("radio"===e.type)for(var t=e.parentNode.parentNode.querySelectorAll("input"),i=0;i<t.length;i++)t[i].disabled=!1;else e.disabled=!1},t.disableInput=function(){var e=l();if(!e)return!1;if(e&&"radio"===e.type)for(var t=e.parentNode.parentNode.querySelectorAll("input"),i=0;i<t.length;i++)t[i].disabled=!0;else e.disabled=!0},t.recalculateHeight=N(function(){var e=m(),t=e.style.display;e.style.minHeight="",O(e),e.style.minHeight=e.scrollHeight+1+"px",e.style.display=t},50),t.showValidationError=function(e){var t=y();t.innerHTML=e,O(t);var i=l();_(i),S(i,"error")},t.resetValidationError=function(){var e=y();L(e),t.recalculateHeight();var i=l();i&&M(i,"error")},t.getProgressSteps=function(){return e.progressSteps},t.setProgressSteps=function(t){e.progressSteps=t,F(e)},t.showProgressSteps=function(){O(v())},t.hideProgressSteps=function(){L(v())},t.enableButtons(),t.hideLoading(),t.resetValidationError();var E,W,R=["input","file","range","select","radio","checkbox","textarea"];for(d=0;d<R.length;d++){var j=o[R[d]],B=T(n,j);if(E=l(R[d])){for(var q in E.attributes)if(E.attributes.hasOwnProperty(q)){var V=E.attributes[q].name;"type"!==V&&"value"!==V&&E.removeAttribute(V)}for(var K in e.inputAttributes)E.setAttribute(K,e.inputAttributes[K])}B.className=j,e.inputClass&&S(B,e.inputClass),L(B)}switch(e.input){case"text":case"email":case"password":case"number":case"tel":(E=T(n,o.input)).value=e.inputValue,E.placeholder=e.inputPlaceholder,E.type=e.input,O(E);break;case"file":(E=T(n,o.file)).placeholder=e.inputPlaceholder,E.type=e.input,O(E);break;case"range":var U=T(n,o.range),G=U.querySelector("input"),Y=U.querySelector("output");G.value=e.inputValue,G.type=e.input,Y.value=e.inputValue,O(U);break;case"select":var X=T(n,o.select);if(X.innerHTML="",e.inputPlaceholder){var Z=document.createElement("option");Z.innerHTML=e.inputPlaceholder,Z.value="",Z.disabled=!0,Z.selected=!0,X.appendChild(Z)}W=function(t){for(var i in t){var n=document.createElement("option");n.value=i,n.innerHTML=t[i],e.inputValue===i&&(n.selected=!0),X.appendChild(n)}O(X),X.focus()};break;case"radio":var Q=T(n,o.radio);Q.innerHTML="",W=function(t){for(var i in t){var n=1,r=document.createElement("input"),s=document.createElement("label"),a=document.createElement("span");r.type="radio",r.name=o.radio,r.value=i,r.id=o.radio+"-"+n++,e.inputValue===i&&(r.checked=!0),a.innerHTML=t[i],s.appendChild(r),s.appendChild(a),s.for=r.id,Q.appendChild(s)}O(Q);var l=Q.querySelectorAll("input");l.length&&l[0].focus()};break;case"checkbox":var J=T(n,o.checkbox),ee=l("checkbox");ee.type="checkbox",ee.value=1,ee.id=o.checkbox,ee.checked=Boolean(e.inputValue);var te=J.getElementsByTagName("span");te.length&&J.removeChild(te[0]),(te=document.createElement("span")).innerHTML=e.inputPlaceholder,J.appendChild(te),O(J);break;case"textarea":var ie=T(n,o.textarea);ie.value=e.inputValue,ie.placeholder=e.inputPlaceholder,O(ie);break;case null:break;default:console.error('SweetAlert2: Unexpected type of input! Expected "text" or "email" or "password", "select", "checkbox", "textarea" or "file", got "'+e.input+'"')}"select"!==e.input&&"radio"!==e.input||(e.inputOptions instanceof Promise?(t.showLoading(),e.inputOptions.then(function(e){t.hideLoading(),W(e)})):"object"==typeof e.inputOptions?W(e.inputOptions):console.error("SweetAlert2: Unexpected type of inputOptions! Expected object or Promise, got "+typeof e.inputOptions)),H(e.animation,e.onOpen),a(-1,1),i.scrollTop=0,"undefined"==typeof MutationObserver||u||(u=new MutationObserver(t.recalculateHeight)).observe(n,{childList:!0,characterData:!0,subtree:!0})})}.apply(this,e)}var i,n="swal2-",r=function(e){var t={};for(var i in e)t[e[i]]=n+e[i];return t},o=r(["container","in","modal","overlay","close","content","spacer","confirm","cancel","icon","image","input","file","range","select","radio","checkbox","textarea","validationerror","progresssteps","activeprogressstep","progresscircle","progressline"]),s=r(["success","warning","info","question","error"]),a={title:"",text:"",html:"",type:null,customClass:"",animation:!0,allowOutsideClick:!0,allowEscapeKey:!0,showConfirmButton:!0,showCancelButton:!1,preConfirm:null,confirmButtonText:"OK",confirmButtonColor:"#3085d6",confirmButtonClass:null,cancelButtonText:"Cancel",cancelButtonColor:"#aaa",cancelButtonClass:null,buttonsStyling:!0,reverseButtons:!1,focusCancel:!1,showCloseButton:!1,showLoaderOnConfirm:!1,imageUrl:null,imageWidth:null,imageHeight:null,imageClass:null,timer:null,width:500,padding:20,background:"#fff",input:null,inputPlaceholder:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputClass:null,inputAttributes:{},inputValidator:null,progressSteps:[],currentProgressStep:null,progressStepsDistance:"40px",onOpen:null,onClose:null},l='<div class="'+o.modal+'" style="display: none" tabIndex="-1"><ul class="'+o.progresssteps+'"></ul><div class="'+o.icon+" "+s.error+'"><span class="x-mark"><span class="line left"></span><span class="line right"></span></span></div><div class="'+o.icon+" "+s.question+'">?</div><div class="'+o.icon+" "+s.warning+'">!</div><div class="'+o.icon+" "+s.info+'">i</div><div class="'+o.icon+" "+s.success+'"><span class="line tip"></span> <span class="line long"></span><div class="placeholder"></div> <div class="fix"></div></div><img class="'+o.image+'"><h2></h2><div class="'+o.content+'"></div><input class="'+o.input+'"><input type="file" class="'+o.file+'"><div class="'+o.range+'"><output></output><input type="range"></div><select class="'+o.select+'"></select><div class="'+o.radio+'"></div><label for="'+o.checkbox+'" class="'+o.checkbox+'"><input type="checkbox"></label><textarea class="'+o.textarea+'"></textarea><div class="'+o.validationerror+'"></div><hr class="'+o.spacer+'"><button type="button" class="'+o.confirm+'">OK</button><button type="button" class="'+o.cancel+'">Cancel</button><span class="'+o.close+'">&times;</span></div>',c=document.getElementsByClassName(o.container);c.length?i=c[0]:((i=document.createElement("div")).className=o.container,i.innerHTML=l);var u,d=function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},p=function(e,t){(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;for(var i="#",n=0;3>n;n++){var r=parseInt(e.substr(2*n,2),16);i+=("00"+(r=Math.round(Math.min(Math.max(0,r+r*t),255)).toString(16))).substr(r.length)}return i},h={previousWindowKeyDown:null,previousActiveElement:null,previousBodyPadding:null},f=function(e){return i.querySelector("."+e)},m=function(){return document.body.querySelector("."+o.modal)||function(){if("undefined"!=typeof document){if(!document.getElementsByClassName(o.container).length){document.body.appendChild(i);var e=m(),n=T(e,o.input),r=T(e,o.file),s=e.querySelector("."+o.range+" input"),a=T(e,o.select),l=e.querySelector("."+o.checkbox+" input"),c=T(e,o.textarea);return n.oninput=function(){t.resetValidationError()},n.onkeyup=function(e){e.stopPropagation(),13===e.keyCode&&t.clickConfirm()},r.onchange=function(){t.resetValidationError()},s.oninput=function(){t.resetValidationError(),s.previousSibling.value=s.value},s.onchange=function(){t.resetValidationError(),s.previousSibling.value=s.value},a.onchange=function(){t.resetValidationError()},l.onchange=function(){t.resetValidationError()},c.oninput=function(){t.resetValidationError()},e}}else console.error("SweetAlert2 requires document to initialize")}()},g=function(){return f(o.spacer)},v=function(){return f(o.progresssteps)},y=function(){return f(o.validationerror)},b=function(){return f(o.confirm)},w=function(){return f(o.cancel)},x=function(){return f(o.close)},k=function(e){var t=[b(),w()];return e&&t.reverse(),t.concat(Array.prototype.slice.call(m().querySelectorAll("button:not([class^="+n+"]), input:not([type=hidden]), textarea, select")))},C=function(e,t){return e.classList.contains(t)},_=function(e){if(e.focus(),"file"!==e.type){var t=e.value;e.value="",e.value=t}},S=function(e,t){e&&t&&t.split(/\s+/).forEach(function(t){e.classList.add(t)})},M=function(e,t){e&&t&&t.split(/\s+/).forEach(function(t){e.classList.remove(t)})},T=function(e,t){for(var i=0;i<e.childNodes.length;i++)if(C(e.childNodes[i],t))return e.childNodes[i]},O=function(e,t){t||(t="block"),e.style.opacity="",e.style.display=t},L=function(e){e.style.opacity="",e.style.display="none"},$=function(e){return e.offsetWidth||e.offsetHeight||e.getClientRects().length},D=function(e){if("function"==typeof MouseEvent){var t=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0});e.dispatchEvent(t)}else if(document.createEvent){var i=document.createEvent("MouseEvents");i.initEvent("click",!1,!1),e.dispatchEvent(i)}else document.createEventObject?e.fireEvent("onclick"):"function"==typeof e.onclick&&e.onclick()},I=function(e){"function"==typeof e.stopPropagation?(e.stopPropagation(),e.preventDefault()):window.event&&window.event.hasOwnProperty("cancelBubble")&&(window.event.cancelBubble=!0)},A=function(){var e=document.createElement("div"),t={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd oanimationend",msAnimation:"MSAnimationEnd",animation:"animationend"};for(var i in t)if(t.hasOwnProperty(i)&&void 0!==e.style[i])return t[i];return!1}(),z=function(){var e=document.createElement("div");e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t},N=function(e,t,i){var n;return function(){var r=this,o=arguments,s=i&&!n;clearTimeout(n),n=setTimeout(function(){n=null,i||e.apply(r,o)},t),s&&e.apply(r,o)}},P=d({},a),E=[],F=function(e){var i=m();for(var n in e)a.hasOwnProperty(n)||"extraParams"===n||console.warn('SweetAlert2: Unknown parameter "'+n+'"');i.style.width="number"==typeof e.width?e.width+"px":e.width,i.style.padding=e.padding+"px",i.style.background=e.background;var r,l=i.querySelector("h2"),c=i.querySelector("."+o.content),u=b(),d=w(),p=i.querySelector("."+o.close);if(l.innerHTML=e.title.split("\n").join("<br>"),e.text||e.html){if("object"==typeof e.html)if(c.innerHTML="",0 in e.html)for(r=0;r in e.html;r++)c.appendChild(e.html[r].cloneNode(!0));else c.appendChild(e.html.cloneNode(!0));else c.innerHTML=e.html||e.text.split("\n").join("<br>");O(c)}else L(c);e.showCloseButton?O(p):L(p),i.className=o.modal,e.customClass&&S(i,e.customClass);var h=v(),f=parseInt(null===e.currentProgressStep?t.getQueueStep():e.currentProgressStep,10);e.progressSteps.length?(O(h),function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(h),f>=e.progressSteps.length&&console.warn("SweetAlert2: Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),e.progressSteps.forEach(function(t,i){var n=document.createElement("li");if(S(n,o.progresscircle),n.innerHTML=t,i===f&&S(n,o.activeprogressstep),h.appendChild(n),i!==e.progressSteps.length-1){var r=document.createElement("li");S(r,o.progressline),r.style.width=e.progressStepsDistance,h.appendChild(r)}})):L(h);var y=m().querySelectorAll("."+o.icon);for(r=0;r<y.length;r++)L(y[r]);if(e.type){var x=!1;for(var k in s)if(e.type===k){x=!0;break}if(!x)return console.error("SweetAlert2: Unknown alert type: "+e.type),!1;var C=i.querySelector("."+o.icon+"."+s[e.type]);switch(O(C),e.type){case"success":S(C,"animate"),S(C.querySelector(".tip"),"animate-success-tip"),S(C.querySelector(".long"),"animate-success-long");break;case"error":S(C,"animate-error-icon"),S(C.querySelector(".x-mark"),"animate-x-mark");break;case"warning":S(C,"pulse-warning")}}var _=i.querySelector("."+o.image);e.imageUrl?(_.setAttribute("src",e.imageUrl),O(_),e.imageWidth?_.setAttribute("width",e.imageWidth):_.removeAttribute("width"),e.imageHeight?_.setAttribute("height",e.imageHeight):_.removeAttribute("height"),_.className=o.image,e.imageClass&&S(_,e.imageClass)):L(_),e.showCancelButton?d.style.display="inline-block":L(d),e.showConfirmButton?function(e,t){e.style.removeProperty?e.style.removeProperty(t):e.style.removeAttribute(t)}(u,"display"):L(u);var T=g();e.showConfirmButton||e.showCancelButton?O(T):L(T),u.innerHTML=e.confirmButtonText,d.innerHTML=e.cancelButtonText,e.buttonsStyling&&(u.style.backgroundColor=e.confirmButtonColor,d.style.backgroundColor=e.cancelButtonColor),u.className=o.confirm,S(u,e.confirmButtonClass),d.className=o.cancel,S(d,e.cancelButtonClass),e.buttonsStyling?(S(u,"styled"),S(d,"styled")):(M(u,"styled"),M(d,"styled"),u.style.backgroundColor=u.style.borderLeftColor=u.style.borderRightColor="",d.style.backgroundColor=d.style.borderLeftColor=d.style.borderRightColor=""),!0===e.animation?M(i,"no-animation"):S(i,"no-animation")},H=function(e,t){var n=m();e?(S(n,"show-swal2"),S(i,"fade"),M(n,"hide-swal2")):M(n,"fade"),O(n),i.style.overflowY="hidden",A&&!C(n,"no-animation")?n.addEventListener(A,function e(){n.removeEventListener(A,e),i.style.overflowY="auto"}):i.style.overflowY="auto",S(i,"in"),S(document.body,o.in),null===h.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(h.previousBodyPadding=document.body.style.paddingRight,document.body.style.paddingRight=z()+"px"),h.previousActiveElement=document.activeElement,null!==t&&"function"==typeof t&&t.call(this,n)};return t.isVisible=function(){var e=m();return $(e)},t.queue=function(e){E=e;var i=m(),n=function(){E=[],i.removeAttribute("data-queue-step")};return new Promise(function(e,r){!function o(s,a){s<E.length?(i.setAttribute("data-queue-step",s),t(E[s]).then(function(){o(s+1,a)},function(e){n(),r(e)})):(n(),e())}(0)})},t.getQueueStep=function(){return m().getAttribute("data-queue-step")},t.insertQueueStep=function(e,t){return t&&t<E.length?E.splice(t,0,e):E.push(e)},t.deleteQueueStep=function(e){void 0!==E[e]&&E.splice(e,1)},t.close=t.closeModal=function(t){var n=m();M(n,"show-swal2"),S(n,"hide-swal2");var r=n.querySelector("."+o.icon+"."+s.success);M(r,"animate"),M(r.querySelector(".tip"),"animate-success-tip"),M(r.querySelector(".long"),"animate-success-long");var a=n.querySelector("."+o.icon+"."+s.error);M(a,"animate-error-icon"),M(a.querySelector(".x-mark"),"animate-x-mark");var l=n.querySelector("."+o.icon+"."+s.warning);M(l,"pulse-warning"),function(){var e=m();window.onkeydown=h.previousWindowKeyDown,h.previousActiveElement&&h.previousActiveElement.focus&&h.previousActiveElement.focus(),clearTimeout(e.timeout)}(),A&&!C(n,"no-animation")?n.addEventListener(A,function t(){n.removeEventListener(A,t),C(n,"hide-swal2")&&(L(n),M(i,"in"),M(document.body,o.in),e())}):(L(n),M(i,"in"),M(document.body,o.in),e()),null!==t&&"function"==typeof t&&t.call(this,n)},t.clickConfirm=function(){b().click()},t.clickCancel=function(){w().click()},t.setDefaults=function(e){if(!e)throw new Error("userParams is required");if("object"!=typeof e)throw new Error("userParams has to be a object");d(P,e)},t.resetDefaults=function(){P=d({},a)},t.version="5.2.0","function"==typeof Promise?Promise.prototype.done=Promise.prototype.done||function(){return this.catch(function(){})}:console.warn("SweetAlert2: Please inlude Promise polyfill BEFORE including sweetalert2.js if IE10+ support needed."),t}),window.Sweetalert2&&(window.sweetAlert=window.swal=window.Sweetalert2);